var XipWf={createInstanceByProcess:function(c,d){Ext.Msg.wait(XipLang.xwf_lang_ins_create);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=createInstanceByProcessCode";var b={processCode:c};XipWfPrivate.sendAjaxRequest(a,b,d)},createInstanceByEntity:function(a,b,c){XipWfPrivate.getProcessIdByEntityCode(a,b,function(d){if(d.flag!=0){if(c){c(d)}Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg);return}var e=d.processId;XipWfPrivate.createInstanceByProcessId(e,c)})},submitInstance:function(d,f,g){Ext.Msg.wait(XipLang.xwf_lang_ins_submit);if(!f){f={}}else{if(typeof(f)!="object"){try{f=Ext.JSON.decode(f)}catch(c){Ext.Msg.alert(XipLang.xwf_lang_notice,c);return}}}var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=submitProcessOld";var b={instanceCode:d,entityAttJson:f};var e=Ext.JSON.encode(b);Ext.Ajax.request({url:a,method:"POST",sync:"",scope:this,timeout:300000,headers:{"Content-Type":"application/json"},jsonData:e,success:function(i,j){Ext.Msg.hide();var h=Ext.decode(i.responseText);if(h.flag==0){var k={flag:0,instanceCode:d};g(k)}else{if(h.flag==1){var k={flag:1,msg:h.msg};g(k)}else{f.p_instanceCode=d;XipWfPrivate.chooseUsers(h.data,h.multiselect,f,"submit",g)}}},failure:function(h,i){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_request_error)}})},restartInstanceByProcess:function(c,f,g){Ext.Msg.wait(XipLang.xwf_lang_pro_restart);var e="";if(!Ext.isEmpty(f)){var a=XipWfPrivate.getProcessIdByCode(f);if(a.flag==1){return}else{e=a.processId}}if(Ext.isEmpty(e)||e==undefined){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_no_pro_code);return}var b=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=restartInstance";var d={instanceCode:c,processId:e};XipWfPrivate.sendAjaxRequest(b,d,function(h){Ext.Msg.alert("",h.msg);if(h.flag==0){if(g){g(h)}}})},restartInstanceByEntity:function(a,b,c,d){XipWfPrivate.getProcessIdByEntityCode(b,c,function(g){if(g.flag!=0){if(d){d(g)}Ext.Msg.alert(XipLang.xwf_lang_notice,g.msg);return}var h=g.processId;var e=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=restartInstance";var f={instanceCode:a,processId:h};Ext.Msg.wait(XipLang.xwf_lang_pro_restart);XipWfPrivate.sendAjaxRequest(e,f,function(i){Ext.Msg.alert("",i.msg);if(i.flag==0){if(d){d(i)}}})})},startAndSubmitByProcess:function(d,c,e){Ext.Msg.wait(XipLang.xwf_lang_pro_code_start);var b="";if(!Ext.isEmpty(d)){var a=XipWfPrivate.getProcessIdByCode(d);if(a.flag==1){return}else{b=a.processId}}if(Ext.isEmpty(b)||b==undefined){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_no_pro_code);return}XipWfPrivate.startAndSubmitProcess(b,c,e)},startAndSubmitByEntity:function(e,f,g){Ext.Msg.wait(XipLang.xwf_lang_pro_code_query);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getProcessIdByEntityCodeOld";if(!f){f={}}else{if(typeof(f)!="object"){try{f=Ext.JSON.decode(f)}catch(c){Ext.Msg.alert(XipLang.xwf_lang_notice,c);return}}}var b={entityCode:e,entityAttJson:f};var d=Ext.JSON.encode(b);Ext.Ajax.request({url:a,method:"POST",sync:"",scope:this,timeout:300000,headers:{"Content-Type":"application/json"},jsonData:d,success:function(q,k){Ext.Msg.hide();var s=Ext.decode(q.responseText);if(s.flag==0){var j=s.processId;XipWfPrivate.startAndSubmitProcess(j,f,g)}else{if(s.flag==1){var r={flag:1,msg:s.msg};Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_pro_effective+s.msg,function(){g(r)})}else{var p=new Array();for(var m=0;m<s.data.length;m++){var o=s.data[m];var t={processId:o.processId,processCode:o.processCode,processName:o.processName};p[m]=t}function l(){var u=h.getSelectionModel().getSelection();if(u.length==1){var i=u[0];Ext.MessageBox.confirm(XipLang.xwf_lang_confirm_pro,XipLang.xwf_lang_pro_choose+"：【"+i.get("processName")+"】,"+XipLang.xwf_lang_tip_confirm,function(v){if(v=="yes"){n.close();var w=i.get("processId");XipWfPrivate.startAndSubmitProcess(w,f,g)}})}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_one_choose)}}var h=Ext.create("Ext.grid.Panel",{store:{data:p,fields:[{name:"processId",type:"string"},{name:"processCode",type:"string"},{name:"processName",type:"string"}]},selModel:{showHeaderCheckbox:false,selType:"checkboxmodel",mode:"SINGLE"},columns:[new Ext.grid.RowNumberer(),{text:"ID",dataIndex:"processId",hidden:true},{text:XipLang.xwf_lang_process_code,dataIndex:"processCode",width:130},{text:XipLang.xwf_lang_process_name,dataIndex:"processName",width:180}],height:200,width:400,listeners:{rowdblclick:l}});var n=new Ext.Window({width:440,height:400,layout:"fit",buttonAlign:"center",items:[h],modal:true,closeAction:"close",title:XipLang.xwf_lang_one_choose,buttons:[{text:XipLang.xwf_lang_btn_confirm,handler:l},{text:XipLang.xwf_lang_btn_cancel,handler:function(){n.close()}}]});Ext.Msg.hide();n.show()}}},failure:function(h,i){xt.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_request_error)}})},restartAndSubmitByProcess:function(d,g,f,h){Ext.Msg.wait(XipLang.xwf_lang_pro_restart);var e="";if(!Ext.isEmpty(g)){var a=XipWfPrivate.getProcessIdByCode(g);if(a.flag==1){return}else{e=a.processId}}if(Ext.isEmpty(e)||e==undefined){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_no_pro_code);return}var b=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=restartInstance";var c={instanceCode:d,processId:e};Ext.Msg.wait(XipLang.xwf_lang_instance_recreate);XipWfPrivate.sendAjaxRequest(b,c,function(i){if(i.flag==0){XipWf.submitInstance(d,f,h)}})},restartAndSubmitByEntity:function(a,b,c,d){XipWfPrivate.getProcessIdByEntityCode(b,c,function(g){if(g.flag!="0"){if(d){d(g)}Ext.Msg.alert(XipLang.xwf_lang_notice,g.msg);return}var h=g.processId;var e=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=restartInstance";var f={instanceCode:a,processId:h};Ext.Msg.wait(XipLang.xwf_lang_instance_recreate);XipWfPrivate.sendAjaxRequest(e,f,function(i){if(i.flag=="0"){XipWf.submitInstance(a,c,d)}})})},revokeByInstance:function(b,d){Ext.Msg.wait(XipLang.xwf_lang_pro_recall);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=revokeByInsCode";var c={instanceCode:b};XipWfPrivate.sendAjaxRequest(a,c,d)},setInstanceEntityAttrValue:function(a,c,b){Ext.Ajax.request({url:"workflowUtilAction.do?method=setInstanceEntityAttrValue",params:{instanceCode:a,entityAttrs:c},method:"post",async:false,timeout:3600000,success:function(d,e){var f=Ext.util.JSON.decode(d.responseText);b(f)},failure:function(e,d){b({flag:1,msg:XipLang.xwf_lang_send_error})}})},showMonitorPage:function(a){if(a==null||a=="undefined"||a==""){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_appoint_code);return}var c=XipWfPrivate.getContextPath()+"/workflow/monitor/extMonitorFrame.jsp?insCode="+a;var b={title:XipLang.xwf_lang_pro_monitor,url:c,isMax:true};Xip.showExtWindow(b)},createButtonsByTaskId:function(m,f,b,o,p){var g;var n;var h=new Array();var q=new Array();if(p=="closed"){g={};g.flag="0";g.msg=XipLang.xwf_lang_task_finished;n=[]}else{g=XipWfPrivate.getButtonsByTaskId(m);n=g.data}for(var k=0;k<n.length;k++){var l=n[k];var d=l.id;var c=l.code;var a=l.name;var j=l.disable;if(j=="N"){var e=new Ext.Button({text:a});if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_CANCEL){e.setHandler(function(){Ext.MessageBox.confirm(XipLang.xwf_lang_notice,XipLang.process_recall_confirm,function(s){if(s=="yes"){var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CANCEL,b,o);if(r==null){XipWfPrivate.doCancel(m,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CANCEL,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.doCancel(m,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CANCEL,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}}else{return false}})})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT){e.setHandler(function(){var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT,b,o);var s=f.getValue();if(r==null){XipWfPrivate.chooseAllUsers(m,XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.chooseAllUsers(m,XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_CLOSE){e.setHandler(function(){var s=f.getValue();var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_CLOSE,b,o);if(r==null){XipWfPrivate.closeConsult(m,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_CLOSE,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.closeConsult(m,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_CLOSE,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_REVOKE){e.setHandler(function(){var s=f.getValue();var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_REVOKE,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_REVOKE,b,o));if(r==null){XipWfPrivate.revokeConsult(m,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_REVOKE,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.revokeConsult(m,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT_REVOKE,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE){e.setHandler(function(){var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE,b,o);var s=f.getValue();if(r==null){XipWfPrivate.chooseAllUsers(m,XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.chooseAllUsers(m,XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_BACK){e.setHandler(function(){var t=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_BACK,b,o);if(t==null){var r=XipWfPrivate.getGlobalData(XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getBackActivityList",m);if(r.flag==0){var i=r.data;var u=f.getValue();XipWfPrivate.chooseBackActivity(i,m,u,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_BACK,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,r.msg);return false}}else{var s=Ext.JSON.decode(t);if(s.flag==0){var r=XipWfPrivate.getGlobalData(XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getBackActivityList",m);if(r.flag==0){var i=r.data;var u=f.getValue();XipWfPrivate.chooseBackActivity(i,m,u,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_BACK,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,r.msg);return false}}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+s.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_REJECT){e.setHandler(function(){var s=f.getValue();var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_REJECT,b,o);if(r==null){XipWfPrivate.doReject(m,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_REJECT,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.doReject(m,s,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_REJECT,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_COPYTO){e.setHandler(function(){var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_COPYTO,b,o);if(r==null){XipWfPrivate.closeCopyTo(m,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_COPYTO,b,o))}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.closeCopyTo(m,XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_COPYTO,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{if(c==XipWfPrivate.WorkFlowConstants.TASK_BTN_FORWARD){e.setHandler(function(){var r=XipWfPrivate.beforeHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_FORWARD,b,o);if(r==null){XipWfPrivate.forward(m,b,o)}else{var i=Ext.JSON.decode(r);if(i.flag==0){XipWfPrivate.forward(m,b,o)}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+i.msg);return false}}})}else{q.push(e.getId()+";"+c);e.setHandler(function(v){var w="";for(var t=0;t<q.length;t++){var i=q[t].split(";");if(i[0]==v.id){w=i[1];break}}var x=f.getValue();if(x==null||x==""){x=v.text}var s=XipWfPrivate.beforeHandlerEventWithCallback("check",m,w,b,o);if(s==true){XipWfPrivate.beforeHandlerEventWithCallback("run",m,w,b,o,function(){var z=XipWfPrivate.beforeHandlerEvent(w,b,o);if(z==null){XipWfPrivate.completeTask(m,w,x,XipWfPrivate.afterHandlerEvent(w,b,o))}else{var y=Ext.JSON.decode(z);if(y.flag==0){XipWfPrivate.completeTask(m,w,x,XipWfPrivate.afterHandlerEvent(w,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+y.msg);return false}}});return false}var u=XipWfPrivate.beforeHandlerEvent(w,b,o);if(u==null){XipWfPrivate.completeTask(m,w,x,XipWfPrivate.afterHandlerEvent(w,b,o))}else{var r=Ext.JSON.decode(u);if(r.flag==0){XipWfPrivate.completeTask(m,w,x,XipWfPrivate.afterHandlerEvent(w,b,o))}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_execute_failure+r.msg);return false}}})}}}}}}}}}h.push(e)}}return h},getBizFormUrl:function(c){var b=XipWfPrivate.getContextPath()+"/workItemAction.do?method=getTaskBaseInfo";var a={taskId:c};var d=XipWfPrivate.sendAjaxReq(b,a,false);if(d==null||d==""||d=="undefined"){return null}else{return d.formUrl}}};var XipWfPrivate={WorkFlowConstants:{TASK_BTN_CONSULT:"btnConsult",TASK_BTN_DELEGATE:"btnDelegate",TASK_BTN_BACK:"btnBack",TASK_BTN_CONSULT_CLOSE:"btnCloseConsult",TASK_BTN_CONSULT_REVOKE:"btnRevokeConsult",TASK_BTN_SUBMIT:"btnSubmit",TASK_BTN_CANCEL:"btnCancel",TASK_BTN_COPYTO:"btnCopyTo",TASK_BTN_REJECT:"btnReject",BIZ_PANEL_FRAME:"bizPanelFrame",TASK_BTN_FORWARD:"btnForward"},getContextPath:function(){var c=document.location.pathname;var b=c.substr(1).indexOf("/");var a=c.substr(0,b+1);return a},jsonToAjaxParam:function(c){var b="";for(var a in c){b+=a+"="+c[a]+"&"}return b},sendAjaxReq:function(b,a,c){var d;Ext.Ajax.request({url:b,params:a,method:"post",timeout:3600000,async:c,success:function(e,f){d=Ext.JSON.decode(e.responseText)},failure:function(g,f){var e=Ext.JSON.decode(e.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg)}});return d},sendRequest:function(a,c){var b=Ext.lib.Ajax.getConnectionObject().conn;b.open("post",a,false);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.send(XipWfPrivate.jsonToAjaxParam(c));return b.responseText},sendAjaxRequest:function(a,b,c){if(!b){b={}}Ext.Ajax.request({url:a,method:"POST",timeout:300000,params:b,success:function(d,e){Ext.Msg.hide();c(Ext.JSON.decode(d.responseText))},failure:function(d,e){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_request_error)}})},createInstanceByProcessId:function(c,d){Ext.Msg.wait(XipLang.xwf_lang_id_create);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=createInstanceByProcessId";var b={processId:c};XipWfPrivate.sendAjaxRequest(a,b,d)},startAndSubmitProcess:function(c,b,d){Ext.Msg.wait(XipLang.xwf_lang_id_create);if(!b){b={processId:c}}else{if(typeof(b)!="object"){try{b=Ext.JSON.decode(b)}catch(a){Ext.Msg.alert(XipLang.xwf_lang_notice,a);return}}b.processId=c}Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=createInstanceByProcessId",method:"POST",timeout:300000,params:b,success:function(e,g){Ext.Msg.hide();var h=Ext.JSON.decode(e.responseText);if(h.flag!=0){d(h);return}else{var f=h.instanceCode;XipWf.submitInstance(f,b,d)}},failure:function(e,f){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_request_error)}})},getProcessIdByEntityCode:function(e,f,g){Ext.Msg.wait(XipLang.xwf_lang_pro_code_query);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getProcessIdByEntityCodeOld";if(!f){f={}}else{if(typeof(f)!="object"){try{f=Ext.JSON.decode(f)}catch(c){Ext.Msg.alert(XipLang.xwf_lang_notice,c);return}}}var b={entityCode:e,entityAttJson:f};var d=Ext.JSON.encode(b);Ext.Ajax.request({url:a,method:"POST",async:true,scope:this,timeout:300000,headers:{"Content-Type":"application/json"},jsonData:d,success:function(r,j){Ext.Msg.hide();var t=Ext.JSON.decode(r.responseText);if(t.flag==0){var l=t.processId;var m=f.e_instance_code;if(m!=null&&m!=""&&m!="undefined"){XipWfPrivate.restartInstanceSubmit(m,l,f,g)}else{if(g){g(t)}}}else{if(t.flag==1){var s={flag:1,msg:t.msg};Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_pro_effective+t.msg,function(){g(s)})}else{var q=new Array();for(var n=0;n<t.data.length;n++){var p=t.data[n];var u={processId:p.processId,processCode:p.processCode,processName:p.processName};q[n]=u}function k(){var v=h.getSelectionModel().getSelection();if(v.length==1){var i=v[0];Ext.MessageBox.confirm("XipLang.xwf_lang_confirm_pro",XipLang.xwf_lang_pro_choose+":【"+i.get("processName")+"】,"+XipLang.xwf_lang_tip_confirm,function(w){if(w=="yes"){f.flag=0;f.processId=i.get("processId");f.processCode=i.get("processCode");f.processName=i.get("processName");o.close();g(f)}})}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_one_choose)}}var h=Ext.create("Ext.grid.Panel",{store:{data:q,fields:[{name:"processId",type:"string"},{name:"processCode",type:"string"},{name:"processName",type:"string"}]},selModel:{showHeaderCheckbox:false,selType:"checkboxmodel",mode:"SINGLE"},columns:[new Ext.grid.RowNumberer(),{text:"ID",dataIndex:"processId",hidden:true},{text:XipLang.xwf_lang_process_code,dataIndex:"processCode",width:130},{text:XipLang.xwf_lang_process_name,dataIndex:"processName",width:180}],height:200,width:400,listeners:{rowdblclick:k}});var o=new Ext.Window({width:440,height:400,layout:"fit",buttonAlign:"center",items:[h],modal:true,closeAction:"close",title:XipLang.xwf_lang_one_choose,buttons:[{text:XipLang.xwf_lang_btn_confirm,handler:k},{text:XipLang.xwf_lang_btn_cancel,handler:function(){o.close()}}]});Ext.Msg.hide();o.show()}}},failure:function(h,i){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_request_error)}})},restartInstance:function(b,d,e){Ext.Msg.wait(XipLang.xwf_lang_pro_restart);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=restartInstance";var c={instanceCode:b,processId:d};XipWfPrivate.sendAjaxRequest(a,c,e)},restartInstanceSubmit:function(a,c,b,d){XipWfPrivate.restartInstance(a,c,function(e){if(e.flag!=0){Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg,function(){d(e)});return}XipWf.submitInstance(a,b,d)})},doCancel:function(a,c){var b=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=revokeProcess4Task",params:{taskId:a},method:"post",timeout:3600000,success:function(d,f){b.hide();var d=Ext.JSON.decode(d.responseText);if(d==1){Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg)}else{try{c()}catch(g){}XipWfPrivate.closeTaskWin()}},failure:function(f,e){b.hide();var d=Ext.JSON.decode(d.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg)}})},doConsult:function(a,c,b){XipWfPrivate.chooseAllUsers(a,XipWfPrivate.WorkFlowConstants.TASK_BTN_CONSULT,c,b)},doDelegate:function(a,c,b){XipWfPrivate.chooseAllUsers(a,XipWfPrivate.WorkFlowConstants.TASK_BTN_DELEGATE,c,b)},closeConsult:function(a,d,c){if(d==null||d==""||d=="undefined"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_consultation);return false}var b=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=closeConsultTask",params:{taskId:a,comment:d},method:"post",timeout:3600000,success:function(f,g){b.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}else{XipWfPrivate.closeTaskWin();try{c()}catch(h){}}},failure:function(g,f){b.hide();var e=Ext.JSON.decode(e.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg)}})},revokeConsult:function(a,d,c){var b=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=revokeConsultTask",params:{taskId:a,comment:d},method:"post",timeout:3600000,success:function(f,g){b.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}else{XipWfPrivate.closeTaskWin();try{c()}catch(h){}}},failure:function(g,f){b.hide();var e=Ext.JSON.decode(e.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg)}})},doBack:function(c,e,d){if(e==null||e==""){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_back_comment);return}var b=XipWfPrivate.getGlobalData(XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getBackActivityList",c);if(b.flag==0){var a=b.data;XipWfPrivate.chooseBackActivity(a,c,e,d)}else{Ext.Msg.alert(XipLang.xwf_lang_notice,b.msg);return false}},doReject:function(a,d,c){if(d==null||d==""||d=="undefined"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_reject_comment);return false}var b=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=rejectProcess",params:{taskId:a,comment:d},method:"post",timeout:3600000,success:function(f,g){b.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}else{XipWfPrivate.closeTaskWin();try{c()}catch(h){}}},failure:function(g,f){b.hide();var e=Ext.JSON.decode(e.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg)}})},closeCopyTo:function(a,c){var b=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=closeCopyToTask",params:{taskId:a},method:"post",timeout:3600000,success:function(d,f){b.hide();var d=Ext.JSON.decode(d.responseText);if(d.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg)}else{XipWfPrivate.closeTaskWin();try{c()}catch(g){}}},failure:function(f,e){b.hide();var d=Ext.JSON.decode(d.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg)}})},completeTask:function(b,d,f,e){Ext.Msg.wait(XipLang.xwf_lang_complete_task);var a=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=completeWorkItem";var c={taskId:b,lineCode:d,comment:f};XipWfPrivate.sendAjaxRequest(a,c,function(g){if(g.flag==0){var h={flag:0,taskId:b};if(e){e()}XipWfPrivate.closeTaskWin()}else{if(g.flag==1){var h={flag:1,msg:g.msg};Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_fail_task+g.msg,function(){if(e){e()}})}else{XipWfPrivate.chooseUsers(g.data,g.multiselect,c,"commitTask",e)}}})},complateConsult:function(b,a,e,d){if(e==null||e==""||e=="undefined"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_consultation);return false}var c=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=doConsult",params:{taskId:b,userId:a,comment:e},method:"post",timeout:3600000,success:function(f,g){c.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}else{XipWfPrivate.closeTaskWin();try{d()}catch(h){}}},failure:function(h,g){c.hide();var f=Ext.JSON.decode(f.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}})},complateDelegate:function(b,a,e,d){if(e==null||e==""||e=="undefined"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_note_comment);return false}var c=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=doDelegate",params:{taskId:b,userId:a,comment:e},method:"post",timeout:3600000,success:function(f,g){c.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}else{XipWfPrivate.closeTaskWin();try{d()}catch(h){}}},failure:function(h,g){c.hide();var f=Ext.JSON.decode(f.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}})},complateBack:function(b,e,a,d){if(e==null||e==""||e=="undefined"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_back_comment);return false}var c=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_submit_request,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=doBack",params:{taskId:b,backToActivityId:a,comment:e},method:"post",timeout:3600000,success:function(f,g){c.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag==1){Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}else{XipWfPrivate.closeTaskWin();try{d()}catch(h){}}},failure:function(h,g){c.hide();var f=Ext.JSON.decode(f.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}})},getButtonsByTaskId:function(a){var b=[];Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getButtonsByTaskId",params:{taskId:a},method:"post",timeout:3600000,async:false,success:function(c,d){b=Ext.JSON.decode(c.responseText)},failure:function(e,d){var c=Ext.JSON.decode(c.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,c.msg)}});return b},chooseAllUsers:function(j,a,h,l){if(h==null||h==""||h=="undefined"){if(a=="btnConsult"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_consultation)}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_appointer)}return false}Ext.define("User",{extend:"Ext.data.Model",fields:[{name:"userId",type:"string"},{name:"userName",type:"string"},{name:"empCode",type:"string"},{name:"empName",type:"string"},{name:"orgName",type:"string"}]});Ext.define("User",{extend:"Ext.data.Model",fields:[{name:"userId",mapping:"userId"},{name:"userName",mapping:"userName"},{name:"empCode",mapping:"empCode"},{name:"empName",mapping:"empName"},{name:"orgName",mapping:"orgName"}]});var k=Ext.create("Ext.data.Store",{model:"User",pageSize:10,proxy:{type:"ajax",url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getUsersForConsultOrDelegate4Ext",reader:{type:"json",root:"dataList",totalProperty:"totalProperty"}},listeners:{beforeload:function(){var m={taskId:j,condition:d.getValue()};Ext.apply(k.proxy.extraParams,m)}}});var d=Ext.create("Ext.form.field.Text",{width:250,inputType:"text",labelSeparator:":",fieldLabel:XipLang.xwf_lang_name,labelWidth:40,labelAlign:"right",listeners:{specialkey:function(n,m){if(m.getKey()==m.ENTER){if(Ext.isEmpty(d.getValue())){Wb.toast(XipLang.xwf_lang_condition_not_null);return}k.load({params:{start:0,limit:10}})}}}});var e=Ext.create("Ext.toolbar.Toolbar",{items:[d,{xtype:"button",text:XipLang.xwf_lang_query,x:5,handler:function(){if(Ext.isEmpty(d.getValue())){Wb.toast(XipLang.xwf_lang_condition_not_null);return}k.load({params:{start:0,limit:10}})}},{xtype:"button",x:10,text:XipLang.xwf_lang_reset,handler:function(){d.setValue("");k.removeAll()}}]});var f=Ext.create("Ext.grid.Panel",{store:k,selModel:{showHeaderCheckbox:false,selType:"checkboxmodel",mode:"SINGLE"},tbar:e,columns:[new Ext.grid.RowNumberer({header:XipLang.xwf_lang_number,width:35}),{header:"用户ID",hidden:true,dataIndex:"userId"},{header:XipLang.xwf_lang_user_name,width:120,dataIndex:"userName"},{header:XipLang.xwf_lang_emp_code,width:120,dataIndex:"empCode"},{header:XipLang.xwf_lang_emp_name,width:120,dataIndex:"empName"},{header:XipLang.xwf_lang_org_name,width:290,dataIndex:"orgName"}],loadMask:{msg:XipLang.xwf_lang_data_loading},listeners:{render:function(){}}});var b=(a=="btnConsult"?XipLang.xwf_lang_asker:XipLang.xwf_lang_signer);var c=Ext.create("Ext.Button",{text:XipLang.xwf_lang_selecting,handler:function(){var m=f.getSelectionModel().getSelection();if(m.length==0){Ext.Msg.alert(XipLang.xwf_lang_notice,b);return false}else{var n="";Ext.each(m,function(o){n=o.get("userId")});i.hide();if(a=="btnConsult"){XipWfPrivate.complateConsult(j,n,h,l)}else{if(a=="btnDelegate"){XipWfPrivate.complateDelegate(j,n,h,l)}else{}}}}});var g=Ext.create("Ext.Button",{text:XipLang.xwf_lang_btn_cancel,handler:function(){i.hide()}});var i=Ext.create("Ext.window.Window",{title:'<div style="padding:7 "><span style="color:blue;">'+b+"</span></div>",width:750,height:400,modal:true,layout:"fit",onEsc:function(){i.hide()},items:[f],buttonAlign:"right",buttons:[c,g]});i.show()},chooseBackActivity:function(c,g,e,i){if(e==null||e==""||e=="undefined"){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_back_comment);return false}var h=Ext.create("Ext.data.JsonStore",{data:c,fields:["activityId","activityCode","activityName"]});var a=Ext.create("Ext.grid.Panel",{store:h,selModel:{showHeaderCheckbox:false,selType:"checkboxmodel",mode:"SINGLE"},columns:[new Ext.grid.RowNumberer({header:XipLang.xwf_lang_number,width:35}),{header:"节点ID",hidden:true,dataIndex:"activityId"},{header:XipLang.xwf_lang_node_code,width:200,dataIndex:"activityCode"},{header:XipLang.xwf_lang_node_name,flex:1,dataIndex:"activityName"}],loadMask:{msg:XipLang.xwf_lang_data_loading}});var b=Ext.create("Ext.Button",{text:XipLang.xwf_lang_selecting,handler:function(){var j=a.getSelectionModel().getSelection();if(j.length==0){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_back_node);return false}else{var k="";Ext.each(j,function(l){k=l.get("activityId")});f.hide();XipWfPrivate.complateBack(g,e,k,i)}}});var d=Ext.create("Ext.Button",{text:XipLang.xwf_lang_btn_cancel,handler:function(){f.hide()}});var f=Ext.create("Ext.window.Window",{title:'<div style="padding:7 "><span style="color:blue;">'+XipLang.xwf_lang_back_node+"</span></div>",width:600,height:400,modal:true,layout:"fit",items:[a],buttonAlign:"right",buttons:[b,d]});f.show()},getGlobalData:function(a,b){var c=[];Ext.Ajax.request({url:a,params:{taskId:b},method:"post",timeout:3600000,async:false,success:function(d,e){c=Ext.JSON.decode(d.responseText)},failure:function(f,e){var d=Ext.JSON.decode(d.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg)}});return c},getProcessIdByCode:function(c){var a="";var b="";Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=getProcIdByCode",params:{processCode:c},method:"post",timeout:3600000,async:false,success:function(d,e){var d=Ext.JSON.decode(d.responseText);if(d.flag=="0"){b=0;a=d.msg}else{b=1;Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg)}},failure:function(f,e){var d=Ext.JSON.decode(d.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,d.msg);b=1}});return{flag:b,processId:a}},chooseUsers:function(d,f,g,k,l){var e="";if(d.length>0){e='<font color="red">【'+d[0].actName+"】</font>"}var i=Ext.create("Ext.selection.CheckboxModel",{showHeaderCheckbox:true,selType:"checkboxmodel",mode:"MULTI"});var j=Ext.create("Ext.form.field.Text",{id:"selUserId",width:250,inputType:"text",labelSeparator:":",fieldLabel:XipLang.xwf_lang_user_name,labelWidth:80,labelAlign:"right",listeners:{specialkey:function(o,n){if(n.getKey()==n.ENTER){var m=j.getValue();a.getStore().filterBy(function(p,r){var q=p.get("empName");return(q.indexOf(m)!=-1)})}}}});var c=Ext.create("Ext.toolbar.Toolbar",{items:[j]});function b(){var n=a.getSelectionModel().getSelection();if(n.length>0){var p="";var q="";for(var o=0;o<n.length;o++){var m=n[o];p+=""+m.get("userId")+",";q+=m.get("empName")+"("+m.get("userName")+"),"}p=p.substring(0,p.length-1);q=q.substring(0,q.length-1);Ext.MessageBox.confirm(XipLang.xwf_lang_confirm_auditor,XipLang.xwf_lang_auditor_choose+":【"+q+"】,"+XipLang.xwf_lang_tip_confirm,function(v){if(v=="yes"){h.close();if(k=="submit"){var r=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=submitProcessOld";var s={instanceCode:g.p_instanceCode,entityAttJson:g,userIds:p};Ext.Msg.wait(XipLang.xwf_lang_ins_submit);var t=Ext.JSON.encode(s);Ext.Ajax.request({url:r,method:"POST",sync:"",scope:this,timeout:300000,headers:{"Content-Type":"application/json"},jsonData:t,success:function(x,y){Ext.Msg.hide();var w=Ext.decode(x.responseText);if(w.flag==0){var z={flag:0,instanceCode:g.p_instanceCode};l(z);XipWfPrivate.closeTaskWin()}else{if(w.flag==1){var z={flag:1,msg:w.msg};l(z)}}},failure:function(w,x){Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_request_error)}})}else{if(k=="commitTask"){var u=g;if(!u){u={}}var r=XipWfPrivate.getContextPath()+"/workflowUtilAction.do?method=completeWorkItem";u.userIds=p;Ext.Msg.wait(XipLang.xwf_lang_complete_task);XipWfPrivate.sendAjaxRequest(r,u,function(w){Ext.Msg.hide();if(w.flag==0){var x={flag:0,taskId:u.taskId};XipWfPrivate.closeTaskWin();if(l){l(x)}}else{if(w.flag==1){var x={flag:1,msg:w.msg};Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_fail_task+w.msg,function(){if(l){l(x)}})}}})}else{XipWfPrivate.doForward(g.taskId,p,g.insCode,g.bizId)}}}})}else{Ext.Msg.alert(XipLang.xwf_lang_notice,XipLang.xwf_lang_auditor_choose)}}var a=new Ext.grid.GridPanel({tbar:c,selModel:i,store:{data:d,fields:["userId","actName","userName","empName","orgName"]},columns:[new Ext.grid.RowNumberer(),{text:"ID",dataIndex:"userId",hidden:true},{text:XipLang.xwf_lang_node_name,dataIndex:"actName",hidden:true,width:200},{text:XipLang.xwf_lang_user_name,dataIndex:"userName",width:120},{text:XipLang.xwf_lang_emp_name,dataIndex:"empName",width:100},{text:XipLang.xwf_lang_org_name,dataIndex:"orgName",width:200}],listeners:{rowdblclick:b}});var h=new Ext.Window({width:700,height:400,layout:"fit",items:[a],buttonAlign:"center",modal:true,closeAction:"close",title:XipLang.xwf_lang_auditor_choose,buttons:[{text:XipLang.xwf_lang_btn_confirm,handler:b},{text:XipLang.xwf_lang_btn_cancel,handler:function(){h.close()}}]});h.show();i.select(a.getStore().first())},forward:function(b,a,c){var d=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_transfer_query,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workItemAction.do?method=getForwardExecutors",params:{taskId:b},method:"post",timeout:3600000,success:function(e,f){d.hide();var e=Ext.JSON.decode(e.responseText);if(e.flag=="0"){var g={taskId:b,btnCode:XipWfPrivate.WorkFlowConstants.TASK_BTN_FORWARD,insCode:a,bizId:c};XipWfPrivate.chooseUsers(e.data,true,g,XipWfPrivate.WorkFlowConstants.TASK_BTN_FORWARD,function(){})}else{Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg)}},failure:function(g,f){d.hide();var e=Ext.JSON.decode(e.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,e.msg)}})},doForward:function(c,b,a,d){var e=Ext.MessageBox.show({title:XipLang.xwf_lang_wait_tip,msg:XipLang.xwf_lang_forwarding,width:240,wait:true,progress:true,closable:false});Ext.Ajax.request({url:XipWfPrivate.getContextPath()+"/workItemAction.do?method=doForward",params:{taskId:c,userId:b},method:"post",timeout:3600000,success:function(f,g){e.hide();var f=Ext.JSON.decode(f.responseText);if(f.flag=="0"){XipWfPrivate.afterHandlerEvent(XipWfPrivate.WorkFlowConstants.TASK_BTN_FORWARD,a,d);XipWfPrivate.closeTaskWin()}else{Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}},failure:function(h,g){e.hide();var f=Ext.JSON.decode(f.responseText);Ext.Msg.alert(XipLang.xwf_lang_notice,f.msg)}})},beforeHandlerEventWithCallback:function(c,b,h,a,d,i){if(c=="check"){var g=document.getElementById(XipWfPrivate.WorkFlowConstants.BIZ_PANEL_FRAME);if(g!=null){try{if(g.contentWindow.beforeHandlerWithCallback){return true}}catch(f){return false}return false}else{return false}}else{document.getElementById(XipWfPrivate.WorkFlowConstants.BIZ_PANEL_FRAME).contentWindow.beforeHandlerWithCallback(b,h,a,i,d)}},beforeHandlerEvent:function(b,e,a){var d=null;var f=document.getElementById(XipWfPrivate.WorkFlowConstants.BIZ_PANEL_FRAME);if(f!=null){try{d=f.contentWindow.beforeHandler(b,e,a)}catch(c){d=null}}return d},afterHandlerEvent:function(b,d,a){var e=document.getElementById(XipWfPrivate.WorkFlowConstants.BIZ_PANEL_FRAME);if(e!=null){try{e.contentWindow.afterHandler(b,d,a)}catch(c){}}},closeTaskWin:function(){try{if(Ext.getCmp("w7_taskWFWindow")){Ext.getCmp("w7_taskWFWindow").close()}else{window.parent.Ext.getCmp(xz_ExtWind_soft).close()}}catch(a){}}};document.write('<script src="'+XipWfPrivate.getContextPath()+'/xip/js/xip.js" type="text/javascript" ><\/script>');