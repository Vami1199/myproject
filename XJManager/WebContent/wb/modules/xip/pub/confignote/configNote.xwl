{"inframe":false,"title":"config说明配置","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var ctxPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",ctxPath);","itemId":"module"},"children":[{"configs":{"layout":"fit","itemId":"viewport1"},"children":[{"configs":{"multiSelect":"false","sortableColumns":"true","itemId":"grid1","simpleSelect":"true","editable":"true"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"保存","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"var modifies = app.grid1.store.getModifiedRecords();\nif(modifies==='' || modifies.length===0){\n   Ext.Msg.alert('提示','没有修改保存的记录!');\n  return;\n}\nvar json = \"{\";\nfor(var i=0; i<modifies.length; i++){\n   var record = modifies[i];\n   json = json + \"'\" +record.get('name') + \"':'\" + encodeURI(record.get('note')).replace(/\\'/g,\"\\\\'\") + \"',\";\n   //json = json + \"'\" +record.get('name') + \"':'\" + record.get('note') + \"',\";\n}\n\njson = json.substring(0, json.length-1);\njson = json + \"}\";\nExt.Msg.wait('正在提交请求，请稍候...');\nExt.Ajax.request({\n            url : '{#contextPath#}'+'/platformAction.do?method=saveConfigNote',\n            params:{\"modifyJson\":json},\n            method: 'POST',\n            success: function(response,options){\n              Ext.Msg.hide();\n              var temp = response.responseText;\n              var resp = Ext.JSON.decode(temp);\n              if(resp.flag=='0'){\n                Ext.Msg.alert(\"提示\",'保存成功!');\n                app.grid1.store.load();\n              }else{\n                Ext.Msg.alert(\"提示\",'保存失败:'+resp.msg);\n              }\n            },\n            failure: function(response,options){\n              msg.hide();\n              Ext.Msg.alert(\"提示\",\"服务器端没有响应!\");\n            }\n\t\t});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"{#contextPath#}/platformAction.do?method=getProperties","fields":"[{name:'name'},{name:'value'},{name:'note'}]"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"配置项","width":"200","sortable":"true","dataIndex":"name","itemId":"configName"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"值","hidden":"true","dataIndex":"value","itemId":"configValue"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"配置说明","dataIndex":"note","itemId":"configNote","flex":"1"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}