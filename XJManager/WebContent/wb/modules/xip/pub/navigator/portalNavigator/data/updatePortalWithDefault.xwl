{"inframe":false,"title":"修改自定义主页信息","hidden":true,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/pub/navigator/portalNavigator/data/portal\");\n\n","itemId":"module"},"children":[{"configs":{"errorText":"{#xip_pub_navigator_portal_data_comp_name#}【{#HOME_NAME#}】 {#xip_pub_navigator_portal_data_is_exist#}","sql":"select 1 from xip_portal_home t WHERE HOME_NAME ={?HOME_NAME?} and home_owner ={?XIP.userId?} and home_id<>{?HOME_ID?}","itemId":"checkExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"errorText":"{#xip_pub_navigator_portal_data_comp_name#}【{#HOME_NAME#}】 {#xip_pub_navigator_portal_data_is_exist#}","sql":"select 1 from xip_portal_language t WHERE LANG_VAL = {?HOME_NAME?} and PORTAL_ID <> {?HOME_ID?} and PORTAL_TYPE = 'HOME' and LANG_CODE = '{#sys.useLang#}'","itemId":"checkExistLang"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"update xip_portal_home a\n  set a.is_default = 0\nwhere a.home_id <> {?HOME_ID?} and a.home_id<>'1'","transaction":"start","itemId":"updatePortalDefault"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"update xip_portal_home \n  set HOME_NAME = {?HOME_NAME?},\n      HOME_DESC = {?HOME_DESC?},\n      IS_DEFAULT =1\n  where HOME_ID ={?HOME_ID?}","itemId":"updatePortalInfo"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"delete from xip_portal_language where PORTAL_ID = {?HOME_ID?} and PORTAL_TYPE = 'HOME' and LANG_CODE = '{#sys.useLang#}'","itemId":"deletePortalInfoLang"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_portal_language(\n    PORTAL_ID,  \n    LANG_CODE,\n    LANG_VAL,\n    PORTAL_TYPE,\n    LANG_DESC\n   )\nvalues(\n   {?HOME_ID?},\n   '{#sys.useLang#}',\n   {?HOME_NAME?},\n   'HOME',\n   {?HOME_DESC?}\n)","itemId":"insertPortalInfoLang"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"update xip_portal_component\n  set COMPONENT_WIDTH ={?COMPONENT_WIDTH?}\n  where COMPONENT_ID ={?COMPONENT_ID?}\n","arrayName":"componentArray","itemId":"updateComponent"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}