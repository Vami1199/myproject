{"inframe":false,"title":"自定义主页信息添加","hidden":true,"roles":{"default":1},"children":[{"configs":{"initScript":"var uuid = java.util.UUID.randomUUID().toString();\nvar result = request.getParameter(\"NEW_COMP\");\nvar tmp = Wb.decode(result);\nfor(var i=0;i<tmp.length;i++){\n  tmp[i].COMPONENT_ID = java.util.UUID.randomUUID().toString();\n  tmp[i].VIEW_ID = uuid;\n}\nvar r=Wb.encode(tmp);\nrequest.setAttribute('batchArray',r);\nrequest.setAttribute('HOME_ID',uuid);\napp.send({viewId:uuid});","loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/pub/navigator/portalNavigator/data/portal\");\n","itemId":"module"},"children":[{"configs":{"errorText":"{#xip_pub_navigator_portal_data_comp_name#}【{#HOME_NAME#}】 {#xip_pub_navigator_portal_data_is_exist#}","sql":"select 1 from xip_portal_home t WHERE HOME_NAME ={?HOME_NAME?} and home_owner ={?XIP.userId?}","itemId":"checkExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"errorText":"{#xip_pub_navigator_portal_data_comp_name#}【{#HOME_NAME#}】 {#xip_pub_navigator_portal_data_is_exist#}","sql":"select 1 from xip_portal_language t WHERE LANG_VAL = {?HOME_NAME?} and PORTAL_TYPE = 'HOME' and LANG_CODE = '{#sys.useLang#}'","itemId":"checkExistLang"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_portal_home(\n    HOME_ID,  \n    HOME_NAME,\n    HOME_NUM,\n    HOME_DESC,\n    HOME_OWNER,\n    HOME_TYPE,\n    IS_DEFAULT,\n    HOME_COLUMN\n   )\nvalues(\n   {?HOME_ID?},\n   {?HOME_NAME?},\n   (select count(1)+1 from xip_portal_home a),\n   {?HOME_DESC?},\n   {?XIP.userId?},\n   'U',\n   {?IS_DEFAULT?},\n   {?HOME_COLUMN?}\n)","transaction":"start","itemId":"insertPortalInfo"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_portal_language(\n    PORTAL_ID,  \n    LANG_CODE,\n    LANG_VAL,\n    PORTAL_TYPE,\n    LANG_DESC\n   )\nvalues(\n   {?HOME_ID?},\n   '{#sys.useLang#}',\n   {?HOME_NAME?},\n   'HOME',\n   {?HOME_DESC?}\n)","itemId":"insertPortalInfoLang"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_portal_component(\n    COMPONENT_ID,  \n    COMPONENT_NAME,\n    HOME_ID,\n    COMPONENT_WIDTH,\n    COMPONENT_DESC\n   )\nvalues(\n   {?COMPONENT_ID?},\n   {?COMPONENT_NAME?},\n   {?VIEW_ID?},\n   {?COMPONENT_WIDTH?},\n   {?COMPONENT_DESC?}\n)","arrayName":"batchArray","itemId":"insertComponent"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_portal_language(\n    PORTAL_ID,  \n    LANG_CODE,\n    LANG_VAL,\n    PORTAL_TYPE,\n    LANG_DESC\n   )\nvalues(\n   {?COMPONENT_ID?},\n   '{#sys.useLang#}',\n   {?COMPONENT_NAME?},\n   'COMP',\n   {?COMPONENT_DESC?}\n)","arrayName":"batchArray","itemId":"insertComponentLang"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}