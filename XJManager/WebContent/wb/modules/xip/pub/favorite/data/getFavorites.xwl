{"inframe":false,"title":"获取收藏","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var contextPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",contextPath);\n\nvar authModel = request.getSession().getAttribute(\"XzSessionVars\").get('AUTH_MODAL');\nrequest.setAttribute(\"authModel\",authModel);\n\n\nvar lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\nrequest.setAttribute(\"language\",lang);","itemId":"module"},"children":[{"configs":{"sql":"SELECT S.USER_SHORTCUTS_ID,\n       S.USER_ID,\n       S.FUN_TREE_ID       AS FUN_ID,\n       M.MENUNAME,\n       M.URL,\n       M.FUNID,\n       M.APPID,\n       M.APPCODE,\n       M.FUNCODE,\n       M.WEB_HOST,\n       M.IN_XIP,\n       M.LARGE_ICON,\n       M.SHOW_STYLE,\n       {?contextPath?} CTX\n  FROM XIP_PUB_USER_SHORTCUTS S,\n       (SELECT T.UP_ID,\n               T.APP_ID        APPID,\n               APP.APP_CODE    APPCODE,\n               T.FUN_TREE_ID   FUNID,\n               T.FUN_TREE_CODE FUNCODE,\n               T.FUN_TREE_ID   MEUNID,\n               T.FUN_TREE_NAME MENUNAME,\n               T.URL,\n               APP.WEB_HOST,\n               APP.IN_XIP,\n               T.LARGE_ICON,\n               T.SHOW_STYLE\n          FROM (select t1.UP_ID,\n                       t1.APP_ID,\n                       t1.FUN_TREE_ID,\n                       t1.FUN_TREE_CODE,\n                       t1.URL,\n                       t1.LARGE_ICON,\n                       t1.SHOW_STYLE,\n                       t1.NODE_TYPE,\n                       t1.ENABLE_FLAG,\n                  case when t2.fun_lang_val is null or t2.fun_lang_val='' then t1.fun_tree_name else t2.fun_lang_val end FUN_TREE_NAME\n                from xip_pub_fun_tree t1 left join xip_pub_fun_language t2 on t1.fun_tree_code=t2.fun_code and t2.fun_lang='{#language#}' ) T\n          LEFT JOIN XIP_PUB_APPS APP\n            ON T.APP_ID = APP.APP_ID\n           AND T.NODE_TYPE = 'F'\n           AND T.ENABLE_FLAG = 'Y'\n         WHERE T.FUN_TREE_ID IN\n               (SELECT UFM.FUN_ID\n                  FROM (SELECT FUN_TREE_ID FUN_ID\n                          FROM XIP_PUB_USER_FUNS UF\n                         WHERE UF.TYPE = 'U'\n                           AND UF.TARGET_ID = {?XIP.userId?}\n                        UNION\n                        SELECT FUN_TREE_ID FUN_ID\n                          FROM XIP_PUB_USER_FUNS UF\n                         WHERE UF.TYPE = 'P'\n                           AND UF.TARGET_ID IN\n                               (SELECT POST_ID\n                                  FROM XIP_PUB_EMP_ASG\n                                 WHERE EMP_ID =\n                                       (SELECT EMP_ID\n                                          FROM XIP_PUB_USERS\n                                         WHERE USER_ID = {?XIP.userId?}))\n                        UNION\n                        SELECT FUN_TREE_ID FUN_ID\n                          FROM XIP_PUB_USER_FUNS UF\n                         WHERE UF.TYPE = 'D'\n                           AND UF.TARGET_ID IN\n                               (SELECT DEPT_ID\n                                  FROM XIP_PUB_EMP_ASG\n                                 WHERE EMP_ID =\n                                       (SELECT EMP_ID\n                                          FROM XIP_PUB_USERS\n                                         WHERE USER_ID = {?XIP.userId?}))) UFM\n                 WHERE {?authModel?} = 'USER'\n                \n                UNION\n                \n                SELECT FUN_TREE_ID FUN_ID\n                  FROM xip_pub_mnu_tree mt\n                 WHERE (mt.MNU_GROUP_ID =\n                          (SELECT r.MNU_GROUP_ID\n                             FROM xip_pub_role r\n                            WHERE r.ROLE_ID = {?XIP.roleId?}))\n                   AND {?authModel?} = 'ROLE')) M\n WHERE S.USER_ID = {?XIP.userId?}\n   AND S.FUN_TREE_ID = M.FUNID\n","itemId":"dataprovider"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}