{"inframe":false,"title":"工作流待办","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var userId = request.getSession().getAttribute(\"XzSessionVars\").get('userId');\nvar ctxPath = request.getContextPath() ;\n\nrequest.setAttribute(\"userId\",userId);\nrequest.setAttribute(\"contextPath\",ctxPath);","loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/pub/wftask/wfTaskList\");","head":"<script>\n  var xz_ExtWind_soft =null;\n<\/script>","itemId":"module"},"children":[{"configs":{"autoLoad":"true","itemId":"countStore","url":"m?xwl=xip/pub/wftask/data/getNoticesCount"},"events":{"load":"app.messagePanel.setTitle('{#notice#}'+ '<font color=\"red\"> '+ store.getAt('0').get('NCOUNT')+'<\/font>');\n\n","beforeload":"\n\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"layout":"fit","border":"false","itemId":"viewport1"},"events":{"afterrender":"Wb.addLink([\"workflow/wbwf/wbwf.js\",\"workflow/workitem/extBatchTaskHandler.js\",\"workflow/util/workflowW7.js\"]);"},"children":[{"configs":{"activeTab":"taskPanel","border":"false","itemId":"taskTabPanel"},"events":{"tabchange":"var tab = tab.getActiveTab();\n\nif(tab.itemId === 'messagePanel'){\n  app.messageGrid.getStore().load();\n}else if(tab.itemId === 'hisTaskPanel'){\n  app.historyGrid.getStore().load();\n}else if(tab.itemId === 'archTaskPanel'){\n  app.archTaskGrid.getStore().load();\n}\n  \n"},"children":[{"configs":{"title":"{#backlog#}","layout":"fit","border":"false","itemId":"taskPanel"},"children":[{"configs":{"selType":"rowmodel","border":"false","itemId":"taskGrid","viewConfig":"{\n enableTextSelection:true\n}"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","hidden":"true","width":"220","labelAlign":"right","itemId":"entryName","fieldLabel":"{#entityName#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.taskQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","hidden":"true","width":"220","labelAlign":"right","itemId":"actName","fieldLabel":"{#nodeName#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.taskQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"40","width":"200","labelAlign":"right","itemId":"taskTitle","fieldLabel":"{#title#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.taskQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item4"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#query#}","itemId":"taskQueryBtn","iconCls":"seek_icon"},"events":{"click":"app.taskGrid.getStore().load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item5"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#batchApproval#}","hidden":"true","itemId":"approveBtn","iconCls":"ok_icon","tooltip":"所选待办信息须为同一流程、同一流程版本、相同节点"},"events":{"click":"var rows = app.taskGrid.getSelectionModel().getSelection();\nif(rows.length===0){\n  Wb.info('请先选择待办信息！');\n}else{\n  var params = '';\n  for(var i=0; i<rows.length; i++){\n    params = params + rows[i].data.TASKID + ',';\n  }\n  params = params.substring(0,params.length-1);\n  // 执行批量审批处理\n  WBWF.openBatchTaskPage('{#contextPath#}',params) ;\n  \n}\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","align":"center","width":"50","xtype":"rownumberer","itemId":"taskNum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#title#}","dataIndex":"TASKTITLE","itemId":"TASKTITLE","renderer":"var taskId = record.get('TASKID');\nvar insCode = record.get('INSTANCECODE');\nvar title = record.get('TASKTITLE');\nvar bizId = record.get('BUSINESSID');\nvar taskState = record.get('TASKSTATE');\nvar fromUserName = record.get('FROMUSERNAME') ;\n\nvar contextPath = '{#contextPath#}';\n\nvar newTitle = \"<a href=\\\"javascript:handlerTaskPage('\"+contextPath+\"','\"+taskId+\"','\"+taskState+\"');\\\" >\" + title + \"<\/a>\";\nmetaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:10px;';   \nreturn newTitle;","flex":"11"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#beginDate#}","align":"center","dataIndex":"BEGINDATE","format":"Y-m-d H:i:s","itemId":"BEGINDATE","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#Initiator#}","align":"center","dataIndex":"FROMUSERNAME","itemId":"FROMUSERNAME","flex":"2"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#nodeName#}","width":"150","dataIndex":"ACTNAME","itemId":"ACTNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#owner#}","dataIndex":"ASSIGNUSERNAME","itemId":"ASSIGNUSERNAME","flex":"3"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/pub/wftask/data/getTaskList"},"events":{"load":"app.taskPanel.setTitle('{#backlog#}'+ '<font color=\"red\"> '+ records.length+'<\/font>');\n","beforeload":"if(!Ext.isEmpty(app.entryName.getValue())){\n  store.getProxy().extraParams.bizName = app.entryName.getValue();\n}else{\n   store.getProxy().extraParams.bizName = '';\n}\nif(!Ext.isEmpty(app.actName.getValue())){\n  store.getProxy().extraParams.activityName = app.actName.getValue();\n}else{\n   store.getProxy().extraParams.activityName = '';\n}\nif(!Ext.isEmpty(app.taskTitle.getValue())){\n  store.getProxy().extraParams.title = app.taskTitle.getValue();\n}else{\n  store.getProxy().extraParams.title = '';\n}\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#notice#}","layout":"fit","itemId":"messagePanel"},"children":[{"configs":{"selType":"checkboxmodel","border":"false","itemId":"messageGrid"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"80","width":"200","labelAlign":"right","itemId":"messageTitle","fieldLabel":"{#noticeTitle#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.messageQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#query#}","itemId":"messageQueryBtn","iconCls":"seek_icon"},"events":{"click":"app.messageGrid.getStore().load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"->","itemId":"item5"},"children":[],"expanded":false,"type":"item"},{"configs":{"itemId":"isClosed","boxLabel":"{#historyNotic#}"},"events":{"change":"app.messageQueryBtn.fireEvent('click') ;\n"},"children":[],"expanded":false,"type":"check"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","width":"50","xtype":"rownumberer","itemId":"msgNum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#title#}","dataIndex":"MSG_TITLE","itemId":"MSG_TITLE","renderer":"var id = record.get('MSG_ID');\nvar title = record.get('MSG_TITLE');\nvar newTitle = \"<a href=\\\"javascript:openNotice('\"+id+\"');\\\" >\" + title + \"<\/a>\";\nmetaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:20px;';   \nreturn newTitle ;","flex":"8"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#createDate#}","align":"center","dataIndex":"CREATION_DATE","itemId":"CREATION_DATE","flex":"2"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xip/pub/wftask/data/getNotices"},"events":{"load":"app.messagePanel.setTitle('{#notice#}'+ '<font color=\"red\"> '+ records.length+'<\/font>');\n\n","beforeload":"if(!Ext.isEmpty(app.messageTitle.getValue())){\n  store.getProxy().extraParams.txtMsgTitle = app.messageTitle.getValue();\n}else{\n  store.getProxy().extraParams.txtMsgTitle = '';\n}\nif(app.isClosed.checked){\n  store.getProxy().extraParams.status = 'closed';\n}else{\n  store.getProxy().extraParams.status = 'open';\n}\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"},{"configs":{"title":"{#alreadyDone#}","layout":"fit","border":"false","itemId":"hisTaskPanel"},"children":[{"configs":{"selType":"checkboxmodel","border":"false","itemId":"historyGrid"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"120","width":"240","labelAlign":"right","itemId":"historyEntity","fieldLabel":"{#businessEntity#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.historyQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"40","width":"200","labelAlign":"right","itemId":"historyTitle","fieldLabel":"{#title#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.historyQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"40","width":"170","labelAlign":"right","format":"Y-m-d","itemId":"historyStartDate","fieldLabel":"{#date#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.historyQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"date"},{"configs":{"text":"-","itemId":"label1"},"children":[],"expanded":false,"type":"label"},{"configs":{"width":"120","labelAlign":"right","format":"Y-m-d","itemId":"historyEndDate"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.historyQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"date"},{"configs":{"text":"-","itemId":"item6"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#query#}","itemId":"historyQueryBtn","iconCls":"seek_icon"},"events":{"click":"app.historyGrid.getStore().load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item5"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","width":"50","xtype":"rownumberer","itemId":"historyNum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#title#}","dataIndex":"TASKTITLE1","itemId":"TASK_TITLE","renderer":"var taskId = record.get('TASKID1');\nvar insCode = record.get('INSTANCECODE1');\nvar title = record.get('TASKTITLE1');\nvar bizId = record.get('BUSINESSID1');\nvar taskState = record.get('TASKSTATE1');\nvar fromUserName = record.get('FROMUSERNAME1') ;\nvar contextPath = '{#contextPath#}';\n\nvar newTitle = \"<a href=\\\"javascript:handlerTaskPage('\"+contextPath+\"','\"+taskId+\"','\"+taskState+\"');\\\" >\" + title + \"<\/a>\";\nmetaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:10px;';   \nreturn newTitle;","flex":"10"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#endDate#}","align":"center","dataIndex":"ENDDATE1","format":"Y-m-d H:i:s","itemId":"END_DATE","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#Initiator#}","align":"center","dataIndex":"FROMUSERNAME1","itemId":"FROMUSERNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#businessEntity#}","dataIndex":"ENTITYNAME1","itemId":"ENTITYNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#nodeName#}","dataIndex":"ACTNAME1","itemId":"ACTNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#owner#}","dataIndex":"ASSIGNUSERNAME1","itemId":"ASSIGNUSERNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#taskStatus#}","dataIndex":"TASKSTATE1","itemId":"TASKSTATE","renderer":"return '<font color=\\\"black\">关闭<\/font>' ;","flex":"2"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xip/pub/wftask/data/getClosedTask"},"events":{"beforeload":"if(!Ext.isEmpty(app.historyEntity.getValue())){\n  store.getProxy().extraParams.hisTextEntityName = app.historyEntity.getValue();\n}else{\n   store.getProxy().extraParams.hisTextEntityName = '';\n}\nif(!Ext.isEmpty(app.historyTitle.getValue())){\n  store.getProxy().extraParams.hisTextTaskTitle = app.historyTitle.getValue();\n}else{\n  store.getProxy().extraParams.hisTextTaskTitle = '';\n}\n\nif(!Ext.isEmpty(app.historyStartDate.getValue())){\n  store.getProxy().extraParams.hisBeginDate = app.historyStartDate.getValue();\n}else{\n  store.getProxy().extraParams.hisBeginDate = '';\n}\nif(!Ext.isEmpty(app.historyEndDate.getValue())){\n  store.getProxy().extraParams.hisEndDate = app.historyEndDate.getValue();\n}else{\n  store.getProxy().extraParams.hisEndDate = '';\n}\n\n"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#file#}","layout":"fit","border":"false","itemId":"archTaskPanel"},"children":[{"configs":{"selType":"checkboxmodel","border":"false","itemId":"archTaskGrid"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"120","width":"240","labelAlign":"right","itemId":"archEntity","fieldLabel":"{#businessEntity#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.archQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"40","width":"200","labelAlign":"right","itemId":"archTitle","fieldLabel":"{#title#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.archQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"40","width":"170","labelAlign":"right","format":"Y-m-d","itemId":"archStartDate","fieldLabel":"{#date#}"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.archQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"date"},{"configs":{"text":"-","itemId":"label1"},"children":[],"expanded":false,"type":"label"},{"configs":{"width":"120","labelAlign":"right","format":"Y-m-d","itemId":"archEndDate"},"events":{"specialkey":"if(e.getKey() === 13)\n  app.archQueryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"date"},{"configs":{"text":"-","itemId":"item6"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#query#}","itemId":"archQueryBtn","iconCls":"seek_icon"},"events":{"click":"app.archTaskGrid.getStore().load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item5"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","width":"50","xtype":"rownumberer","itemId":"archNum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#title#}","dataIndex":"TASKTITLE1","itemId":"TASK_TITLE","renderer":"var taskId = record.get('TASKID1');\nvar insCode = record.get('INSTANCECODE1');\nvar title = record.get('TASKTITLE1');\nvar bizId = record.get('BUSINESSID1');\nvar taskState = record.get('TASKSTATE1');\nvar fromUserName = record.get('FROMUSERNAME1') ;\nvar contextPath = '{#contextPath#}';\n\nvar newTitle = \"<a href=\\\"javascript:handlerTaskPage('\"+contextPath+\"','\"+taskId+\"','\"+taskState+\"');\\\" >\" + title + \"<\/a>\";\nmetaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:10px;';   \nreturn newTitle;","flex":"10"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#endDate#}","align":"center","dataIndex":"ENDDATE1","format":"Y-m-d H:i:s","itemId":"END_DATE","flex":"4"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#Initiator#}","align":"center","dataIndex":"FROMUSERNAME1","itemId":"FROMUSERNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#businessEntity#}","dataIndex":"ENTITYNAME1","itemId":"ENTITYNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#nodeName#}","dataIndex":"ACTNAME1","itemId":"ACTNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#owner#}","dataIndex":"ASSIGNUSERNAME1","itemId":"ASSIGNUSERNAME","flex":"3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#taskStatus#}","dataIndex":"TASKSTATE1","itemId":"TASKSTATE","renderer":"return '<font color=\\\"black\">关闭<\/font>' ;","flex":"2"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xip/pub/wftask/data/getArchTaskList"},"events":{"beforeload":"if(!Ext.isEmpty(app.archEntity.getValue())){\n  store.getProxy().extraParams.archEntityName = app.archEntity.getValue();\n}else{\n   store.getProxy().extraParams.archEntityName = '';\n}\nif(!Ext.isEmpty(app.archTitle.getValue())){\n  store.getProxy().extraParams.archTextTaskTitle = app.archTitle.getValue();\n}else{\n   store.getProxy().extraParams.archTextTaskTitle = '';\n}\nif(!Ext.isEmpty(app.archStartDate.getValue())){\n  store.getProxy().extraParams.archBeginDate = app.archStartDate.getValue();\n}else{\n   store.getProxy().extraParams.archBeginDate = '';\n}\nif(!Ext.isEmpty(app.archEndDate.getValue())){\n  store.getProxy().extraParams.archEndDate = app.archEndDate.getValue();\n}else{\n   store.getProxy().extraParams.archEndDate = '';\n}\n\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"tab"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}