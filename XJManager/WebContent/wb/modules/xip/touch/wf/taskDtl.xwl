{"inframe":true,"title":"代办详情","hidden":false,"roles":{"default":1},"children":[{"configs":{"itemId":"xipTaskDtl"},"events":{"initialize":"Wb.apply(app, {\n  taskNav:null,\n  taskRecord:null,\n  ttComment:null,\n  grid:null,\n  init:function(srcTaskNav,srcTaskRecord){\n    taskNav = srcTaskNav;\n    taskRecord = srcTaskRecord;\n  }\n});"},"children":[{"configs":{"title":"待办审批","layout":"vbox","scrollable":"true","itemId":"taskDtl","createInstance":"false"},"events":{"activate":"var fs = container.down('#taskFS');\nfs.down('#fromUser').setValue(taskRecord.FROMUSERNAME);\nfs.down('#taskTitle').setValue(taskRecord.TASKTITLE);\nvar ret = taskRecord.ATTRIBUTE1;\nvar feedBack = fs.down('#feedBack');\nif(ret!==null&&ret!==''&&ret!==undefined){\n   feedBack.setValue(taskRecord.ATTRIBUTE1);\n   feedBack.show();\n}else{\n   feedBack.hide();\n}\nvar buttons= container.down('#tc_buttons');\nttComment =fs.down('#taskComment');\nXipWf.createButtonsByTaskId(taskNav,buttons ,taskRecord.TASKID,ttComment);"},"children":[{"configs":{"layout":"vbox","itemId":"taskFS"},"children":[{"configs":{"labelWidth":"90","readOnly":"true","label":"发起人","itemId":"fromUser"},"children":[],"expanded":false,"type":"ttext"},{"configs":{"labelWidth":"90","readOnly":"true","xtype":"textareafield","label":"标题","itemId":"taskTitle"},"children":[],"expanded":false,"type":"ttext"},{"configs":{"labelWidth":"90","readOnly":"true","xtype":"textareafield","label":"征询反馈","itemId":"feedBack"},"children":[],"expanded":false,"type":"ttext"},{"configs":{"layout":"fit","itemId":"taskCom"},"children":[{"configs":{"labelWidth":"90","xtype":"textareafield","label":"审批意见","clearIcon":"false","itemId":"taskComment"},"children":[],"expanded":true,"type":"ttext"},{"configs":{"ui":"light","docked":"right","width":"50","itemId":"tbComment"},"children":[{"configs":{"ui":"plain","width":"50","glyph":"f002","itemId":"btnSelectComment"},"events":{"tap":"taskNav.push(app._fastSuggest);"},"children":[],"expanded":false,"type":"tbutton"},{"configs":{"ui":"plain","width":"50","glyph":"f055","itemId":"btnSaveComment"},"events":{"tap":"var comment = ttComment.getValue();\nif(comment===null||comment===undefined||comment===''){\n  Wb.info('无法将空保存为常用意见！');\n}else{\n    Wb.request({\n    url:'m?xwl=xip/pub/wftask/data/addFastSuggest',\n    params:{'userComment':comment},\n    success:function(){\n      Wb.info('常用信息保存成功！');\n    }\n  });\n}"},"children":[],"expanded":false,"type":"tbutton"}],"expanded":true,"type":"ttoolbar"}],"expanded":true,"type":"tcontainer"},{"configs":{"ui":"light","docked":"bottom","layout":"vbox","itemId":"tc_buttons"},"children":[],"expanded":false,"type":"ttoolbar"}],"expanded":true,"type":"tfieldset"}],"expanded":true,"type":"tcontainer"},{"configs":{"title":"选择快速意见","layout":"fit","itemId":"fastSuggest","createInstance":"false"},"events":{"activate":"grid = container.down('#suggestGrid');"},"children":[{"configs":{"docked":"bottom","itemId":"tbSuggest"},"children":[{"configs":{"ui":"plain","text":"确定","glyph":"f00c","itemId":"selectBtn"},"events":{"tap":"var selection = grid.getSelection();\nif(selection.length===0){\n  Wb.info('请先选择一条快速意见！');\n}else{\n  ttComment.setValue(selection[0].data.NAME);\n  taskNav.pop();\n}"},"children":[],"expanded":false,"type":"tbutton"},{"configs":{"ui":"plain","text":"删除","glyph":"f00d","itemId":"delBtn"},"events":{"tap":"var selection = grid.getSelection();\nif (selection.length === 0) {\n  Wb.info('请选择一条要删除的快速意见！');\n} else {\n  Wb.confirm('确定要删除快速意见【'+selection[0].data.NAME+'】?', function() {\n    Wb.request({\n      url: 'm?xwl=xip/pub/wftask/data/deleteSuggest',\n      params: {\n        'USER_COMMENT': selection[0].data.NAME\n      },\n      success: function() {\n        Wb.info('删除快速意见【'+selection[0].data.NAME+'】成功！');\n        grid.store.load();\n      },\n      failure: function() {\n        Wb.warn('删除快速意见【'+selection[0].data.NAME+'】失败！');\n      }\n    });\n  });\n\n}"},"children":[],"expanded":false,"type":"tbutton"}],"expanded":true,"type":"ttoolbar"},{"configs":{"cls":"x-hidebar","selectedCls":"x-item-selected","itemId":"suggestGrid"},"events":{"itemtouchmove":"Wb.confirm('确定要删除快速意见【'+record.data.NAME+'】?', function() {\n    Wb.request({\n      url: 'm?xwl=xip/pub/wftask/data/deleteSuggest',\n      params: {\n        'USER_COMMENT': record.data.NAME\n      },\n      success: function() {\n        Wb.info('删除快速意见【'+record.data.NAME+'】成功！');\n        grid.store.load();\n      },\n      failure: function() {\n        Wb.warn('删除快速意见【'+record.data.NAME+'】失败！');\n      }\n    });\n  });","itemdoubletap":"ttComment.setValue(record.data.NAME);\ntaskNav.pop();"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/pub/wftask/data/getUserSuggest"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"快速意见","width":"250","dataIndex":"NAME","itemId":"suggest"},"children":[],"expanded":false,"type":"tcolumn"}],"expanded":false,"type":"array"}],"expanded":true,"type":"tgrid"}],"expanded":true,"type":"tcontainer"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}