{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/auth/func/func\");","loginRequired":"false","serverScript":"//app.send({funcTreeId:'{#funcTreeId#}', funcTreeCode:'{#funcTreeCode#}', funcTreeName:'{#funcTreeName#}', upId:'{#upId#}', nodeType:'{#nodeType#}', addType:'{#addType#}', menuOpType:'{#menuOpType#}'});\n\nvar lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\n\nrequest.setAttribute(\"language\",lang);","itemId":"module"},"children":[{"configs":{"errorText":"{#xip_auth_func_code#} \"{#funcTreeCode#}\" {#xip_auth_func_exist#}","sql":"select 1 from xip_pub_fun_tree t where t.fun_tree_code = {?funcTreeCode?}","itemId":"checkCodeExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"errorText":"{#xip_auth_func_name#}\"{#funcTreeName#}\" {#xip_auth_func_exist#}","sql":"select 1 from xip_pub_fun_tree t where t.fun_tree_name = {?funcTreeName?} and t.node_type = {?nodeType?}","itemId":"checkNameExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_pub_fun_tree\n  (FUN_TREE_ID,\n   FUN_TREE_CODE,\n   FUN_TREE_NAME,\n   UP_ID,\n   NODE_TYPE,\n   DESCRIPTION,\n   URL,\n   MOB_URL,\n   SMALL_ICON,\n   LARGE_ICON,\n   APP_ID,\n   ENABLE_FLAG,\n   NODE_ORDER,\n   SHOW_STYLE,\n   CREATION_DATE,\n   CREATED_BY)\nvalues\n  ('{#funcTreeId#}',\n   '{#funcTreeCode#}',\n   '{#funcTreeName#}',\n   '{#upId#}',\n   '{#nodeType#}',\n   '{#desc#}',\n   '{#url#}',\n   '{#mobUrl#}',\n   '{#smallIcon#}',\n   '{#largeIcon#}',\n   '{#appId#}',\n   '{#enableFlag#}',\n   (select case\n         when (select count(*)\n                 from xip_pub_fun_tree t1\n                where t1.up_id = '{#upId#}') = 0 then\n          0\n         else\n          (select max(t2.node_order) + 1\n             from xip_pub_fun_tree t2\n            where t2.up_id = '{#upId#}')\n       end as \"dex\"\n  from dual),\n   '{#showStyle#}',\n   {?timestamp.sys.date?},\n   {?XIP.userId?}\n  )","itemId":"query"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_pub_fun_language(FUN_CODE, FUN_LANG, FUN_LANG_VAL)\n values({?funcTreeCode?}, {?language?}, {?funcTreeName?})","itemId":"insertFunLang"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}