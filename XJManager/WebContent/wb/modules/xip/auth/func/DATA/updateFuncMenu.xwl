{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/auth/func/func\");","loginRequired":"false","serverScript":"app.send({funcTreeId:'{#funcTreeId#}',nodeType:'{#nodeType#}',funcTreeCode:'{#funcTreeCode#}',funcTreeName:'{#funcTreeName#}'});\n\nvar lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\n\nrequest.setAttribute(\"language\",lang);","itemId":"module"},"children":[{"configs":{"errorText":"{#xip_auth_func_code#} \"{#funcTreeCode#}\" {#xip_auth_func_exist#}","sql":"select 1 from xip_pub_fun_tree t where t.FUN_TREE_CODE = {?funcTreeCode?} and t.FUN_TREE_ID <> {?funcTreeId?}","itemId":"checkCodeExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"errorText":"{#xip_auth_func_name#}\"{#funcTreeName#}\" {#xip_auth_func_exist#}","sql":"select 1 from xip_pub_fun_tree t where t.FUN_TREE_NAME = {?funcTreeName?} \nand t.node_type = {?nodeType?}\nand t.FUN_TREE_ID <> {?funcTreeId?}","itemId":"checkNameExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"update xip_pub_fun_tree\n   set FUN_TREE_CODE    = '{#funcTreeCode#}',\n       FUN_TREE_NAME    = '{#funcTreeName#}',\n       UP_ID            = '{#upId#}',\n       NODE_TYPE        = '{#nodeType#}',\n       DESCRIPTION      = '{#desc#}',\n       URL              = '{#url#}',\n       APP_ID           = '{#appId#}',\n       MOB_URL          = '{#mobUrl#}',\n       SMALL_ICON       = '{#smallIcon#}',\n       LARGE_ICON       = '{#largeIcon#}',\n       ENABLE_FLAG      = '{#enableFlag#}',\n       SHOW_STYLE       = '{#showStyle#}',\n       LAST_UPDATE_DATE = {?timestamp.sys.date?},\n       LAST_UPDATED_BY  = {?XIP.userId?}\n where FUN_TREE_ID = '{#funcTreeId#}'","transaction":"start","itemId":"updateFunTree"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"update xip_pub_mnu_tree\n   set NAME             = '{#funcTreeName#}',\n       LAST_UPDATE_DATE = {?timestamp.sys.date?},\n       LAST_UPDATED_BY  = {?XIP.userId?}\n where FUN_TREE_ID = '{#funcTreeId#}'\n   and NODE_TYPE = 'F'","itemId":"updateMenuTree"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"delete \n  from xip_pub_fun_language \n where FUN_CODE = {?funcTreeCode?}\n   and FUN_LANG = {?language?}","itemId":"deleteFunLang"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xip_pub_fun_language(FUN_CODE, FUN_LANG, FUN_LANG_VAL)\n values({?funcTreeCode?}, {?language?}, {?funcTreeName?})","itemId":"insertFunLang"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}