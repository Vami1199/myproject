{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"\ncom.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);\n//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/auth/role/menuGroupLang/menuGroupLang\");","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"80","frame":"true","style":"border-width:0px","layout":"fit","itemId":"queryform","border":"false"},"children":[{"configs":{"title":"{#xip_auth_role_menuGroupLang_conditionQuery#}","style":"padding-top:8px","collapsible":"true","layout":"column","itemId":"fieldset"},"children":[{"configs":{"labelWidth":"90","queryMode":"local","displayField":"ROLE_NAME","width":"230","valueField":"ROLE_CODE","labelAlign":"right","itemId":"roleCombo","fieldLabel":"{#xip_auth_role_menuGroupLang_roleName#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/auth/role/menuGroupLang/DATA/getRoles"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"labelWidth":"80","displayField":"VAL_NAME","width":"220","valueField":"VAL_CODE","labelAlign":"right","itemId":"langCombo","fieldLabel":"{#xip_auth_role_menuGroupLang_language#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/auth/func/funcLang/DATA/getLanguage"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"labelWidth":"120","width":"260","labelAlign":"right","itemId":"funCode","fieldLabel":"{#xip_auth_role_menuGroupLang_menuCode#}"},"events":{"specialkey":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_query#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"var lang = app.langCombo.getValue();\nvar roleCode = app.roleCombo.getValue();\nvar funCode = app.funCode.getValue();\n\nvar conditions = '';\n\nvar roleCondition = '';\n\nif(!Ext.isEmpty(lang)){\n  conditions = conditions + \" AND c.VAL_CODE = '\" + lang + \"'\";\n}\n\nif(!Ext.isEmpty(roleCode)){\n  roleCondition = \" AND r.ROLE_CODE = '\" + roleCode + \"'\";\n}\n\nif(!Ext.isEmpty(funCode)){\n  conditions = conditions + \" AND (c.MNU_TREE_CODE LIKE '%\" + funCode + \"%' OR g.FUN_LANG_VAL LIKE '%\" + funCode + \"%' )\";\n}\n\napp.langGrid.store.load({params:{conditions:conditions, roleCondition:roleCondition}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_reset#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.queryform.getForm().reset();\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":true,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","itemId":"langGrid","editable":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#xip_auth_role_menuGroupLang_no#}","xtype":"rownumberer","align":"center","width":"50","titleAlign":"center","itemId":"numCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_languageCode#}","align":"center","width":"120","dataIndex":"VAL_CODE","titleAlign":"center","itemId":"valCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_languageName#}","align":"center","width":"120","dataIndex":"VAL_NAME","titleAlign":"center","itemId":"valNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_roleCode#}","width":"120","dataIndex":"ROLE_CODE","itemId":"roleCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_roleName#}","width":"150","dataIndex":"ROLE_NAME","itemId":"roleNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_menuCode#}","width":"200","dataIndex":"MNU_TREE_CODE","itemId":"funTreeCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_menuCode#}","hidden":"true","dataIndex":"FUN_CODE","itemId":"funCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_language#}","hidden":"true","dataIndex":"FUN_LANG","itemId":"funLangCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_name#}","dataIndex":"FUN_LANG_VAL","itemId":"funLangValCol","flex":"1"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"50","autoLoad":"true","itemId":"store","url":"m?xwl=xip/auth/role/menuGroupLang/DATA/getMenuGroupLang"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_auth_role_menuGroupLang_save#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"var rows = app.langGrid.getStore().getModifiedRecords();\n\nif(rows.length===0){\n  Wb.info('{#xip_auth_role_menuGroupLang_selRecord#}');\n  return;\n}\n\n//新增的记录\nvar insertRecords = [];\n//修改的记录\nvar updateRecords = [];\n\nfor(var i=0; i<rows.length; i++){\n  //判断是新增的记录还是需要修改的记录\n  var funCode = rows[i].get('FUN_CODE');\n  \n  if(Ext.isEmpty(funCode)){\n    insertRecords.push(rows[i].data);\n  }else{\n    updateRecords.push(rows[i].data);\n  }\n}\n\nWb.request({\n  url: 'm?xwl=xip/auth/role/menuGroupLang/DATA/save',\n  params: {insertRecords: Ext.JSON.encode(insertRecords), updateRecords: Ext.JSON.encode(updateRecords)},\n  message: '{#xip_auth_role_menuGroupLang_message#}',\n  success: function(response){\n    Wb.info('{#xip_auth_role_menuGroupLang_success#}');\n    //app.langGrid.getStore().commitChanges();\n    app.langGrid.getStore().reload();\n  },\n  failure: function(response){\n    Wb.info('{#xip_auth_role_menuGroupLang_successFail#}'+response.responseText);\n  }\n});"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}