{"inframe":false,"title":"员工管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var ctxPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",ctxPath);\nvar dbType = com.xzsoft.xip.platform.util.PlatformUtil.getDbType();\nrequest.setAttribute(\"dbType\", dbType);\nvar sysMode = request.getSession().getAttribute(\"XzSessionVars\");\nrequest.setAttribute(\"AUTH_MODAL\",sysMode.get(\"AUTH_MODAL\"));\n//----------------------重系统参数中获取配置的用户初始密码------------------\nvar userPwd = com.xzsoft.xip.platform.util.PlatformUtil.getParamVal(\"DEFAULT_PASSWORD\", \"P\", \"P\");\nrequest.setAttribute(\"userPwd\",userPwd);\ncom.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);","loginRequired":"false","jsLinks":"[\"xip/js/xip-debug.js\"]","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/hr/emp/emp\");","itemId":"module"},"events":{"initialize":"var nametype='';\nvar checktype='0';\n\nfunction getuuid() {\n var s = [];\n var hexDigits = \"0123456789abcdef\";\n for (var i = 0; i < 36; i++) {\n s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n }\n s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n s[8] = s[13] = s[18] = s[23] = \"-\";\n\nvar uuid = s.join(\"\");\n return uuid;\n}"},"children":[{"configs":{"itemId":"stores"},"children":[{"configs":{"autoLoad":"true","itemId":"orgstore","url":"m?xwl=xip/hr/emp/data/selelctOrgs"},"children":[],"expanded":false,"type":"store"},{"configs":{"autoLoad":"false","itemId":"deptstore","url":"m?xwl=xip/hr/emp/data/selelctDepts"},"children":[],"expanded":false,"type":"store"},{"configs":{"autoLoad":"false","itemId":"poststore","url":"m?xwl=xip/hr/emp/data/selelctPosts"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"folder"},{"configs":{"itemId":"Winbtns"},"children":[{"configs":{"text":"{#xip_hr_emp_save#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"var emp_Id=app.EMP_ID.getValue();\nvar _empCode = app.EMP_CODE.getValue();\nif(_empCode === null || _empCode === \"\"){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_qlrygbm#}\") ;//\"提示\",\"请录入员工编码\"\n  return false ;\n}\nvar _birthday= app.BIRTHDAY.getValue();\nif(_birthday > new Date()){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_csrqbndydqr#}\") ;//\"提示\",\"出生日期不能大于当前日期\"\n  return false ;\n}\nvar _empName = app.EMP_NAME.getValue();\nif(_empName === null || _empName === \"\"){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_qlrygxm#}\") ;//\"提示\",\"请录入员工姓名\"\n  return false ;\n}\n\nvar _empMobilePhone = app.PHONE_NO.getValue();\nvar phonePatrn= /^(0|86|17951)?(13[0-9]|15[0123456789]|17[0-9]|18[0-9]|14[57])[0-9]{8}$/;\nif(!Ext.isEmpty(_empMobilePhone)){\n  if(!phonePatrn.test(_empMobilePhone)){\n    Wb.warn('{#xip_hr_emp_sjhgsbhf#}');//'手机号格式不合法!'\n    return;\n  }\n}\n\nvar _empTelephone = app.ATTRIBUTE1.getValue();\nvar telPatrn=/^[+]{0,1}(\\d){1,3}[ ]?([-]?((\\d)|[ ]){1,12})+$/;\nif(!Ext.isEmpty(_empTelephone)){\n  if(!telPatrn.test(_empTelephone)){\n    Wb.warn('{#xip_hr_emp_gddhgsbhf#}');//'固定电话格式不合法!'\n    return;\n  }\n}\n\nvar _empEmail = app.EMAIL.getValue();\nif(_empEmail === null || _empEmail === \"\"){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_qlryxxx#}\") ;//\"提示\",\"请录入邮箱信息\"\n  return false ;\n}\nvar emailPatrn= /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\nif(!Ext.isEmpty(_empEmail)){\n  if(!emailPatrn.test(_empEmail)){\n    Wb.warn('{#xip_hr_emp_yxgsbhf#}');//'邮箱格式不合法!'\n    return;\n  }\n}\n\nvar _empIdNumber = app.ID_NO.getValue();\nvar idNumPatrn = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\nif(!Ext.isEmpty(_empIdNumber)){\n  if(!idNumPatrn.test(_empIdNumber)){\n    Wb.warn('{#xip_hr_emp_sfzgsbhf#}');//'身份证格式不合法!'\n    return;\n  }\n}\n//判断创建用户是否隐藏\nif('edit' != app.opType.getValue()){\n\n  app.panel7.show();\n}else{\n\n  app.panel7.hide();\n}\n\n// 执行保存处理\n// var _sex = '1';\n// if(radio2.checked){\n//   _sex = '2';\n// }\nvar json = {\n  empId:app.EMP_ID.getValue(),\n  empCode:app.EMP_CODE.getValue(),\n  empName:app.EMP_NAME.getValue(),\n  userName:app.userName.getValue(),\n  _sex:app.EMP_SEX.getValue(),\n  empIdNumber:app.ID_NO.getValue(),\n  empMobilePhone:app.PHONE_NO.getValue(),\n  empAddress:app.ADDRESS.getValue(),\n  empEmail:app.EMAIL.getValue(),\n  empTelephone:app.ATTRIBUTE1.getValue(),\n  birthday:app.BIRTHDAY.getRawValue(),\n  empStatus:app.ATTRIBUTE2.getValue()\n};\n\nvar empsbean = {\n  empId:app.EMP_ID.getValue(),\n  empCode:app.EMP_CODE.getValue(),\n  empName:app.EMP_NAME.getValue(),\n  userName:app.userName.getValue(),\n  empSex:app.EMP_SEX.getValue(),\n  idNo:app.ID_NO.getValue(),\n  phoneNo:app.PHONE_NO.getValue(),\n  address:app.ADDRESS.getValue(),\n  email:app.EMAIL.getValue(),\n  attribute1:app.ATTRIBUTE1.getValue(),\n  birthday:app.BIRTHDAY.getRawValue(),\n  attribute2:app.ATTRIBUTE2.getValue()\n};\n\n\nif('edit' != app.opType.getValue()){\n\n  // app.panel7.hide();\n\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.ORG_NAME === null||rec.data.ORG_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzzz#}');//'请选择组织！'\n      return false;\n    }\n  }\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.DEPT_NAME === null||rec.data.DEPT_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzbm#}');//'请选择部门！'\n      return false;\n    }\n  }\n\n\n\n  Ext.Ajax.request({\n    url: '{#contextPath#}'+'/hrAction.do?method=saveEmp',\n    method: 'POST',\n    sync: false,\n    timeout: 300000,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    jsonData: empsbean,\n    success: function(res, opts) {\n\n      var rep = Ext.JSON.decode(res.responseText);\n      var flag = rep.flag;\n      var msg = rep.msg;\n\n      if(flag==\"0\"){\n\n\n        //保存默认用户\n        if('edit' != app.opType.getValue()){\n\n          if(checktype=='1'){\n            var _password = Xip.getMD5('11111'); // md5加密\n            if('{#userPwd#}'!==null&&'{#userPwd#}'!==\"\"){\n              _password = Xip.getMD5('{#userPwd#}');\n            }\n            var _primaryKey = getuuid();\n            var jsonuser = {\n              empId:app.EMP_ID.getValue(),\n              userName:app.userName.getValue(),\n              password:_password,\n              endDate:app.endDate.getRawValue(),\n              userType:'U',\n\n              userId:_primaryKey\n            } ;  \n\n            Ext.Ajax.request({\n              url: '{#contextPath#}'+'/hrAction.do?method=insertUser',\n              method: 'POST',\n              sync: false,\n              timeout: 300000,\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              jsonData: jsonuser,\n              success: function(res, opts) {\n\n                var rep = Ext.JSON.decode(res.responseText);\n                var flag = rep.flag;\n                var msg = rep.msg;\n\n                if(flag==\"0\"){\n\n                  //为新增用户增加默认权限\n                  Ext.Ajax.request({ \n                    url:'{#contextPath#}'+'/platformAction.do?method=defaultUserRoleFun',\n                    params: { userId:_primaryKey,\n                             AUTH_MODAL:'{#AUTH_MODAL#}'\n                            },\t\t\n                    method: 'POST',\t\t\n                    success: function(response, options) {  \n\n                    },\n                    failure: function(response, options) {\n\n                    }\n                  });\n                }else{\n                  Ext.Msg.alert('{#xip_hr_emp_prompt#}',msg);//'提示'\n                }\n              }\n            });\n\n          }\n        }\n        if(app.gridedit.store.getModifiedRecords().length===0 && app.gridedit.store.getRemovedRecords().length===0){\n          app.opType.setValue(\"edit\");\n          Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n        }else{\n          app.gridedit.plugins[0].completeEdit();\n          app.gridedit.store.sync(\n            {\n              callback :function(){\n                Wb.unmask();\n                //设置编辑状态\n                app.opType.setValue(\"edit\");\n                Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n                app.gridedit.store.commitChanges();\n              }\n            }); \n        }\n        app.panel7.hide();\n        app.empgrid.store.load();  \n\n\n      } else{\n        Ext.Msg.alert('{#xip_hr_emp_prompt#}',msg);//'提示'\n      }\n    }\n\n\n\n  });\n\n\n\n}else{\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.ORG_NAME === null||rec.data.ORG_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzzz#}');//'请选择组织！'\n      return false;\n    }\n  }\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.DEPT_NAME === null||rec.data.DEPT_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzbm#}');//'请选择部门！'\n      return false;\n    }\n  }\n\n\n\n  Ext.Ajax.request({\n    url: '{#contextPath#}'+'/hrAction.do?method=updateEmp',\n    method: 'POST',\n    async : true,\n\tscope : this,\n    timeout: 300000,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    jsonData: empsbean,\n    success: function(res, opts) {\n\n      var rep = Ext.JSON.decode(res.responseText);\n      var flag = rep.flag;\n      var msg = rep.msg;\n\n      if(flag==\"0\"){\n\n        if(app.gridedit.store.getModifiedRecords().length===0 && app.gridedit.store.getRemovedRecords().length===0){\n\n          Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n        }else{\n\n          app.gridedit.plugins[0].completeEdit();\n\n          app.gridedit.store.sync(\n            {\n              callback :function(){\n\n                Wb.unmask();\n\t\t\t\t\t\n                Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n                app.gridedit.store.commitChanges();\n                app.gridedit.store.reload();\n              }\n            });\n        }\n        //禁用员工后禁用用户\n        var type =app.ATTRIBUTE2.getValue();\n        var empid1 =app.EMP_ID.getValue();\n        var d=new Date();\n        if(type=='N'){\n\n          var date=new Date(d.getFullYear(),d.getMonth(),d.getDate()-1);\n          var jsont={\n            endDate: d.getFullYear() + '-' + d.getMonth() + '-' + (d.getDate()-1),\n            empId:empid1\n          };\n\n          Ext.Ajax.request({\n            url: '{#contextPath#}'+'/hrAction.do?method=updateUser',\n            method: 'POST',\n            sync: false,\n            timeout: 300000,\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            jsonData: jsont,\n            success: function(res, opts) {\n            }\n          });\n\n\n        }else{\n          var date1=new Date(d.getFullYear()+20,d.getMonth(),d.getDate());\n          var jsont1={endDate: d.getFullYear() + '-' + d.getMonth() + '-' + (d.getDate()-1),empId:empid1};\n\n\n\n          Ext.Ajax.request({\n            url: '{#contextPath#}'+'/hrAction.do?method=updateUser',\n            method: 'POST',\n            sync: false,\n            timeout: 300000,\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            jsonData: jsont1,\n            success: function(res, opts) {\n            }\n          });\n        }\n        app.empgrid.store.load();\n      }else {\n        Ext.Msg.alert('{#xip_hr_emp_prompt#}',msg);//'提示'\n      }\n\n\n    }\n  });\n\n\n\n}\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_hr_emp_saveAndNext#}","itemId":"savenextWin"},"events":{"click":"\nvar emp_Id=app.EMP_ID.getValue();\nvar _empCode = app.EMP_CODE.getValue();\nif(_empCode === null || _empCode === \"\"){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_qlrygbm#}\") ;//\"提示\",\"请录入员工编码\"\n  return false ;\n}\nvar _birthday= app.BIRTHDAY.getValue();\nif(_birthday > new Date()){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_csrqbndydqr#}\") ;//\"提示\",\"出生日期不能大于当前日期\"\n  return false ;\n}\nvar _empName = app.EMP_NAME.getValue();\nif(_empName === null || _empName === \"\"){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_qlrygxm#}\") ;//\"提示\",\"请录入员工名称\"\n  return false ;\n}\n\nvar _empMobilePhone = app.PHONE_NO.getValue();\nvar phonePatrn= /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;\nif(!Ext.isEmpty(_empMobilePhone)){\n  if(!phonePatrn.test(_empMobilePhone)){\n    Wb.warn('{#xip_hr_emp_sjhgsbhf#}');//'手机号格式不合法!'\n    return;\n  }\n}\n\nvar _empTelephone = app.ATTRIBUTE1.getValue();\nvar telPatrn=/^[+]{0,1}(\\d){1,3}[ ]?([-]?((\\d)|[ ]){1,12})+$/;\nif(!Ext.isEmpty(_empTelephone)){\n  if(!telPatrn.test(_empTelephone)){\n    Wb.warn('{#xip_hr_emp_gddhgsbhf#}');//'固定电话格式不合法!'\n    return;\n  }\n}\n\nvar _empEmail = app.EMAIL.getValue();\nif(_empEmail === null || _empEmail === \"\"){\n  Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_qlryxxx#}\") ;//\"提示\",\"请录入邮箱信息\"\n  return false ;\n}\nvar emailPatrn= /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\nif(!Ext.isEmpty(_empEmail)){\n  if(!emailPatrn.test(_empEmail)){\n    Wb.warn('{#xip_hr_emp_yxgsbhf#}');//'邮箱格式不合法!'\n    return;\n  }\n}\n\nvar _empIdNumber = app.ID_NO.getValue();\nvar idNumPatrn = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\nif(!Ext.isEmpty(_empIdNumber)){\n  if(!idNumPatrn.test(_empIdNumber)){\n    Wb.warn('{#xip_hr_emp_sfzgsbhf#}');//'身份证格式不合法!'\n    return;\n  }\n}\n//判断创建用户是否隐藏\n\napp.panel7.show();\n\n\n// 执行保存处理\n// var _sex = '1';\n// if(radio2.checked){\n//   _sex = '2';\n// }\nvar json = {\n  empId:app.EMP_ID.getValue(),\n  empCode:app.EMP_CODE.getValue(),\n  empName:app.EMP_NAME.getValue(),\n  userName:app.userName.getValue(),\n  _sex:app.EMP_SEX.getValue(),\n  empIdNumber:app.ID_NO.getValue(),\n  empMobilePhone:app.PHONE_NO.getValue(),\n  empAddress:app.ADDRESS.getValue(),\n  empEmail:app.EMAIL.getValue(),\n  empTelephone:app.ATTRIBUTE1.getValue(),\n  birthday:app.BIRTHDAY.getRawValue(),\n  empStatus:app.ATTRIBUTE2.getValue()\n};\n\nvar empsbean = {\n  empId:app.EMP_ID.getValue(),\n  empCode:app.EMP_CODE.getValue(),\n  empName:app.EMP_NAME.getValue(),\n  userName:app.userName.getValue(),\n  empSex:app.EMP_SEX.getValue(),\n  idNo:app.ID_NO.getValue(),\n  phoneNo:app.PHONE_NO.getValue(),\n  address:app.ADDRESS.getValue(),\n  email:app.EMAIL.getValue(),\n  attribute1:app.ATTRIBUTE1.getValue(),\n  birthday:app.BIRTHDAY.getRawValue(),\n  attribute2:app.ATTRIBUTE2.getValue()\n};\n\nif('edit' != app.opType.getValue()){\n  if(emp_Id===null || emp_Id===''){\n\n    var _empId=uuid() ;\n    json.empId=_empId;\n    app.EMP_ID.setValue(_empId); \n\n  }\n  //app.panel7.hide();\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.ORG_NAME === null||rec.data.ORG_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzzz#}');//'请选择组织！'\n      return false;\n    }\n  }\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.DEPT_NAME === null||rec.data.DEPT_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzbm#}');//'请选择部门！'\n      return false;\n    }\n  }\n\n\n  Ext.Ajax.request({\n    url: '{#contextPath#}'+'/hrAction.do?method=saveEmp',\n    method: 'POST',\n    sync: false,\n    timeout: 300000,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    jsonData: empsbean,\n    success: function(res, opts) {\n      var rep = Ext.JSON.decode(res.responseText);\n      var flag = rep.flag;\n      var msg = rep.msg;\n\n      if(flag==\"0\"){\n\n\n        //保存默认用户\n        if('edit' != app.opType.getValue()){\n          if(checktype=='1'){\n            var _password = Xip.getMD5('11111'); // md5加密\n            if('{#userPwd#}'!==null&&'{#userPwd#}'!==\"\"){\n              _password = Xip.getMD5('{#userPwd#}');\n            }\n            var _primaryKey = getuuid();\n            var jsonuser = {\n              empId:app.EMP_ID.getValue(),\n              userName:app.userName.getValue(),\n              password:_password,\n              endDate:app.endDate.getRawValue(),\n              userType:'U',\n              userId:_primaryKey\n              // primaryKey:_primaryKey\n            } ;  \n            Ext.Ajax.request({\n              url: '{#contextPath#}'+'/hrAction.do?method=insertUser',\n              method: 'POST',\n              sync: false,\n              timeout: 300000,\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              jsonData: jsonuser,\n              success: function(res, opts) {\n                //为新增用户增加默认权限\n                Ext.Ajax.request({ \n                  url:'{#contextPath#}'+'/platformAction.do?method=defaultUserRoleFun',\n                  params: { userId:_primaryKey,\n                           AUTH_MODAL:'{#AUTH_MODAL#}'\n                          },\t\t\n                  method: 'POST',\t\t\n                  success: function(response, options) {  \n\n                  },\n                  failure: function(response, options) {\n\n                  }\n                });\n              }\n            });\n\n          }\n        }\n        if(app.gridedit.store.getModifiedRecords().length===0 && app.gridedit.store.getRemovedRecords().length===0){\n          app.opType.setValue(\"edit\");\n          Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n        }else{\n          app.gridedit.plugins[0].completeEdit();\n          app.gridedit.store.sync(\n            {\n              callback :function(){\n                Wb.unmask();\n                //设置编辑状态\n                app.opType.setValue(\"edit\");\n                Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n                app.gridedit.store.commitChanges();\n              }\n            }); \n        }\n        // 刷新主表Grid信息\n        app.empgrid.store.load();  \n        // 清空表单信息\n        app.EMP_CODE.setValue() ;\n        app.EMP_NAME.setValue() ;\n        app.BIRTHDAY.setValue() ;\n        app.ATTRIBUTE2.setValue('Y') ;\n        app.PHONE_NO.setValue() ;\n        app.ATTRIBUTE1.setValue() ;\n        app.ID_NO.setValue() ;\n        app.EMAIL.setValue() ;\n        app.ADDRESS.setValue() ;\n        //清空默认用户表单\n        app.userName.setValue();\n\n        var _empId1 = getuuid() ;\n        app.EMP_ID.setValue(_empId1) ;\n        app.opType.setValue('add');\n        // 加载员工分配信息\n        app.gridedit.store.load({params:{empId:_empId1}}); \n      }else{\n        Ext.Msg.alert('{#xip_hr_emp_prompt#}',msg);//'提示'\n      }\n    }\n  });\n\n\n\n\n}else{\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.ORG_NAME === null||rec.data.ORG_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzzz#}');//'请选择组织！'\n      return false;\n    }\n  }\n  for(var i=0 ; i<app.gridedit.store.getCount();i++){\n    var rec = app.gridedit.store.getAt(i);\n    if(rec.data.DEPT_NAME === null||rec.data.DEPT_NAME===''){\n      Wb.warn('{#xip_hr_emp_qxzbm#}');//'请选择部门！'\n      return false;\n    }\n  }\n\n  Ext.Ajax.request({\n    url: '{#contextPath#}'+'/hrAction.do?method=updateEmp',\n    method: 'POST',\n    sync: false,\n    timeout: 300000,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    jsonData: empsbean,\n    success: function(res, opts) {\n\n\n\n      var rep = Ext.JSON.decode(res.responseText);\n      var flag = rep.flag;\n      var msg = rep.msg;\n      if(flag==\"0\"){\n\n\n        if(app.gridedit.store.getModifiedRecords().length===0 && app.gridedit.store.getRemovedRecords().length===0){\n\n          Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n        }else{\n          app.gridedit.plugins[0].completeEdit();\n\n          app.gridedit.store.sync(\n            {\n              callback :function(){\n\n                Wb.unmask();\n\n                Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_bccg#}');//'提示','保存成功!'\n                app.gridedit.store.commitChanges();\n              }\n            });\n        }\n        //禁用员工后禁用用户\n        var type =app.ATTRIBUTE2.getValue();\n        var empid1 =app.EMP_ID.getValue();\n        var d=new Date();\n        if(type=='N'){\n\n          var date=new Date(d.getFullYear(),d.getMonth(),d.getDate()-1);\n          var jsont={endDate:d.getFullYear() + '-' + d.getMonth() + '-' + (d.getDate()-1),empId:empid1};\n          Ext.Ajax.request({\n            url: '{#contextPath#}'+'/hrAction.do?method=updateUser',\n            method: 'POST',\n            sync: false,\n            timeout: 300000,\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            jsonData: jsont,\n            success: function(res, opts) {\n            }\n          });\n        }else{\n          var date1=new Date(d.getFullYear()+20,d.getMonth(),d.getDate());\n          var jsont1={endDate:d.getFullYear() + '-' + d.getMonth() + '-' + (d.getDate()-1),empId:empid1};\n          Ext.Ajax.request({\n            url: '{#contextPath#}'+'/hrAction.do?method=updateUser',\n            method: 'POST',\n            sync: false,\n            timeout: 300000,\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            jsonData: jsont1,\n            success: function(res, opts) {\n            }\n          });\n        }\n        // 刷新主表Grid信息\n        app.empgrid.store.load();  \n        // 清空表单信息\n        app.EMP_CODE.setValue() ;\n        app.EMP_NAME.setValue() ;\n        app.BIRTHDAY.setValue() ;\n        app.ATTRIBUTE2.setValue('Y') ;\n        app.PHONE_NO.setValue() ;\n        app.ATTRIBUTE1.setValue() ;\n        app.ID_NO.setValue() ;\n        app.EMAIL.setValue() ;\n        app.ADDRESS.setValue() ;\n        //清空默认用户表单\n        app.userName.setValue();\n\n        var _empId1 = getuuid() ;\n        app.EMP_ID.setValue(_empId1) ;\n        app.opType.setValue('add');\n        // 加载员工分配信息\n        app.gridedit.store.load({params:{empId:_empId1}}); \n      }else{\n        Ext.Msg.alert('{#xip_hr_emp_prompt#}',msg);//'提示'\n      }\n    }\n\n  });\n\n\n\n\n\n\n}\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_hr_emp_close#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.win.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"height":"500","width":"760","layout":"border","closeAction":"hide","buttons":"app.Winbtns","buttonAlign":"center","dialog":"false","itemId":"win","modal":"true"},"children":[{"configs":{"region":"north","frame":"true","style":"border-width:0px","border":"false","itemId":"addForm"},"children":[{"configs":{"hidden":"true","itemId":"EMP_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","value":"add","itemId":"opType"},"children":[],"expanded":false,"type":"text"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","bodyCls":"my-panel-no-border","layout":"column","columnWidth":".5","border":"false","itemId":"panel1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","width":"360","labelAlign":"right","itemId":"EMP_CODE","fieldLabel":"<font color='red'>*<\/font>{#xip_hr_emp_empCode#}"},"events":{"blur":"var empcode=app.EMP_CODE.getValue().toUpperCase();\n\napp.userName.setValue(empcode);"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","allowBlank":"false","width":"360","labelAlign":"right","itemId":"EMP_NAME","fieldLabel":"<font color='red'>*<\/font>{#xip_hr_emp_empName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","bodyCls":"my-panel-no-border","layout":"column","columnWidth":".5","border":"false","itemId":"panel2"},"children":[{"configs":{"labelWidth":"120","width":"230","labelAlign":"right","itemId":"BIRTHDAY","fieldLabel":"{#xip_hr_emp_birthday#}"},"children":[],"expanded":false,"type":"date"},{"configs":{"labelWidth":"50","width":"130","value":"Y","labelAlign":"right","pickList":"[['Y','{#xip_hr_emp_statusY#}'],['N','{#xip_hr_emp_statusN#}']]","itemId":"ATTRIBUTE2","fieldLabel":"{#xip_hr_emp_status#}"},"children":[],"expanded":true,"type":"combo"},{"configs":{"tagConfigs":"{\n  //重载控件的getValue/setValue方法\n  getValue: function() {\n    var vals = Wb.getValue(this, ['radio1', 'radio2']);\n    if (vals.radio1)\n      return 1;\n    else if (vals.radio2)\n      return 2;\n    else return null;\n  },\n  setValue: function(v) {\n    Wb.setValue(this, {\n      radio1: v === 1,\n      radio2: v === 2\n    });\n  }\n}","labelWidth":"120","width":"360","layout":"hbox","labelAlign":"right","itemId":"EMP_SEX","fieldLabel":"{#xip_hr_emp_sex#}"},"children":[{"configs":{"width":"100","name":"empsex","itemId":"radio1","boxLabel":"{#xip_hr_emp_male#}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"width":"100","name":"empsex","itemId":"radio2","boxLabel":"{#xip_hr_emp_female#}"},"children":[],"expanded":false,"type":"radio"}],"expanded":false,"type":"fieldcontainer"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","bodyCls":"my-panel-no-border","layout":"column","columnWidth":".5","border":"false","itemId":"panel3"},"children":[{"configs":{"labelWidth":"120","width":"360","labelAlign":"right","itemId":"PHONE_NO","fieldLabel":"{#xip_hr_emp_phoneNumber#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","width":"360","labelAlign":"right","itemId":"ATTRIBUTE1","fieldLabel":"{#xip_hr_emp_fixedPhone#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","bodyCls":"my-panel-no-border","layout":"column","columnWidth":".5","border":"false","itemId":"panel4"},"children":[{"configs":{"labelWidth":"120","width":"360","labelAlign":"right","itemId":"ID_NO","fieldLabel":"{#xip_hr_emp_IDCard#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","width":"360","labelAlign":"right","itemId":"EMAIL","fieldLabel":"<font color='red'>*<\/font>{#xip_hr_emp_email#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"height":"33","frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","columnWidth":".5","border":"false","itemId":"panel6"},"children":[{"configs":{"labelWidth":"120","width":"720","labelAlign":"right","itemId":"ADDRESS","fieldLabel":"{#xip_hr_emp_familyAddress#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","bodyCls":"my-panel-no-border","layout":"column","columnWidth":".5","border":"false","itemId":"panel7"},"children":[{"configs":{"labelWidth":"120","width":"360","labelAlign":"right","itemId":"empcheck","fieldLabel":"{#xip_hr_emp_creteUser#}"},"events":{"change":"var type=check.getValue();\nif(type==true){\n\n  app.userName.show();\n  checktype='1';\n \n}else{\napp.userName.hide();\n\nchecktype='0';\n  \n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"labelWidth":"120","width":"360","labelAlign":"right","itemId":"userName","fieldLabel":"{#xip_hr_emp_userName#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","labelAlign":"right","itemId":"endDate","fieldLabel":"{#xip_hr_emp_endTime#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","title":"{#xip_hr_emp_empAllocation#}","collapsible":"true","layout":"fit","itemId":"fieldset1"},"children":[{"configs":{"multiSelect":"true","selType":"cellmodel","forceFit":"true","itemId":"gridedit","editable":"true"},"events":{"tagEvents":"  cellclick:function(grid,td,cellIndex,record,tr,rowIndex){\n    var selectedRecord = app.gridedit.store.getAt(rowIndex);\n  if(cellIndex==7){\n    if(Ext.isEmpty(selectedRecord.get('ORG_ID'))){\n      Wb.warn('{#xip_hr_emp_qxzzz#}!');\n      return false;\n    }else{\n      app.deptstore.load({ params:{ orgId: selectedRecord.get('ORG_ID')}});\n\n    }\n  }else if(cellIndex==8){\n    if(Ext.isEmpty(selectedRecord.get('ORG_ID'))){\n      Wb.warn('{#xip_hr_emp_qxzzz#}!');\n      return false;\n    }\n\n    if(Ext.isEmpty(selectedRecord.get('DEPT_ID'))){\n      Wb.warn('{#xip_hr_emp_qxzbm#}!');\n      return false;\n    }\n     app.poststore.load({ params:{ orgId:selectedRecord.get('ORG_ID'),deptId:selectedRecord.get('DEPT_ID')}});\n\n  }\n  else  if(cellIndex === 10){\n\n     Ext.Msg.confirm('{#xip_hr_emp_prompt#}','{#xip_hr_emp_nqdyscpf#}',function(a){\n    if(a=='yes'){\n      var r = app.gridedit.store.getAt(rowIndex) ;\n      var json = {'asg_id' : r.data.ASG_ID} ;\n      var asgid ='\\''+r.data.ASG_ID+ '\\'';  \n     \n    Ext.Ajax.request({\n      url: '{#contextPath#}'+'/hrAction.do?method=delEmgAsg',\n      method: 'POST',\n      sync: false,\n      timeout: 300000,\n\n      params:{ids:asgid},\n      success: function(res, opts) {\n           }\n        });\n      app.gridedit.store.removeAt(rowIndex) ;\n    }else{\n      return false ;\n    }\n  });\n   }\n  }"},"children":[{"configs":{"proxy":"{\ntype:\"ajax\",\napi: {\nread: 'm?xwl=xip/hr/emp/data/readEmpAsg',\n//update: 'm?xwl=xip/hr/emp/data/updateEmpAsg',\n  //create: 'm?xwl=xip/hr/emp/data/createEmpAsg',\n  create: '{#contextPath#}'+'/hrAction.do?method=batchsaveEmgAsg',\n update:  '{#contextPath#}'+'/hrAction.do?method=batchsaveEmgAsg'\n //destroy: 'm?xwl=xip/hr/emp/data/destroyEmpAsg'\n},\nreader:{type:\"json\",root:\"rows\",totalProperty:\"total\"},\nlisteners:{\nexception:function(proxy,response,operation,options){\nWb.except(response.responseText);\n}\n}\n}","itemId":"store"},"events":{"beforesync":"(function(){\n Wb.mask();\n\n} )();\n\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_hr_emp_new#}","itemId":"addrow","iconCls":"plus_icon","tooltip":"{#xip_hr_emp_tipAddEmpInfo#}"},"events":{"click":"var flag=app.ATTRIBUTE2.getValue();\nif(flag=='N'){\n  /*Ext.Msg.alert('提示','未启用的员工不能员工分配');*/\n  Ext.Msg.alert('','{#xip_hr_emp_disableEmpCanNotAllocation#}');\n  return false;\n}\nvar e=app.gridedit.plugins[0],index=app.gridedit.store.getCount()===0?0:app.gridedit.store.getCount();\ne.completeEdit();\napp.gridedit.store.insert(index,{});\n//app.gridedit.store.getAt(index).set('ASG_ID',getuuid());\napp.gridedit.store.getAt(index).set('EMP_ID',app.EMP_ID.getValue());\napp.gridedit.store.getAt(index).set('ENABLED','Y');\ne.startEditByPosition({row:index,column:2});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#xip_hr_emp_serialNumber#}","width":"45","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"ASG_ID","itemId":"COLUMN_ASG_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"EMP_ID","itemId":"COLUMN_EMP_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"岗位ID","hidden":"true","dataIndex":"POST_ID","itemId":"COLUMN_POST_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"部门ID","hidden":"true","dataIndex":"DEPT_ID","itemId":"COLUMN_DEPT_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"组织ID","hidden":"true","dataIndex":"ORG_ID","itemId":"COLUMN_ORG_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"editor":"app.editororg","text":"{#xip_hr_emp_org#}","autoWrap":"false","width":"200","dataIndex":"ORG_NAME","itemId":"COLUMN_ORG_NAME"},"children":[{"configs":{"store":"app.orgstore","displayField":"ORG_NAME","valueField":"ORG_ID","itemId":"editor"},"events":{"select":"var r = app.gridedit.getSelectionModel().getSelection();\nr[0].set('ORG_ID',combo.getValue()) ;\n//r[0].set('ORG_NAME',app.editororg.getRawValue()) ;\ncombo.setValue(combo.getRawValue());\n\n//app.COLUMN_DEPT_NAME.clearValue();\nr[0].set('DEPT_ID','') ;\nr[0].set('DEPT_NAME','') ;\nr[0].set('POST_ID','') ;\nr[0].set('POST_NAME','') ;\n"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"editor":"app.depteditor","text":"{#xip_hr_emp_dept#}","width":"150","dataIndex":"DEPT_NAME","itemId":"COLUMN_DEPT_NAME"},"children":[{"configs":{"queryDelay":"160","store":"app.deptstore","queryMode":"local","displayField":"NAME","valueField":"ID","itemId":"editor"},"events":{"select":"var r = app.gridedit.getSelectionModel().getSelection();\nr[0].data.DEPT_ID = combo.getValue() ;\ncombo.setValue(combo.getRawValue());\n\nr[0].data.POST_ID = '' ;\nr[0].data.POST_NAME = '' ;"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#xip_hr_emp_post#}","width":"130","dataIndex":"POST_NAME","itemId":"COLUMN_POST_NAME"},"children":[{"configs":{"queryDelay":"160","store":"app.poststore","queryMode":"local","displayField":"NAME","valueField":"ID","itemId":"editor"},"events":{"select":"var r = app.gridedit.getSelectionModel().getSelection();\nr[0].data.POST_ID = combo.getValue() ;\ncombo.setValue(combo.getRawValue());"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#xip_hr_emp_isEnabled#}","width":"80","align":"center","dataIndex":"ENABLED","itemId":"COLUMN_ENABLED","renderer":"if(value === 'Y'){\n  return '{#xip_hr_emp_statusY#}';\n}else if(value === 'N'){\n  return '{#xip_hr_emp_statusN#}';\n}else{\n  return value ;\n}"},"children":[{"configs":{"value":"Y","pickList":"[['Y','{#xip_hr_emp_statusY#}'],['N','{#xip_hr_emp_statusN#}']]","itemId":"editor"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"align":"center","altText":"{#xip_hr_emp_tipDeleteEmpInfo#}","itemId":"opts","renderer":"return '<img src=\"{#contextPath#}/wb/images/delete.gif\"/>';","flex":"1","tooltip":"{#xip_hr_emp_tipDeleteEmpInfo#}"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"fieldset"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","height":"70","frame":"true","style":"border-width:0px","layout":"fit","itemId":"queryform","border":"false"},"children":[{"configs":{"title":"{#xip_hr_emp_queryConditions#}","collapsible":"true","layout":"column","itemId":"fieldset1"},"children":[{"configs":{"labelWidth":"150","width":"300","labelAlign":"right","itemId":"ygbm","fieldLabel":"{#xip_hr_emp_empCodeOrName#}"},"events":{"specialkey":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#xip_hr_emp_query#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"app.empgrid.store.load( {  params:{ygbm:app.ygbm.getValue() }} );"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_hr_emp_reset#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.queryform.getForm().reset();\napp.empgrid.store.load();"},"children":[],"expanded":true,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"empgrid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xip/hr/emp/data/selelct"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_hr_emp_new#}","itemId":"addBtn","iconCls":"application_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._win);\napp.gridedit.store.load();\napp.EMP_ID.setValue(getuuid()); \n//toolbar3.show();\napp.userName.hide();\nwin.setTitle('{#xip_hr_emp_xzyg#}') ;//'新增员工'\napp.savenextWin.show();\nwin.show();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_hr_emp_modify#}","itemId":"editBtn","iconCls":"table_edit_icon"},"events":{"click":"var rows=app.empgrid.getSelection();\n\n\n\nif(rows.length === 0){\n  Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_qxzxx#}');//'提示','请选择信息!'\n  return false ;\n}\nif(rows.length > 1){\n  Ext.Msg.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_qxzytxx#}');//'提示','请选择一条信息!'\n  return false ;\n}\nvar _empsex=rows[0].data.EMP_SEX;\nWb.edit(app.empgrid,app._win);\n  if(_empsex === '1'){\n    app.radio1.setValue(true) ;\n  }else{\n    app.radio2.setValue(true) ;\n  }\napp.win.setTitle('{#xip_hr_emp_bjyg#}');//'编辑员工'\napp.opType.setValue('edit') ;\napp.EMP_CODE.setReadOnly(true);\napp.panel7.hide();\n // 加载分配信息\napp.gridedit.store.load({params:{empId:app.EMP_ID.getValue()}}); \n\n app.savenextWin.hide();\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_hr_emp_delete#}","itemId":"deleteBtn","iconCls":"application_delete_icon"},"events":{"click":"var rows = app.empgrid.getSelection();\nif(Ext.isEmpty(rows)){\n  Ext.MessageBox.alert('{#xip_hr_emp_prompt#}','{#xip_hr_emp_nmyxzrhsj#}');//'提示','您没有选中任何数据！'\n}\nelse{\n  Ext.Msg.confirm('{#xip_hr_emp_prompt#}','{#xip_hr_emp_nqdysc#}',function(a){//'提示','您确定要删除？'\n    if(a=='yes'){\n      var idList = \"\" ;\n      Ext.each(rows,function(r){\n        var id = \"'\" + r.data.EMP_ID + \"'\";\n        if(idList === \"\"){\n          idList = id ;\n        }else{\n          idList = idList+\",\"+id ;\n        }\n      });\n      var json = {'ids' : idList} ;\n\n      Ext.Ajax.request({\n        url: '{#contextPath#}'+'/hrAction.do?method=delEmps',\n        method: 'POST',\n        sync: false,\n        timeout: 300000,\n\n        params: json,\n        success: function(res, opts) {\n\n          var rep = Ext.JSON.decode(res.responseText);\n          var flag = rep.flag;\n\n          if(flag==\"0\"){\n            Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",\"{#xip_hr_emp_ygxxsccg#}\");//\"提示\",\"员工信息删除成功!\"\n            app.empgrid.store.load();\n          }else{\n            Ext.Msg.alert(\"{#xip_hr_emp_prompt#}\",rep.msg);//\"提示\",\n          }\n\n        }\n      });\n\n\n\n\n\n\n    }else{\n      return false ;\n    }\n  });\n\n\n\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item4"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_hr_emp_export#}","itemId":"exportBtn","iconCls":"db_export_icon"},"events":{"click":"var dbType = '{#dbType#}';\n\nif(dbType == \"mysql\"){\n  Xip.exportExcel('XIP_PUB_EMPS', {empCodeName:app.ygbm.getValue()}, '{#xip_hr_emp_employee#}');//'员工'\n}else{\n  Xip.exportExcel('XIP_PUB_EMPS_ORACLE', {empCodeName:app.ygbm.getValue()}, '{#xip_hr_emp_employee#}');//'员工'\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item5"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#xip_hr_emp_import#}","itemId":"importBtn","iconCls":"db_import_icon"},"events":{"click":"var dbType = '{#dbType#}';\n\nif(dbType == \"mysql\"){\n  Xip.importExcel('XIP_PUB_EMPS', null);\n}else{\n  Xip.importExcel('XIP_PUB_EMPS_ORACLE', null);\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item6"},"children":[],"expanded":false,"type":"item"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#xip_hr_emp_serialNumber#}","width":"45","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_empCode#}","width":"150","dataIndex":"EMP_CODE","itemId":"COLUMN_EMP_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_empName#}","width":"150","dataIndex":"EMP_NAME","itemId":"COLUMN_EMP_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_sex#}","width":"60","dataIndex":"EMP_SEX","itemId":"COLUMN_EMP_SEX","renderer":"var sex = record.get('EMP_SEX');\n\nif(sex == '1'){\n  return '男' ;\n}else if(sex == '2'){\n  return '女' ;\n}else{\n  return sex ;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_IDCard#}","hidden":"true","width":"200","dataIndex":"ID_NO","itemId":"COLUMN_ID_NO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_empId#}","hidden":"true","dataIndex":"EMP_ID","itemId":"COLUMN_EMP_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_phoneNumber#}","width":"120","dataIndex":"PHONE_NO","itemId":"COLUMN_PHONE_NO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_address#}","hidden":"true","width":"350","dataIndex":"ADDRESS","itemId":"COLUMN_ADDRESS"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_email#}","width":"200","dataIndex":"EMAIL","itemId":"COLUMN_EMAIL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_birthday#}","hidden":"true","dataIndex":"BIRTHDAY","itemId":"COLUMN_BIRTHDAY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_fixedPhone#}","width":"120","dataIndex":"ATTRIBUTE1","itemId":"COLUMN_ATTRIBUTE1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_hr_emp_empStatus#}","align":"center","width":"120","dataIndex":"ATTRIBUTE2","itemId":"COLUMN_ATTRIBUTE2","renderer":"if(value == 'Y'){\n  return '{#xip_hr_emp_statusY#}' ;\n}else if(value == 'N'){\n  return '<font color=red>{#xip_hr_emp_statusN#}<\/font>' ;\n}else{\n  return value;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段3","hidden":"true","dataIndex":"ATTRIBUTE3","itemId":"COLUMN_ATTRIBUTE3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段4","hidden":"true","dataIndex":"ATTRIBUTE4","itemId":"COLUMN_ATTRIBUTE4"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段5","hidden":"true","dataIndex":"ATTRIBUTE5","itemId":"COLUMN_ATTRIBUTE5"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段6","hidden":"true","dataIndex":"ATTRIBUTE6","itemId":"COLUMN_ATTRIBUTE6"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段7","hidden":"true","dataIndex":"ATTRIBUTE7","itemId":"COLUMN_ATTRIBUTE7"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段8","hidden":"true","dataIndex":"ATTRIBUTE8","itemId":"COLUMN_ATTRIBUTE8"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段9","hidden":"true","dataIndex":"ATTRIBUTE9","itemId":"COLUMN_ATTRIBUTE9"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"弹性扩展字段10","hidden":"true","dataIndex":"ATTRIBUTE10","itemId":"COLUMN_ATTRIBUTE10"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}