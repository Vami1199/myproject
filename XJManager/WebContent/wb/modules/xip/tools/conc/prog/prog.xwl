{"inframe":false,"title":"程序管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);","loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/tools/conc/prog/json/prog\");","itemId":"module"},"events":{"initialize":"function getuuid() {\n var s = [];\n var hexDigits = \"0123456789abcdef\";\n for (var i = 0; i < 36; i++) {\n s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n }\n s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n s[8] = s[13] = s[18] = s[23] = \"-\";\n\nvar uuid = s.join(\"\");\n return uuid;\n}"},"children":[{"configs":{"itemId":"Winbtns"},"children":[{"configs":{"text":"{#xip_conc_prog_saveWin#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"if(app.proform.getForm().isValid()===false){\n  Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_notnull#}!');\n  return;\n}\n\n//判断参数编码是否有重复\n//将store中的所有记录的参数编码放到一个数组中，获取此数据的长度，然后去重，获取新数据的长度，如果两个数字长度相同，则没有重复，否则有重复\nvar paramsArray = new Array();\nfor(var i=0; i<app.progrid.store.getCount(); i++){\n  var record = app.progrid.store.getAt(i);\n  if(Ext.isEmpty(record.get('PARAM_CODE'))){\n   Ext.Msg.alert('','{#xip_conc_prog_msg1#}');\n  return;\n  }\n   if(Ext.isEmpty(record.get('PARAM_NAME'))){\n   Ext.Msg.alert('','{#xip_conc_prog_msg2#}');\n  return;\n  }\n  paramsArray.push(record.get('PARAM_CODE'));\n}\n\nvar newParamsArray = Ext.Array.unique(paramsArray);\n\nif(paramsArray.length != newParamsArray.length){\n \n   Ext.Msg.alert('','{#xip_conc_prog_msg3#}');\n  return;\n}\n\nvar rec = app.progrid.store.getModifiedRecords();\nfor(var i=0; i<rec.length; i++){\n  if(rec[i].data.VAL_SRC_TYPE===''){\n    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_msg4#}');\n    return false;\n  }else if((rec[i].data.SQL_STR==='')&&rec[i].data.VAL_SRC_TYPE=='S'){\n    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_msg5#}');\n    return false;\n  }else if((rec[i].data.VAL_SET_NAME==='')&&rec[i].data.VAL_SRC_TYPE=='V'){\n    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_msg6#}');\n    return false;\n  }\n}   \n//from表单数据\n\nvar json = {\n  PROGRAM_ID:app.PROGRAM_ID.getValue(),\n  PROGRAM_CODE:app.PROGRAM_CODE.getValue(),\n  PROGRAM_NAME:app.PROGRAM_NAME.getValue(),\n  PROGRAM_TYPE:app.PROGRAM_TYPE.getValue(),\n  OPERATION:app.OPERATION.getValue(),\n  APP_ID:app.APP_ID.getValue(),\n  PROG_DESC:app.PROG_DESC.getValue()\n \n};\nvar opType = app.OP_TYPE.getValue();\n\nif(opType=='_added'){\n    Wb.request({\n           url: 'm?xwl=xip/tools/conc/prog/data/insertgrid', \n           params: json,\n           success: function() {\n            \n           if(app.progrid.store.getModifiedRecords().length===0 && app.progrid.store.getRemovedRecords().length===0){\n                app.OP_TYPE.setValue(\"_modified\");\n                 Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n               }else{\n               app.progrid.plugins[0].completeEdit();\n              app.progrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                    //设置编辑状态\n                   app.OP_TYPE.setValue(\"_modified\");\n                   Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n                   app.progrid.store.commitChanges();\n                        }\n                  }); \n                \n               \n           }\n              \n              app.grid.store.reload();  \n          }\n       });\n\n}else{\n \n Wb.request({\n           url: 'm?xwl=xip/tools/conc/prog/data/updategrid', \n           params: json,\n           success: function() {\n             \n            if(app.progrid.store.getModifiedRecords().length===0 && app.progrid.store.getRemovedRecords().length===0){\n               \n                  Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n               }else{\n                app.progrid.plugins[0].completeEdit();\n                \n                app.progrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                      \n                     Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n                     app.progrid.store.commitChanges();\n                        }\n                  \n                    \n                  });\n              \n           }\n          app.grid.store.reload();\n          } \n        });\n\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_prog_savenextWin#}","itemId":"savenextWin"},"events":{"click":"if(app.proform.getForm().isValid()===false){\n  Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_notnull#}');\n  return;\n}\n\n//判断参数编码是否有重复\n//将store中的所有记录的参数编码放到一个数组中，获取此数据的长度，然后去重，获取新数据的长度，如果两个数字长度相同，则没有重复，否则有重复\nvar paramsArray = new Array();\nfor(var i=0; i<app.progrid.store.getCount(); i++){\n  var record = app.progrid.store.getAt(i);\n  if(Ext.isEmpty(record.get('PARAM_CODE'))){\n   Ext.Msg.alert('','{#xip_conc_prog_msg1#}');\n  return;\n  }\n   if(Ext.isEmpty(record.get('PARAM_NAME'))){\n   Ext.Msg.alert('','{#xip_conc_prog_msg2#}');\n  return;\n  }\n  paramsArray.push(record.get('PARAM_CODE'));\n}\n\nvar newParamsArray = Ext.Array.unique(paramsArray);\n\nif(paramsArray.length != newParamsArray.length){\n \n   Ext.Msg.alert('','{#xip_conc_prog_msg3#}');\n  return;\n}\n\nvar rec = app.progrid.store.getModifiedRecords();\nfor(var i=0; i<rec.length; i++){\n  if(rec[i].data.VAL_SRC_TYPE===''){\n    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_msg4#}');\n    return false;\n  }else if((rec[i].data.SQL_STR==='')&&rec[i].data.VAL_SRC_TYPE=='S'){\n    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_msg5#}');\n    return false;\n  }else if((rec[i].data.VAL_SET_NAME==='')&&rec[i].data.VAL_SRC_TYPE=='V'){\n    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_msg6#}');\n    return false;\n  }\n}   \n//from表单数据\n\nvar json = {\n  PROGRAM_ID:app.PROGRAM_ID.getValue(),\n  PROGRAM_CODE:app.PROGRAM_CODE.getValue(),\n  PROGRAM_NAME:app.PROGRAM_NAME.getValue(),\n  PROGRAM_TYPE:app.PROGRAM_TYPE.getValue(),\n  OPERATION:app.OPERATION.getValue(),\n  APP_ID:app.APP_ID.getValue(),\n  PROG_DESC:app.PROG_DESC.getValue()\n \n};\nvar opType = app.OP_TYPE.getValue();\n\nif(opType=='_added'){\n    Wb.request({\n           url: 'm?xwl=xip/tools/conc/prog/data/insertgrid', \n           params: json,\n           success: function() {\n             app.progrid.plugins[0].completeEdit();\n          if(app.progrid.store.getModifiedRecords().length===0 && app.progrid.store.getRemovedRecords().length===0){\n              app.proform.getForm().reset();\n              app.OP_TYPE.setValue('_added');\n              app.prowin.setTitle('{#xip_conc_prog_add_title#}');\n              var APP_ID = app.appCombox.getValue();\n              app.APP_ID.setValue(APP_ID);\n              app.PROGRAM_ID.setValue(getuuid());\n              app.progrid.store.load({params:{PROGRAM_ID : '-1'}});\n            Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n              \n              }else{\n              app.progrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                    app.proform.getForm().reset();\n                    app.OP_TYPE.setValue('_added');\n                    app.prowin.setTitle('{#xip_conc_prog_add_title#}');\n                    var APP_ID = app.appCombox.getValue();\n                    app.APP_ID.setValue(APP_ID);\n                    app.PROGRAM_ID.setValue(getuuid());\n                    app.progrid.store.load({params:{PROGRAM_ID : '-1'}});\n                      Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n                      app.progrid.store.commitChanges();\n                        }\n                  }); \n\t\t\t\n          \n           }\n             \n                app.grid.store.reload();\n          }\n       });\n\n}else{\n Wb.request({\n           url: 'm?xwl=xip/tools/conc/prog/data/updategrid', \n           params: json,\n           success: function() {\n             \n           if(app.progrid.store.getModifiedRecords().length===0 && app.progrid.store.getRemovedRecords().length===0){\n                    app.proform.getForm().reset();\n                    app.OP_TYPE.setValue('_added');\n                    app.prowin.setTitle('{#xip_conc_prog_add_title#}');\n                    var APP_ID = app.appCombox.getValue();\n                    app.APP_ID.setValue(APP_ID);\n                    app.PROGRAM_ID.setValue(getuuid());\n                    app.progrid.store.load({params:{PROGRAM_ID : '-1'}});\n                    Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n              }else{\n                app.progrid.plugins[0].completeEdit();\n             app.progrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                     app.proform.getForm().reset();\n\t\t\t\t\t\n                    app.OP_TYPE.setValue('_added');\n                    app.prowin.setTitle('{#xip_conc_prog_add_title#}');\n                    var APP_ID = app.appCombox.getValue();\n                    app.APP_ID.setValue(APP_ID);\n                    app.PROGRAM_ID.setValue(getuuid());\n                    app.progrid.store.load({params:{PROGRAM_ID : '-1'}});\n                      Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_saveok#}');\n                      app.progrid.store.commitChanges();\n                        }\n                  });\n           }\n             \n             app.grid.store.reload();\n           } \n   \n        });\n\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_prog_closeWin#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.prowin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"height":"500","layout":"border","width":"700","closeAction":"hide","resizable":"true","buttons":"app.Winbtns","buttonAlign":"center","itemId":"prowin","border":"false","dialog":"false","modal":"true"},"children":[{"configs":{"region":"north","frame":"true","autoScroll":"true","style":"border-width:0px","bodyPadding":"padding: 10px 10px 0px","itemId":"proform"},"events":{"afterrender":"\n"},"children":[{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"paramPanel"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","width":"300","labelAlign":"right","itemId":"PROGRAM_CODE","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_prog_PROGRAM_CODE#}"},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"80","allowBlank":"false","displayField":"NAME","width":"300","valueField":"CODE","labelAlign":"right","pickList":"[['F','{#xip_conc_prog_function#}'],['W','{#xip_conc_prog_ws#}'],['J','{#xip_conc_prog_java#}']]","itemId":"PROGRAM_TYPE","forceSelection":"true","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_prog_PROGRAM_TYPE#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"paramPanel1"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","width":"300","labelAlign":"right","itemId":"PROGRAM_NAME","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_prog_PROGRAM_NAME#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","allowBlank":"false","width":"300","labelAlign":"right","itemId":"OPERATION","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_prog_OPERATION#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"paramPanel2"},"children":[{"configs":{"labelWidth":"80","width":"600","labelAlign":"right","itemId":"PROG_DESC","fieldLabel":"{#xip_conc_prog_PROG_DESC#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"hidden":"true","width":"250","itemId":"OP_TYPE","fieldLabel":"操作的标记新增或者删除"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"PROGRAM_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"APP_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","height":"300","itemId":"progrid","editable":"true"},"events":{"tagEvents":"cellclick:function( Table ,  td,  cellIndex, record,  tr,  rowIndex, e,  eOpts ){\n \nif(cellIndex == 5){//点击的值集列\n  if(record.get('VAL_SRC_TYPE')=='S' || record.get('VAL_SRC_TYPE')=='H'){\n    return false;\n  }\n  return true;\n}else if(cellIndex == 6){//点击的SQL列\n  if(record.get('VAL_SRC_TYPE')=='V' || record.get('VAL_SRC_TYPE')=='H'){\n    return false;\n  }\n  return true;\n}\nreturn true;\n}\n"},"children":[{"configs":{"proxy":"{\ntype:\"ajax\",\napi: {\nread: 'm?xwl=xip/tools/conc/prog/data/read',\nupdate: 'm?xwl=xip/tools/conc/prog/data/update',\ncreate: 'm?xwl=xip/tools/conc/prog/data/create',\ndestroy: 'm?xwl=xip/tools/conc/prog/data/destroy'\n},\nreader:{type:\"json\",root:\"rows\",totalProperty:\"total\"},\nlisteners:{\nexception:function(proxy,response,operation,options){\nWb.except(response.responseText);\n}\n}\n}","pageSize":"-1","itemId":"store"},"events":{"beforesync":"(function(){\n Wb.mask();\n\n} )();\n\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#xip_conc_prog_addBtn#}","itemId":"addBtn","iconCls":"application_add_icon"},"events":{"click":"if(app.proform.getForm().isValid()===false){\n  Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_notnull#}');\n  return;\n}\nvar e=app.progrid.plugins[0],index=app.progrid.store.getCount()===0?0:app.progrid.store.getCount();\ne.completeEdit();\n\n\n  app.progrid.store.insert(index,{});\n\n app.progrid.store.getAt(index).set('PROGRAM_PARAM_ID',getuuid());\n app.progrid.store.getAt(index).set('PROGRAM_ID',app.PROGRAM_ID.getValue());\n\n\ne.startEditByPosition({row:index,column:2});\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_prog_deleteBtn#}","itemId":"delBtn","iconCls":"application_delete_icon"},"events":{"click":"var m = app.progrid.getSelectionModel(), s = m.getSelection(),i,j;\n\nif(s.length==0){\n  Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_selrow#}');\n  return false ;\n}else{\n \n      app.progrid.plugins[0].completeEdit();\n      app.progrid.store.remove(s);\n      /*grid2.plugins[0].completeEdit();\n\n      i=store2.indexOf(s[0]);\n      store2.remove(s);\n      j = store2.getCount() - 1;\n      if (i > j)\n        i = j;\n      if (i > -1)\n        m.select(i);\n      \n      grid2.plugins[0].completeEdit();\n      \n      store2.sync(\n        {\n          callback :function(){\n\n            Wb.unmask();\n          }\n        });\n      Wb.load(store2);\n      Ext.MessageBox.alert('提示', '删除成功！');*/\n    \n\n}"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_SEQ_NO#}","width":"60","dataIndex":"SEQ_NO","itemId":"indexnum1"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"number"}],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_PARAM_CODE#}","width":"90","dataIndex":"PARAM_CODE","itemId":"COLUMN_PARAM_CODE"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_PARAM_NAME#}","width":"90","dataIndex":"PARAM_NAME","itemId":"COLUMN_PARAM_NAME"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_VAL_SRC_TYPE#}","width":"130","dataIndex":"VAL_SRC_TYPE","itemId":"COLUMN_VAL_SRC_TYPE","renderer":"if(value === \"S\"){\n  return \"SQL\";\n}else if(value === \"V\"){\n  return \"{#xip_conc_prog_VAL_SET_NAME#}\";\n}else if(value === \"H\"){\n  return \"{#xip_conc_prog_sglr#}\";\n}else{\n  return value;\n}\n"},"children":[{"configs":{"value":"S","pickList":"[['S','SQL'],['V','{#xip_conc_prog_VAL_SET_NAME#}'],['H','{#xip_conc_prog_sglr#}']]","itemId":"editor","forceSelection":"true"},"events":{"select":"var seletedGird = app.progrid.getSelectionModel().getSelection();\n\nfor(var i = 0; i < seletedGird.length; i++){   \n   \n  var status = combo.getValue();\n  app.text4.setValue(status);\n\n  if(status=='S'){\n    seletedGird[0].set('VAL_SET_NAME','');\n    seletedGird[0].set('VAL_SET_ID','');\n    //app.COLUMN_VAL_SET_NAME.reset();\n  }else if(status=='V'){\n    seletedGird[0].set('SQL_STR','');\n   // app.COLUMN_SQL_STR.reset();\n  }else{\n    seletedGird[0].set('VAL_SET_NAME','');\n    seletedGird[0].set('VAL_SET_ID','');\n    seletedGird[0].set('SQL_STR','');\n  }\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#xip_conc_prog_VAL_SET_NAME#}","width":"180","dataIndex":"VAL_SET_NAME","itemId":"COLUMN_VAL_SET_NAME"},"children":[{"configs":{"queryDelay":"160","queryMode":"remote","itemId":"editor"},"events":{"beforequery":"app.gridcombo.store.load();\n"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#xip_conc_prog_SQL_STR#}","width":"200","dataIndex":"SQL_STR","itemId":"COLUMN_SQL_STR"},"children":[{"configs":{"width":"180","itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"},{"configs":{"text":"valset_id","hidden":"true","dataIndex":"VAL_SET_ID","itemId":"COLUMN_VAL_SET_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"hidden":"true","dataIndex":"PROGRAM_ID","itemId":"COLUMN_PROGRAM_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"hidden":"true","dataIndex":"PROGRAM_PARAM_ID","itemId":"COLUMN_PROGRAM_PARAM_ID"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"},{"configs":{"itemId":"menu"},"children":[{"configs":{"height":"300","width":"200","itemId":"tr"},"children":[{"configs":{"exportTitle":"false","columnLines":"true","height":"300","width":"200","itemId":"gridcombo"},"events":{"beforeselect":"// app.ed_zj.setValue(record.get('VAL_SET_NAME'));\n\nvar id=record.get('VAL_SET_ID');\nvar _name =record.get('VAL_SET_NAME');\n\nvar recs = app.progrid.getSelectionModel().getSelection();\nrecs[0].set('VAL_SET_NAME',_name );\nrecs[0].set('VAL_SET_ID',id);\n\napp.menu.hide();"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xip/tools/conc/prog/data/findzjid","showMask":"false"},"events":{"load":"app.menu.showBy(app.COLUMN_VAL_SET_NAME);\napp.COLUMN_VAL_SET_NAME.focus(false,true);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"VAL_SET_ID","itemId":"COL_VAL_SET_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_VAL_SET_NAME#}","width":"200","dataIndex":"VAL_SET_NAME","itemId":"COL_VAL_SET_NAME"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"menu"},{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"80","frame":"true","style":"border-width:0px","layout":"fit","itemId":"queryform","border":"false"},"children":[{"configs":{"title":"{#xip_conc_prog_fieldset1#}","style":"padding-top:8px","collapsible":"true","layout":"column","itemId":"fieldset1"},"children":[{"configs":{"labelWidth":"80","displayField":"APP_NAME","width":"240","valueField":"APP_ID","labelAlign":"right","itemId":"appCombox","fieldLabel":"{#xip_conc_prog_appCombox#}"},"events":{"select":"app.grid.store.load();"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xip/data/getApps","showMask":"false"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"labelWidth":"120","width":"250","labelAlign":"right","itemId":"cxbm","fieldLabel":"{#xip_conc_prog_cxbm#}"},"events":{"specialkey":"app.grid.store.load( {  params:{cxbm:app.cxbm.getValue() }} );"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#xip_conc_prog_queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"\napp.grid.store.load( {  params:{cxbm:app.cxbm.getValue() }} );"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_prog_resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.cxbm.setValue('');\napp.grid.store.load();"},"children":[],"expanded":true,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"rowmodel","itemId":"grid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xip/tools/conc/prog/data/selectgrid"},"events":{"beforeload":"if(Wb.isEmpty(app.appCombox.getValue())){\n Ext.Msg.alert('','{#xip_conc_prog_msg6#}');\n  return;\n}\n\napp.grid.store.getProxy().extraParams.APP_ID = app.appCombox.getValue();\napp.grid.store.getProxy().extraParams.cxbm1 =app.cxbm.getValue();\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#xip_conc_prog_addBtn#}","itemId":"addBtn","iconCls":"application_add_icon"},"events":{"click":"var _findcombo = app.appCombox.getValue();\nif(_findcombo === null || _findcombo === \"\"){\n  Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_selapp#}!');\n  return false;\n}else{\n var win = new Ext.window.Window(app._prowin);\n win.show();\n app.progrid.store.load();\n app.prowin.setTitle('{#xip_conc_prog_add_title#}');\n  var appid = app.appCombox.getValue();\n  app.APP_ID.setValue(appid);\n  app.OP_TYPE.setValue('_added');\n  app.PROGRAM_ID.setValue(getuuid());\n}\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_prog_editBtn#}","itemId":"editBtn","iconCls":"table_edit_icon"},"events":{"click":"Wb.edit(app.grid,app.prowin);\napp.prowin.setTitle('{#xip_conc_prog_edit_title#}');\napp.progrid.store.load({params:{PROGRAM_ID : app.PROGRAM_ID.getValue()}});\napp.OP_TYPE.setValue('_modified');\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_prog_deleteBtn#}","itemId":"deleteBtn","iconCls":"application_delete_icon"},"events":{"click":"\nvar recs = app.grid.getSelection();\n\n\nif (!recs.length) {\n  Wb.warn('{#xip_conc_prog_seldelrows#}');\n  return false ;\n}\nExt.Msg.confirm('{#xip_conc_prog_tip#}','{#xip_conc_prog_deltip#}',function(a){\n    if(a=='yes'){\n    \n      var json ={\n        PROGRAM_ID:recs[0].get('PROGRAM_ID')\n      };\n    Wb.request({\n        url: 'm?xwl=xip/tools/conc/prog/data/deleteall', \n           params:  json,\n   \n           success: function() {\n              Ext.Msg.alert('{#xip_conc_prog_tip#}','{#xip_conc_prog_delok#}'); \n          app.grid.store.reload();\n           \n           }\n    \n    });\n    }\n  });\n \n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_PROGRAM_CODE#}","width":"180","dataIndex":"PROGRAM_CODE","itemId":"COLUMN_PROGRAM_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_PROGRAM_NAME#}","width":"180","dataIndex":"PROGRAM_NAME","itemId":"COLUMN_PROGRAM_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_PROGRAM_TYPE#}","width":"200","dataIndex":"PROGRAM_TYPE","itemId":"COLUMN_PROGRAM_TYPE","renderer":"if(value === \"F\"){\n  return \"{#xip_conc_prog_function#}\";\n}else if(value === \"W\"){\n  return \"{#xip_conc_prog_ws#}\";\n}else if(value === \"J\"){\n  return \"{#xip_conc_prog_java#}\";\n}else{\n  return value;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_OPERATION#}","width":"300","dataIndex":"OPERATION","itemId":"COLUMN_OPERATION"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_prog_PROG_DESC#}","width":"200","dataIndex":"PROG_DESC","itemId":"COLUMN_PROG_DESC","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"PROGRAM_ID","itemId":"COLUMN_PROGRAM_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"appid","hidden":"true","dataIndex":"APP_ID","itemId":"COLUMN_APP_ID"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}