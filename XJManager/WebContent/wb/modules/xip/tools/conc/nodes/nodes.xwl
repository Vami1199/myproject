{"inframe":false,"title":"节点管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);","loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/tools/conc/nodes/json/nodes\");","itemId":"module"},"events":{"initialize":"function getuuid() {\n var s = [];\n var hexDigits = \"0123456789abcdef\";\n for (var i = 0; i < 36; i++) {\n s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n }\n s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n s[8] = s[13] = s[18] = s[23] = \"-\";\n\nvar uuid = s.join(\"\");\n return uuid;\n}"},"children":[{"configs":{"itemId":"Winbtns"},"children":[{"configs":{"text":"{#xip_conc_nodes_saveWin#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"if(!app.form.getForm().isValid()){\n  Ext.Msg.alert('提示','请填写所有必填项！');\n  return false;\n}\n\nvar _url = app.CONTEXT_PATH.getValue();\nvar re = /(.*?):\\/\\/(?:([^:@]+)(?::([^@]*))?@)?([^:@\\/]+)(?::(\\d+))?(?:(\\/.*?)(?:\\?(.*?))?(?:#(.*?))?)$/;\nif(!Ext.isEmpty(_url)){\n  if(!re.test(_url)){\n    Ext.Msg.alert('提示','节点地址格式不合法!');\n   \n    return;\n  }\n}\n\nvar _NODE_CODE = app.NODE_CODE.getValue();\nvar _NODE_DESC = app.NODE_DESC.getValue();\nvar  nodeId = app.NODE_ID.getValue();\nvar json = {\n  nodeId:'',\n  nodeCode:app.NODE_CODE.getValue(),\n  nodeDesc:app.NODE_DESC.getValue(),\n  contextPath:app.CONTEXT_PATH.getValue(),\n  maxConcCount:app.MAX_CONC_COUNT.getValue()\n};\n\nif(nodeId===''){//新增\n  json.nodeId = getuuid(); \n   app.NODE_ID.setValue(json.nodeId);\n        Wb.request({\n           url: 'm?xwl=xip/tools/conc/nodes/data/insertNodes', \n           params: json,\n           success: function() {\n           Ext.Msg.alert('提示','保存成功！');\n           app.win.setTitle('编辑节点');\n           app.grid.store.reload();\n           }\n        });\n}else{//更新\n\n  json.nodeId = nodeId;\n Wb.request({\n           url: 'm?xwl=xip/tools/conc/nodes/data/updateNodes', \n           params: json,\n           success: function() {\n              Ext.Msg.alert('提示','保存成功！');\n         \n           app.grid.store.reload();\n           }\n        });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_nodes_savenextWin#}","itemId":"savenextWin"},"events":{"click":"if(!app.form.getForm().isValid()){\n  Ext.Msg.alert('提示','请填写所有必填项！');\n  return false;\n}\n\nvar _url = app.CONTEXT_PATH.getValue();\nvar re = /(.*?):\\/\\/(?:([^:@]+)(?::([^@]*))?@)?([^:@\\/]+)(?::(\\d+))?(?:(\\/.*?)(?:\\?(.*?))?(?:#(.*?))?)$/;\nif(!Ext.isEmpty(_url)){\n  if(!re.test(_url)){\n    Ext.Msg.alert('提示','节点地址格式不合法!');\n   \n    return;\n  }\n}\n\nvar _NODE_CODE = app.NODE_CODE.getValue();\nvar _NODE_DESC = app.NODE_DESC.getValue();\nvar  nodeId = app.NODE_ID.getValue();\nvar json = {\n  nodeId:'',\n  nodeCode:app.NODE_CODE.getValue(),\n  nodeDesc:app.NODE_DESC.getValue(),\n  contextPath:app.CONTEXT_PATH.getValue(),\n  maxConcCount:app.MAX_CONC_COUNT.getValue()\n};\n\nif(nodeId===''){//新增\n  json.nodeId = getuuid(); \n   app.NODE_ID.setValue(json.nodeId);\n        Wb.request({\n           url: 'm?xwl=xip/tools/conc/nodes/data/insertNodes', \n           params: json,\n           success: function() {\n           app.form.getForm().reset();\n           app.NODE_ID.setValue('');\n           Ext.Msg.alert('提示','保存成功！');\n           app.win.setTitle('新增节点');\n           app.grid.store.reload();\n           }\n        });\n}else{//更新\n\n  json.nodeId = nodeId;\n Wb.request({\n           url: 'm?xwl=xip/tools/conc/nodes/data/updateNodes', \n           params: json,\n           success: function() {\n           app.form.getForm().reset();\n           app.NODE_ID.setValue('');\n           Ext.Msg.alert('提示','保存成功！');\n           app.win.setTitle('新增节点');\n           app.grid.store.reload();\n           }\n        });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_nodes_closeWin#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.win.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"height":"180","layout":"fit","width":"540","closeAction":"hide","buttons":"app.Winbtns","buttonAlign":"center","dialog":"false","itemId":"win","modal":"true"},"children":[{"configs":{"frame":"true","style":"border-width:0px","border":"false","itemId":"form"},"children":[{"configs":{"hidden":"true","itemId":"NODE_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","bodyCls":"my-panel-no-border","layout":"column","border":"false","itemId":"panel1"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","width":"240","labelAlign":"right","itemId":"NODE_CODE","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_nodes_NODE_CODE#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","allowBlank":"false","width":"240","labelAlign":"right","itemId":"NODE_DESC","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_nodes_NODE_DESC#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px;padding-bottom:6px","bodyCls":"my-panel-no-border","layout":"column","border":"false","itemId":"panel11"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","width":"240","labelAlign":"right","itemId":"CONTEXT_PATH","fieldLabel":"<font color='red'>*<\/font>{#xip_conc_nodes_CONTEXT_PATH#}"},"events":{"afterrender":"var _tip='';\n_tip = '<font color=\"red\">格式示例:<\/br>http://www.xzsoft.cc:8090/xip <\/br>或者<\/br> https://www.xzsoft.cc:8090/xip<\/font>'; \nExt.QuickTips.init();\nExt.QuickTips.register({\ntarget : this.el,  \ntext : _tip});","beforerender":"  "},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"80","width":"240","minValue":"0","value":"0","labelAlign":"right","itemId":"MAX_CONC_COUNT","fieldLabel":"{#xip_conc_nodes_MAX_CONC_COUNT#}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"80","frame":"true","style":"border-width:0px","layout":"fit","itemId":"queryform","border":"false"},"children":[{"configs":{"title":"{#xip_conc_nodes_fieldset1#}","style":"padding-top:8px","collapsible":"true","layout":"column","itemId":"fieldset1"},"children":[{"configs":{"labelWidth":"120","width":"250","labelAlign":"right","itemId":"jdbm","fieldLabel":"{#xip_conc_nodes_jdbm#}"},"events":{"specialkey":"app.grid.store.load( {  params:{jdbm:app.jdbm.getValue() }} );"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#xip_conc_nodes_queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"app.grid.store.load( {  params:{jdbm:app.jdbm.getValue() }} );"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_nodes_resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.queryform.getForm().reset();\napp.grid.store.load();"},"children":[],"expanded":true,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xip/tools/conc/nodes/data/selectNodes"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#xip_conc_nodes_addBtn#}","itemId":"addBtn","iconCls":"application_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._win);\nwin.show();\n\napp.win.setTitle('{#xip_conc_nodes_add_title#}');\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_nodes_editBtn#}","itemId":"editBtn","iconCls":"table_edit_icon"},"events":{"click":"Wb.edit(app.grid,app.win);\napp.win.setTitle('{#xip_conc_nodes_edit_title#}');\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_conc_nodes_deleteBtn#}","itemId":"deleteBtn","iconCls":"application_delete_icon"},"events":{"click":"\nvar recs = app.grid.getSelection();\n\n\nif (!recs.length) {\n  Wb.warn('请选择需要删除的记录。');\n  return false ;\n}\n Wb.del(app.grid, {\n  url: 'm?xwl=xip/tools/conc/nodes/data/deleteNodes',\n  titleField: 'NODE_CODE',\n success: function (){\n   \n   Ext.Msg.alert('提示','删除成功');\n }\n \n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"hidden":"true","dataIndex":"NODE_ID","itemId":"nodeid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_NODE_CODE#}","width":"150","dataIndex":"NODE_CODE","itemId":"COLUMN_NODE_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_NODE_DESC#}","width":"200","dataIndex":"NODE_DESC","itemId":"COLUMN_NODE_DESC"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_CONTEXT_PATH#}","width":"220","dataIndex":"CONTEXT_PATH","itemId":"COLUMN_CONTEXT_PATH"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_MAX_CONC_COUNT#}","width":"80","dataIndex":"MAX_CONC_COUNT","itemId":"COLUMN_MAX_CONC_COUNT"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_NODE_IP#}","hidden":"true","width":"200","dataIndex":"NODE_IP","itemId":"COLUMN_NODE_IP"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_NODE_PORT#}","hidden":"true","width":"80","dataIndex":"NODE_PORT","itemId":"COLUMN_NODE_PORT"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_conc_nodes_IS_ENCRYPTED#}","hidden":"true","width":"80","dataIndex":"IS_ENCRYPTED","itemId":"COLUMN_IS_ENCRYPTED","renderer":"if(value=='Y'){\n\treturn '是';\n}else{\n\t\n   return '<font color=\"red\">否<\/font>';\n}"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}