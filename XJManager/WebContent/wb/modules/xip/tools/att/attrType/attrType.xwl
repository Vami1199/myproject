{"inframe":false,"title":"附件分类管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"title":"{#att_attrType_module_title#}","initScript":"com.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);","loginRequired":"false","loadJS":"ext","serverScript":"//三方语言,引入对应的json文件\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,'xip/tools/att/attrType/json/attrType');","itemId":"module"},"events":{"initialize":"  var curIndex=0;\n //删除附件分类 \n  var deljson='';\n  //当前分类ID \n  var catId=\"\";\n\nfunction getuuid() {\n var s = [];\n var hexDigits = \"0123456789abcdef\";\n for (var i = 0; i < 36; i++) {\n s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n }\n s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n s[8] = s[13] = s[18] = s[23] = \"-\";\n\nvar uuid = s.join(\"\");\n return uuid;\n}\n"},"children":[{"configs":{"itemId":"Winbtns"},"children":[{"configs":{"text":"{#att_attrType_save#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"if(app.proform.getForm().isValid()===false){\n  Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg1#}');\n  return;\n}\n//校验授权信息的合法性(附件服务器列表不分页,默认附件服务器只有一个<组织为空>，服务器地址、组织唯一性)\nvar _isValid = false;\nvar _allServerArray = [];\nvar _defaultServer = 0;\nvar _tmpStr = '';\nvar _isValiad = true;\napp.attrgrid.store.each(function(item){\n  if(Ext.isEmpty(item.data.ATT_SERVER_ID)){\n    _isValiad = false;\n    return false;\n  }\n  if(Ext.isEmpty(item.data.ORG_ID)){\n    _defaultServer = _defaultServer+1;\n  }else{\n     _tmpStr = item.data.ORG_ID;\n    _allServerArray.push(_tmpStr);\n  }\n});\nif(_isValiad === false){\n  Wb.warn('{#att_attrType_warn_msg1#}');\n  return false; \n}\nif(_defaultServer>1){\n  Wb.warn('{#att_attrType_warn_msg2#}');\n  return false;\n}\nvar _tmpArray = _allServerArray;\nvar _uniqueArray = Ext.Array.unique(_allServerArray);\nif(_tmpArray.length !== _uniqueArray.length){\n  Wb.warn('{#att_attrType_warn_msg3#}');\n  return false;\n}\n\n//from表单数据\n\nvar json = {\n  ATT_CAT_ID:app.ATT_CAT_ID.getValue(),\n  CAT_CODE:app.CAT_CODE.getValue(),\n  CAT_NAME:app.CAT_NAME.getValue(),\n  DESCRIPTION:app.DESCRIPTION.getValue(),\n  ENABLE_FLAG:app.ENABLE_FLAG.getValue(),\n  FILE_SIZE_LIMIT:app.FILE_SIZE_LIMIT.getValue()\n};\nvar opType = app.OP_TYPE.getValue();\n\nif(opType=='ADD'){\n    Wb.request({\n           url: 'm?xwl=xip/tools/att/attrType/newdata/insert', \n           params: json,\n           success: function() {\n             app.attrgrid.plugins[0].completeEdit();\n          if(app.attrgrid.store.getModifiedRecords().length===0 && app.attrgrid.store.getRemovedRecords().length===0){\n                app.OP_TYPE.setValue(\"_modified\");\n                Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#}');\n              }else{\n              app.attrgrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                    //设置编辑状态\n                   app.OP_TYPE.setValue(\"_modified\");\n                 \n                   Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#}');\n                       app.attrgrid.store.commitChanges();\n                        }\n                  }); \n\t\t\t\n          \n           }\n              app.grid.store.reload();  \n          }\n       });\n\n}else{\n \n Wb.request({\n           url: 'm?xwl=xip/tools/att/attrType/newdata/update', \n           params: json,\n           success: function() {\n             app.attrgrid.plugins[0].completeEdit();\n           if(app.attrgrid.store.getModifiedRecords().length===0 && app.attrgrid.store.getRemovedRecords().length===0){\n                 Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#}');\n              }else{\n             app.attrgrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n\t\t\t\t\tExt.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#');\n                     app.attrgrid.store.commitChanges();\n                        }\n                  });\n           }\n          app.grid.store.reload();\n           } \n        });\n\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#att_attrType_save_next#}","itemId":"savenextWin"},"events":{"click":"if(app.proform.getForm().isValid()===false){\n  Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg1#}');\n  return;\n}\n//校验授权信息的合法性(附件服务器列表不分页,默认附件服务器只有一个<组织为空>，服务器地址、组织唯一性)\nvar _isValid = false;\nvar _allServerArray = [];\nvar _defaultServer = 0;\nvar _tmpStr = '';\nvar _isValiad = true;\napp.attrgrid.store.each(function(item){\n  if(Ext.isEmpty(item.data.ATT_SERVER_ID)){\n    _isValiad = false;\n    return false;\n  }\n  if(Ext.isEmpty(item.data.ORG_ID)){\n    _defaultServer = _defaultServer+1;\n  }else{\n     _tmpStr = item.data.ORG_ID;\n    _allServerArray.push(_tmpStr);\n  }\n});\nif(_isValiad === false){\n  Wb.warn('{#att_attrType_warn_msg1#}');\n  return false; \n}\nif(_defaultServer>1){\n  Wb.warn('{#att_attrType_warn_msg2#}');\n  return false;\n}\nvar _tmpArray = _allServerArray;\nvar _uniqueArray = Ext.Array.unique(_allServerArray);\nif(_tmpArray.length !== _uniqueArray.length){\n  Wb.warn('{#att_attrType_warn_msg3#}');\n  return false;\n}\n\n//from表单数据\n\nvar json = {\n  ATT_CAT_ID:app.ATT_CAT_ID.getValue(),\n  CAT_CODE:app.CAT_CODE.getValue(),\n  CAT_NAME:app.CAT_NAME.getValue(),\n  DESCRIPTION:app.DESCRIPTION.getValue(),\n  ENABLE_FLAG:app.ENABLE_FLAG.getValue(),\n  FILE_SIZE_LIMIT:app.FILE_SIZE_LIMIT.getValue()\n};\nvar opType = app.OP_TYPE.getValue();\n\nif(opType=='ADD'){\n    Wb.request({\n           url: 'm?xwl=xip/tools/att/attrType/newdata/insert', \n           params: json,\n           success: function() {\n             app.attrgrid.plugins[0].completeEdit();\n          if(app.attrgrid.store.getModifiedRecords().length===0 && app.attrgrid.store.getRemovedRecords().length===0){\n               app.proform.getForm().reset();\n              app.OP_TYPE.setValue('ADD');\n              app.prowin.setTitle('{#att_attrType_add_type#}');\n              app.ATT_CAT_ID.setValue(getuuid());\n              app.attrgrid.store.reload({params:{ATT_CAT_ID : '-1'}});\n              Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#}');\n              }else{\n              app.attrgrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                 app.proform.getForm().reset();\n                    app.OP_TYPE.setValue('ADD');\n                    app.prowin.setTitle('{#att_attrType_add_type#}');\n                    app.ATT_CAT_ID.setValue(getuuid());\n                    app.attrgrid.store.load({params:{ATT_CAT_ID : '-1'}});\n                      Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#}');\n                      app.attrgrid.store.commitChanges();\n                        }\n                  }); \n\t\t\t\n          \n           }\n              app.grid.store.reload();  \n          }\n       });\n\n}else{\n \n Wb.request({\n           url: 'm?xwl=xip/tools/att/attrType/newdata/update', \n           params: json,\n           success: function() {\n             app.attrgrid.plugins[0].completeEdit();\n           if(app.attrgrid.store.getModifiedRecords().length===0 && app.attrgrid.store.getRemovedRecords().length===0){\n                    app.proform.getForm().reset();\n                    app.OP_TYPE.setValue('ADD');\n                    app.prowin.setTitle('{#att_attrType_add_type#}');\n                    app.ATT_CAT_ID.setValue(getuuid());\n                    app.attrgrid.store.load({params:{ATT_CAT_ID : '-1'}});\n                 Ext.Msg.alert('','{#att_attrType_prompt_msg2#}');\n              }else{\n             app.attrgrid.store.sync(\n                  {\n                    callback :function(){\n\t\t\t\n                    Wb.unmask();\n                      app.proform.getForm().reset();\n                    app.OP_TYPE.setValue('ADD');\n                    app.prowin.setTitle('{#att_attrType_add_type#}');\n                    app.ATT_CAT_ID.setValue(getuuid());\n                    app.attrgrid.store.load({params:{ATT_CAT_ID : '-1'}});\n\t\t\t\t\tExt.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg2#}');\n                      app.attrgrid.store.commitChanges();\n                        }\n                  });\n           }\n          app.grid.store.reload();\n           } \n        });\n\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#att_attrType_close#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.prowin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"itemId":"menu"},"children":[{"configs":{"itemId":"menu"},"children":[{"configs":{"height":"300","layout":"fit","width":"500","itemId":"tr"},"children":[{"configs":{"exportTitle":"false","columnLines":"true","forceFit":"true","itemId":"servercombo"},"events":{"beforeselect":"// app.ed_zj.setValue(record.get('VAL_SET_NAME'));\n\nvar id=record.get('SERVER_ID');\nvar _name =record.get('SERVER_NAME');\n\nvar recs = app.attrgrid.getSelectionModel().getSelection();\nrecs[0].set('SERVER_NAME',_name );\nrecs[0].set('ATT_SERVER_ID',id);\n\napp.menu.hide();"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xip/tools/att/attrType/data/selectServer","showMask":"false"},"events":{"load":"app.menu.showBy(app.COLUMN_SERVER_NAME);\napp.COLUMN_SERVER_NAME.focus(false,true);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#att_attrType_rowNum#}","width":"30","xtype":"rownumberer","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"SERVER_ID","hidden":"true","dataIndex":"SERVER_ID","itemId":"SERVER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_server_name#}","width":"150","dataIndex":"SERVER_NAME","itemId":"SERVER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_server_type#}","width":"150","dataIndex":"SERVER_TYPE","itemId":"SERVER_TYPE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_server_host#}","width":"150","dataIndex":"HOST","itemId":"HOST_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_server_port#}","width":"150","dataIndex":"PORT","itemId":"PORT_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"menu"}],"expanded":true,"type":"folder"},{"configs":{"itemId":"menu1"},"children":[{"configs":{"itemId":"menu1"},"children":[{"configs":{"height":"300","layout":"fit","width":"500","itemId":"tr"},"children":[{"configs":{"exportTitle":"false","columnLines":"true","forceFit":"true","itemId":"orgcombo"},"events":{"beforeselect":"// app.ed_zj.setValue(record.get('VAL_SET_NAME'));\n\nvar id=record.get('ORG_ID');\nvar _name =record.get('ORG_NAME');\n\nvar recs = app.attrgrid.getSelectionModel().getSelection();\nrecs[0].set('ORG_NAME',_name );\nrecs[0].set('ORG_ID',id);\n\napp.menu1.hide();"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xip/tools/att/attrType/newdata/orgList","showMask":"false"},"events":{"load":"app.menu1.showBy(app.COLUMN_ORG_NAME);\napp.COLUMN_ORG_NAME.focus(false,true);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#att_attrType_rowNum#}","width":"30","xtype":"rownumberer","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ORG_ID","hidden":"true","dataIndex":"ORG_ID","itemId":"COL_ORG_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_org_code#}","width":"120","dataIndex":"ORG_CODE","itemId":"COL_ORG_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_org_name#}","width":"150","dataIndex":"ORG_NAME","itemId":"COL_ORG_NAME","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"menu"}],"expanded":true,"type":"folder"},{"configs":{"height":"400","layout":"border","width":"700","closeAction":"hide","resizable":"true","buttons":"app.Winbtns","buttonAlign":"center","itemId":"prowin","border":"false","dialog":"false","modal":"true"},"children":[{"configs":{"region":"north","bodyStyle":"padding: 10px 10px 0px","tagConfigs":"trackResetOnLoad : true","frame":"true","autoScroll":"true","style":"border-width:0px","layout":"anchor","itemId":"proform"},"events":{"afterrender":"\n//app.appform.getForm().trackResetOnLoad= true;"},"children":[{"configs":{"hidden":"true","width":"250","itemId":"OP_TYPE","fieldLabel":"{#att_attrType_op_type#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"ATT_CAT_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"anchor:'100%'","autoScroll":"true","collapsible":"false","layout":"form","border":"false","itemId":"fieldset1"},"children":[{"configs":{"frame":"true","style":"border-width:0px","layout":"column","itemId":"panel1","border":"false"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","width":"280","labelAlign":"right","itemId":"CAT_CODE","fieldLabel":"<font color='red'>*<\/font>{#att_attrType_cat_code#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"130","width":"280","labelAlign":"right","itemId":"DESCRIPTION","fieldLabel":"{#att_attrType_cat_desc#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","layout":"column","itemId":"panel3","border":"false"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","width":"280","labelAlign":"right","itemId":"CAT_NAME","fieldLabel":"<font color='red'>*<\/font>{#att_attrType_cat_name#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"130","allowBlank":"false","width":"280","value":"Y","labelAlign":"right","pickList":"[['Y','{#att_attrType_isOpen#}'],['N','{#att_attrType_isClose#}']]","itemId":"ENABLE_FLAG","forceSelection":"true","fieldLabel":"{#att_attrType_enable#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","layout":"column","itemId":"panel2","border":"false"},"children":[{"configs":{"labelWidth":"120","width":"280","minValue":"0","labelAlign":"right","itemId":"FILE_SIZE_LIMIT","fieldLabel":"{#att_attrType_file_limit#}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","height":"300","itemId":"attrgrid","editable":"true"},"events":{"itemclick":"curIndex = index;"},"children":[{"configs":{"proxy":"{\ntype:\"ajax\",\napi: {\nread: 'm?xwl=xip/tools/att/attrType/newdata/secRead',\nupdate: 'm?xwl=xip/tools/att/attrType/newdata/secUpdate',\ncreate: 'm?xwl=xip/tools/att/attrType/newdata/secCreate',\ndestroy: 'm?xwl=xip/tools/att/attrType/newdata/secDestroy'\n},\nreader:{type:\"json\",root:\"rows\",totalProperty:\"total\"},\nlisteners:{\nexception:function(proxy,response,operation,options){\nWb.except(response.responseText);\n}\n}\n}","itemId":"store"},"events":{"beforesync":"(function(){\n Wb.mask();\n\n} )();\n\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#att_attrType_add_grant#}","itemId":"addGrant","iconCls":"insert_icon"},"events":{"click":"if(app.proform.getForm().isValid()===false){\n  Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_prompt_msg1#}');\n  return;\n}\nvar e=app.attrgrid.plugins[0],index=app.attrgrid.store.getCount()===0?0:app.attrgrid.store.getCount();\ne.completeEdit();\n app.attrgrid.store.insert(index,{});\n app.attrgrid.store.getAt(index).set('ENABLE_FLAG','Y');\n app.attrgrid.store.getAt(index).set('CAT_SEC_ID',getuuid());\n app.attrgrid.store.getAt(index).set('ATT_CAT_ID',app.ATT_CAT_ID.getValue());\ne.startEditByPosition({row:index,column:2});\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#att_attrType_remove_grant#}","itemId":"delGrant","iconCls":"remove_icon"},"events":{"click":"var m = app.attrgrid.getSelectionModel(), s = m.getSelection(),i,j;\n       app.attrgrid.plugins[0].completeEdit();\n\n      i=app.attrgrid.store.indexOf(s[0]);\n      app.attrgrid.store.remove(s);\n      j = app.attrgrid.store.getCount() - 1;\n      if (i > j)\n        i = j;\n      if (i > -1)\n        m.select(i);\n      \n    \n      \n  \n  \n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"CAT_SEC_ID","hidden":"true","dataIndex":"CAT_SEC_ID","itemId":"COLUMN_CAT_SEC_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_org#}","hidden":"true","width":"80","dataIndex":"ORG_ID","itemId":"COLUMN_ORG_ID"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#att_attrType_server_id#}","hidden":"true","width":"80","dataIndex":"ATT_SERVER_ID","itemId":"COLUMN_ATT_SERVER_ID"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#att_attrType_server#}","width":"150","dataIndex":"SERVER_NAME","itemId":"COLUMN_SERVER_NAME"},"children":[{"configs":{"queryDelay":"160","queryMode":"remote","itemId":"editor"},"events":{"change":"if(Ext.isEmpty(app.sserverCombo.getValue())){\n   var currentRecord = app.attrgrid.store.getAt(curIndex);\n   currentRecord.set('SERVER_NAME','');\n   currentRecord.set('ATT_SERVER_ID','');\n}","beforequery":"app.servercombo.store.load();"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#att_attrType_org#}","width":"200","dataIndex":"ORG_NAME","itemId":"COLUMN_ORG_NAME"},"children":[{"configs":{"queryDelay":"160","queryMode":"remote","itemId":"editor"},"events":{"change":"if(Ext.isEmpty(app.orgcombo.getValue())){\n   var currentRecord = app.attrgrid.store.getAt(curIndex);\n   currentRecord.set('ORG_NAME','');\n   currentRecord.set('ORG_ID','');\n}","beforequery":"app.orgcombo.store.load();\n"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#att_attrType_enable#}","width":"180","dataIndex":"ENABLE_FLAG","itemId":"COLUMN_ENABLE_FLAG","renderer":"if(value === \"Y\"){\n  return '{#att_attrType_isOpen#}';\n}else if(value === \"N\"){\n  return '{#att_attrType_isClose#}';\n}else{\n  return value;\n} "},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","displayField":"NAME","width":"280","valueField":"CODE","labelAlign":"right","pickList":"[['Y','att_attrType_isOpen'],['N','att_attrType_isClose']]","itemId":"editor","forceSelection":"true"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"80","frame":"true","style":"border-width:0px","layout":"fit","itemId":"queryform","border":"false"},"children":[{"configs":{"title":"{#att_attrType_queryCon#}","style":"padding-top:8px","collapsible":"true","layout":"column","itemId":"fieldset1"},"children":[{"configs":{"labelWidth":"150","width":"250","labelAlign":"right","itemId":"fllbm","fieldLabel":"{#att_attrType_cat_code_name#}"},"events":{"specialkey":"app.grid.store.load( {  params:{fllbm:app.fllbm.getValue() }} );"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#att_attrType_query#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"app.grid.store.load( {  params:{fllbm:app.fllbm.getValue() }} );"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#att_attrType_reset#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.fllbm.setValue('');\napp.grid.store.load();\n"},"children":[],"expanded":true,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"grid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/tools/att/attrType/newdata/query"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#att_attrType_add#}","itemId":"addBtn","iconCls":"application_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._prowin);\nwin.show();\napp.attrgrid.store.load();\napp.prowin.setTitle('{#att_attrType_add_type#}');\napp.OP_TYPE.setValue('ADD');\napp.ATT_CAT_ID.setValue(getuuid());\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#att_attrType_edit#}","itemId":"editBtn","iconCls":"table_edit_icon"},"events":{"click":"//var win = new Ext.window.Window(app._win);\nWb.edit(app.grid,app.prowin);\napp.prowin.setTitle('{#att_attrType_edit_type#}');\napp.attrgrid.store.load({params:{ATT_CAT_ID : app.ATT_CAT_ID.getValue()}});\napp.OP_TYPE.setValue('_modified');\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#att_attrType_delete#}","itemId":"deleteBtn","iconCls":"application_delete_icon"},"events":{"click":"\nvar rows = app.grid.getSelection();\n\n\nif (!rows.length) {\n  Wb.warn('{#att_attrType_delete_record#}');\n  return false ;\n}\n\nExt.Msg.confirm('{#att_attrType_prompt#}','{#att_attrType_delete_select_record#}',function(a){\n    if(a=='yes'){\n    \n       var idList = \"\" ;\n      Ext.each(rows,function(r){\n        idList +='\\''+r.data.ATT_CAT_ID+'\\',';\n      });\n      idList = idList.substring(0,idList.length-1);\n    Wb.request({\n        url: 'm?xwl=xip/tools/att/attrType/newdata/delcat', \n           params:  {ids:idList},\n   \n           success: function() {\n          app.grid.store.reload();\n             Ext.Msg.alert('{#att_attrType_prompt#}','{#att_attrType_delete_success#}');\n           }\n    \n    });\n    }\n  });\n "},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ATT_CAT_ID","hidden":"true","dataIndex":"ATT_CAT_ID","itemId":"COLUMN_ATT_CAT_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_cat_code#}","width":"150","dataIndex":"CAT_CODE","itemId":"COLUMN_CAT_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_cat_name#}","width":"200","dataIndex":"CAT_NAME","itemId":"COLUMN_CAT_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_cat_desc#}","width":"300","dataIndex":"DESCRIPTION","itemId":"COLUMN_OPERATION"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#att_attrType_enable#}","width":"120","dataIndex":"ENABLE_FLAG","itemId":"COLUMN_ENABLE_FLAG","renderer":"if(value === \"Y\"){\n  return '{#att_attrType_isOpen#}';\n}else if(value === \"N\"){\n  return \"<font color='red'>\"+'{#att_attrType_isClose#}'+\"<\/font>\";\n}else{\n  return value;\n} "},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}