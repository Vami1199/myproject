{"inframe":false,"title":"平台数据移植定义","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);","loginRequired":"false","serverScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/tools/transfer/json/transDefined\");","itemId":"module"},"children":[{"configs":{"itemId":"newWinBtns"},"children":[{"configs":{"text":"{#xip_tools_defined_saveBtn#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"if(!app.form1.getForm().isValid()){\n  Wb.warn('{#xip_tools_defined_msgincomplete#}');\n  return false;\n}\nif(Ext.isEmpty(app.UPDATE_SQL.getValue()) && Ext.isEmpty(app.INSERT_SQL.getValue())){\n  Wb.warn('{#xip_tools_defined_sqlincomplete#}');\n  return false;\n}\nvar Ieid = app.IE_ID.getValue();\nvar json = {\n  IE_ID : '',\n  IE_CODE : app.IE_CODE.getValue(),\n  IE_NAME : app.IE_NAME.getValue(),\n  IE_TYPE : app.IE_TYPE.getValue(),\n  SEQ : app.SEQ.getValue(),\n  SELECT_SQL : app.SELECT_SQL.getValue(),\n  INSERT_SQL : app.INSERT_SQL.getValue(),\n  UPDATE_SQL : app.UPDATE_SQL.getValue()\n};\n\nif(Ieid===''){//新增\n  var isExistFlag = false;\n  Wb.request({\n    url:'m?xwl=xip/tools/transfer/transDefined/DATA/getUUid',\n    success:function(response){\n      var temp = response.responseText;\n      var resultJson = Wb.decode(temp);\n      json.IE_ID = resultJson.uuid;\n      app.IE_ID.setValue(json.IE_ID);\n      //insertajax.request(json);\n      Wb.request({\n        url:'m?xwl=xip/tools/transfer/transDefined/DATA/insertGrid',\n        params:json,\n        success:function(){\n          app.definedGrid.store.load();\n          Wb.info('{#xip_tools_defined_savesuc#}');\n        },\n        failure:function(){\n          app.IE_ID.setValue(\"\");\n        }\n      });\n    }\n  });\n  \n}else{//更新\n  json.IE_ID = Ieid;\n  Wb.request({\n        url:'m?xwl=xip/tools/transfer/transDefined/DATA/updateGrid',\n        params:json,\n        success:function(){\n          app.definedGrid.store.load();\n          Wb.info('{#xip_tools_defined_savesuc#}');\n        }\n      });\n}\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_tools_defined_saveAndMore#}","itemId":"saveAndMore","iconCls":"save_all_icon"},"events":{"click":"if(!app.form1.getForm().isValid()){\n  Wb.warn('请填写所有必填项！');\n  return false;\n}\nif(Ext.isEmpty(app.UPDATE_SQL.getValue()) && Ext.isEmpty(app.INSERT_SQL.getValue())){\n  Wb.warn('插入SQL和更新SQL至少填写一个！');\n  return false;\n}\nvar Ieid = app.IE_ID.getValue();\nvar json = {\n  IE_ID : '',\n  IE_CODE : app.IE_CODE.getValue(),\n  IE_NAME : app.IE_NAME.getValue(),\n  IE_TYPE : app.IE_TYPE.getValue(),\n  SEQ : app.SEQ.getValue(),\n  SELECT_SQL : app.SELECT_SQL.getValue(),\n  INSERT_SQL : app.INSERT_SQL.getValue(),\n  UPDATE_SQL : app.UPDATE_SQL.getValue()\n};\n\nif(Ieid===''){//新增\n  var isExistFlag = false;\n  Wb.request({\n    url:'m?xwl=xip/tools/transfer/transDefined/DATA/getUUid',\n    success:function(response){\n      var temp = response.responseText;\n      var resultJson = Wb.decode(temp);\n      json.IE_ID = resultJson.uuid;\n      app.IE_ID.setValue(json.Ieid);\n      //insertajax.request(json);\n      Wb.request({\n        url:'m?xwl=xip/tools/transfer/transDefined/DATA/insertGrid',\n        params:json,\n        success:function(){\n          app.definedGrid.store.load();\n          Wb.info('保存成功!');\n          app.newWin.setTitle('新增');\n          app.form1.form.reset();\n        },\n        failure:function(){\n          app.IE_ID.setValue(\"\");\n        }\n      });\n    }\n  });\n  \n}else{//更新\n  json.IE_ID = Ieid;\n  Wb.request({\n        url:'m?xwl=xip/tools/transfer/transDefined/DATA/updateGrid',\n        params:json,\n        success:function(){\n          app.definedGrid.store.load();\n          Wb.info('保存成功!');\n          app.newWin.setTitle('新增');\n          app.form1.form.reset();\n        }\n      });\n}\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_tools_defined_closeBtn#}","itemId":"closeBtn","iconCls":"cancel_icon"},"events":{"click":"app.newWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"height":"360","layout":"border","width":"680","closeAction":"hide","resizable":"false","buttonAlign":"center","buttons":"app.newWinBtns","itemId":"newWin","dialog":"false","modal":"true"},"children":[{"configs":{"region":"center","frame":"true","height":"400","style":"border-width:0px","itemId":"form1","border":"false"},"children":[{"configs":{"style":"border-width:0px","layout":"anchor","itemId":"fieldset1"},"children":[{"configs":{"frame":"true","height":"25","style":"border-width:0px","hidden":"true","layout":"column","itemId":"hideFiledPanel","border":"false"},"children":[{"configs":{"itemId":"IE_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"anchor:'100%'","frame":"true","height":"30","style":"border-width:0px","layout":"column","itemId":"panel2","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","width":"300","labelAlign":"right","itemId":"IE_CODE","fieldLabel":"<font color='red'>*<\/font>{#xip_tools_defined_tabCode#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","allowBlank":"false","width":"300","labelAlign":"right","itemId":"IE_NAME","fieldLabel":"<font color='red'>*<\/font>{#xip_tools_defined_tabName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"anchor:'100%'","height":"30","frame":"true","style":"border-width:0px","layout":"column","itemId":"panel3","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","width":"300","labelAlign":"right","itemId":"SEQ","fieldLabel":"<font color='red'>*<\/font>{#xip_tools_defined_order#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","allowBlank":"false","width":"300","value":"U","labelAlign":"right","pickList":"[['P','{#xip_tools_defined_sys#}'],['U','{#xip_tools_defined_def#}']]","itemId":"IE_TYPE","fieldLabel":"<font color='red'>*<\/font>{#xip_tools_defined_tabType#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"anchor:'100%'","frame":"true","style":"border-width:0px","layout":"column","itemId":"selectPanel","border":"false"},"children":[{"configs":{"labelWidth":"80","height":"80","allowBlank":"false","width":"600","labelAlign":"right","itemId":"SELECT_SQL","fieldLabel":"<font color='red'>*<\/font>{#xip_tools_defined_qry_sql#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"anchor:'100%'","frame":"true","style":"border-width:0px","layout":"column","itemId":"insertPanel","border":"false"},"children":[{"configs":{"labelWidth":"80","width":"600","labelAlign":"right","itemId":"INSERT_SQL","fieldLabel":"{#xip_tools_defined_ins_sql#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"anchor:'100%'","frame":"true","style":"border-width:0px","layout":"column","itemId":"updatePanel","border":"false"},"children":[{"configs":{"labelWidth":"80","width":"600","labelAlign":"right","itemId":"UPDATE_SQL","fieldLabel":"{#xip_tools_defined_upd_sql#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","height":"80","frame":"true","style":"border-width:0px","layout":"fit","itemId":"definedForm","border":"false"},"children":[{"configs":{"title":"{#xip_tools_defined_fieldset#}","style":"padding-top:8px","layout":"column","itemId":"fieldset1"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"bm","fieldLabel":"{#xip_tools_defined_tabCode#}"},"events":{"specialkey":"app.definedGrid.store.load();\n"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"mc","fieldLabel":"{#xip_tools_defined_tabName#}"},"events":{"specialkey":"app.definedGrid.store.load();"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","labelAlign":"right","pickList":"[['P','{#xip_tools_defined_sys#}'],['U','{#xip_tools_defined_def#}']]","itemId":"blx","fieldLabel":"{#xip_tools_defined_tabType#}"},"events":{"select":"app.definedGrid.store.load();"},"children":[],"expanded":true,"type":"combo"},{"configs":{"text":"{#xip_tools_defined_queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"5"},"events":{"click":"app.definedGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_tools_defined_resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"15"},"events":{"click":"Wb.reset(app.definedForm);\napp.definedGrid.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"definedGrid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"pageSize":"25","itemId":"store","autoLoad":"true","url":"m?xwl=xip/tools/transfer/transDefined/DATA/selectGrid"},"events":{"beforeload":"store.getProxy().extraParams.bm = app.bm.getValue();\nstore.getProxy().extraParams.mc = app.mc.getValue();\nstore.getProxy().extraParams.blx = app.blx.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#xip_tools_defined_addBtn#}","itemId":"addBtn","iconCls":"record_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._newWin);\nwin.show();\nwin.setTitle('{#xip_tools_defined_addBtn#}');"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_tools_defined_editBtn#}","itemId":"editBtn","iconCls":"record_edit_icon"},"events":{"click":"var rows = app.definedGrid.getSelection();\nif (rows.length != 1) {\n  Ext.MessageBox.alert('提示', '请选择一条数据!');\n  return;\n} else {\n  Wb.edit(app.definedGrid,app.newWin);\n  app.newWin.setTitle('{#xip_tools_defined_editBtn#}');\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#xip_tools_defined_deleteBtn#}","itemId":"deleteBtn","iconCls":"record_delete_icon"},"events":{"click":"var rows = app.definedGrid.getSelectionModel().getSelection();\nrecord = rows[0];\n\nif(rows.length===0){\n  Ext.Msg.alert('{#xip_tools_defined_tip#}','{#xip_tools_defined_selrow#}');\n  return false ;\n}else{\n  Ext.Msg.confirm('{#xip_tools_defined_tip#}','{#xip_tools_defined_okdelete#}',function(a){\n    if(a=='yes'){\n       Wb.request({\n         url:'m?xwl=xip/tools/transfer/transDefined/DATA/deleteGrid',\n         params: Wb.apply({\n           destroy: Wb.getData(rows)\n         }),\n         success:function(){\n           Wb.info('{#xip_tools_defined_deleteok#}');\n           Wb.remove(app.definedGrid,rows);\n         }\n       });\n    }else{\n      return false ;\n    }\n  });\n}"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"xtype":"rownumberer","align":"center","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"IE_ID","hidden":"true","dataIndex":"IE_ID","itemId":"IE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_tabCode#}","width":"200","dataIndex":"IE_CODE","itemId":"IE_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_tabName#}","width":"200","dataIndex":"IE_NAME","itemId":"IE_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_tabType#}","width":"100","dataIndex":"IE_TYPE","itemId":"IE_TYPE_COL","renderer":"if(value === \"P\"){\n  return \"{#xip_tools_defined_sys#}\";\n}else if(value === \"U\"){\n  return \"{#xip_tools_defined_def#}\";\n}else{\n  return value;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_ins_sql#}","width":"250","dataIndex":"INSERT_SQL","itemId":"INSERT_SQL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_qry_sql#}","width":"250","dataIndex":"SELECT_SQL","itemId":"SELECT_SQL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_upd_sql#}","width":"250","dataIndex":"UPDATE_SQL","itemId":"UPDATE_SQL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#xip_tools_defined_order#}","dataIndex":"SEQ","itemId":"SEQ_SQL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}