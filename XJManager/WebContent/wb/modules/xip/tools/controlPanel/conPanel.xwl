{"inframe":false,"title":"控制面板","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","initScript":"var contextPath = request.getContextPath();\nrequest.setAttribute('contextPath',contextPath);\n\nvar godMoadl = request.getSession().getAttribute(\"XzSessionVars\").get('godMode');\nrequest.setAttribute(\"godMoadl\",godMoadl);\nrequest.setAttribute('code',request.getParameter('code'));","itemId":"module","head":"<!-- <script>\n  function init(){\n   \n     window.location.href = '{#contextPath#}'+'/m?xwl=xip/tools/controlPanel/check';\n}\n<\/script> -->"},"events":{"finalize":"if('{#godMoadl#}' == 'Y'){\n  app.godImg.setSrc('xip/icon/god_run.jpg');\n}else{\n  app.godImg.setSrc('xip/icon/god_stop.jpg');\n}"},"children":[{"configs":{"title":"微信测试窗口","frame":"false","height":"130","closable":"false","layout":"form","width":"380","closeAction":"hide","itemId":"wxWin","border":"false","dialog":"true"},"events":{"ok":"if(Ext.isEmpty(app.toUsers.getValue()) || Ext.isEmpty(app.content.getValue())){\n   Wb.warning('请填写所有必填项！');\n   return fasle;\n}\nExt.Msg.wait('消息发送中,请稍后...');\nExt.Ajax.request({ \n  url:'{#contextPath#}'+'/deptTreeAction.do?method=wxConnectTest',\n  params: { \n       toUserName:app.toUsers.getValue(),\n       content:app.content.getValue()    \n         },\t\t\n  method: 'POST',\t\t\n  success: function(response, options) { // 回调函数有2个参数\n    var msgBody = Ext.decode(response.responseText);\n    Ext.Msg.alert('',msgBody.msg);\n    app.wxWin.close();\n    startTest();\n  },\n  failure: function(response, options) {\n    var msgBody = Ext.decode(response.responseText);\n    Ext.Msg.alert('',msgBody.msg);\n  }\n});"},"children":[{"configs":{"labelWidth":"80","emptyText":"请填写接收人的微信企业号通讯录账号","labelAlign":"right","itemId":"toUsers","fieldLabel":"<font color='red'>*<\/font>消息接收人"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"content","fieldLabel":"<font color='red'>*<\/font>消息内容"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"window"},{"configs":{"itemId":"checkWinBtn"},"children":[{"configs":{"text":"确定","textAlign":"center","itemId":"checkBtn","iconCls":"ok_icon"},"events":{"click":"var pwd = app.pwd.getValue();\nif(Ext.isEmpty(pwd)){\n  Wb.info('请输入口令！');\n}else{\n  Ext.Ajax.request({ \n  url:'{#contextPath#}'+'/platformAction.do?method=controlPanelCheck',\n  params: { \n       pwd:pwd   \n         },\t\t\n  method: 'POST',\t\t\n  success: function(response, options) { \n    var msg = Ext.decode(response.responseText);\n    if(msg.flag==\"1\"){\n      Wb.info('口令错误！');\n    }else{\n      app.checkWins.hide();\n    }\n  },\n  failure: function(response, options) {\n    Wb.info(\"系统异常！\");\n  }\n});\n  \n}\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"autoShow":"true","title":"口令窗口","height":"130","closable":"false","width":"240","layout":"border","buttonAlign":"center","buttons":"app.checkWinBtn","itemId":"checkWins","dialog":"false","modal":"true"},"children":[{"configs":{"region":"center","height":"100","frame":"true","style":"border-width:0px;","width":"100","itemId":"form1","border":"false"},"children":[{"configs":{"labelWidth":"60","style":"margin-top:20px;margin-right:25px","inputType":"password","labelAlign":"right","itemId":"pwd","fieldLabel":"口令"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"form"}],"expanded":true,"type":"window"},{"configs":{"layout":"fit","itemId":"viewport1"},"events":{"afterrender":"//app.checkWins.show();"},"children":[{"configs":{"frame":"true","height":"798","layout":"absolute","width":"1473","columnWidth":".5","itemId":"btnsPanel"},"children":[{"configs":{"height":"40","width":"336","columnWidth":".5","itemId":"godPanel","y":"24","x":"32"},"children":[],"expanded":false,"type":"panel"},{"configs":{"text":"上帝模式：","height":"22","width":"74","itemId":"label1","y":"32","x":"96"},"children":[],"expanded":false,"type":"label"},{"configs":{"text":"开启","height":"22","width":"56","itemId":"enableGod","y":"32","x":"216"},"events":{"click":"Ext.Msg.confirm('提示','确定开启上帝模式?',function(a){\n  if(a=='yes'){\n    Ext.Ajax.request({\n      url : '{#contextPath#}' +'/platformAction.do?method=openGodModal',\n      //params:{},\n      method: 'POST',\n      success: function(response,options){\n        Ext.Msg.alert('提示','已经开启上帝模式!');\n        app.godImg.setSrc('xip/icon/god_run.jpg');\n        \n        var win = window;\n        while(win != win.parent){\n           win = win.parent;\n        }\n        \n        win.location.href = '{#contextPath#}';\n      },\n      failure: function(response,options){\n        Ext.Msg.alert('错误','服务器没有响应');\n      }\n    });\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"关闭","height":"22","width":"56","itemId":"disableGod","y":"32","x":"280"},"events":{"click":"Ext.Msg.confirm('提示','确定关闭上帝模式?',function(a){\n  if(a=='yes'){\n    Ext.Ajax.request({\n      url : '{#contextPath#}' +'/platformAction.do?method=closeGodModal',\n      //params:{},\n      method: 'POST',\n      success: function(response,options){\n        Ext.Msg.alert('提示','已经关闭上帝模式!');\n        app.godImg.setSrc('xip/icon/god_stop.jpg');\n        \n        var win = window;\n        while(win != win.parent){\n           win = win.parent;\n        }\n        \n        win.location.href = '{#contextPath#}';\n      },\n      failure: function(response,options){\n        Ext.Msg.alert('错误','服务器没有响应');\n      }\n    });\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"height":"40","width":"336","columnWidth":".5","itemId":"sysPanel","y":"80","x":"32"},"children":[],"expanded":false,"type":"panel"},{"configs":{"text":"系统参数：","height":"22","width":"74","itemId":"label2","y":"88","x":"96"},"children":[],"expanded":false,"type":"label"},{"configs":{"text":"刷新","height":"22","width":"56","itemId":"refreshSys","y":"88","x":"216"},"events":{"click":"Ext.Msg.confirm('提示','确定刷新系统参数?',function(a){\n  if(a=='yes'){\n    var win = window;\n    while(win != win.parent){\n       win = win.parent;\n    }\n    win.location.href = '{#contextPath#}' + '/platformAction.do?method=reloadSysParams&op=GHOST';\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"height":"40","width":"336","columnWidth":".5","itemId":"sysConfigs","y":"136","x":"32"},"children":[],"expanded":false,"type":"panel"},{"configs":{"text":"系统配置：","height":"22","width":"74","itemId":"label3","y":"144","x":"96"},"children":[],"expanded":false,"type":"label"},{"configs":{"text":"刷新","height":"22","width":"56","itemId":"refreshConfigs","y":"144","x":"216"},"events":{"click":"Ext.Msg.confirm('提示','确定刷新系统配置?',function(a){\n  if(a=='yes'){\n    var win = window;\n    while(win != win.parent){\n       win = win.parent;\n    }\n    win.location.href = '{#contextPath#}' + '/platformAction.do?method=reloadXipConfig&op=GHOST';\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"height":"30","width":"30","itemId":"godImg","y":"29","x":"48"},"children":[],"expanded":false,"type":"image"},{"configs":{"height":"48","width":"336","columnWidth":".5","itemId":"wxConnect","y":"192","x":"32"},"children":[],"expanded":false,"type":"panel"},{"configs":{"text":"微信测试","height":"22","width":"90","itemId":"wxTest","y":"200","x":"216"},"events":{"click":"app.wxWin.show();\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"微信测试：","height":"22","width":"74","itemId":"label4","y":"200","x":"96"},"children":[],"expanded":false,"type":"label"},{"configs":{"height":"30","width":"30","src":"xip/icon/wx02.png","itemId":"image1","y":"200","x":"48"},"children":[],"expanded":false,"type":"image"},{"configs":{"height":"40","width":"336","columnWidth":".5","itemId":"dbExplor","y":"248","x":"32"},"children":[],"expanded":false,"type":"panel"},{"configs":{"text":"数据库浏览器：","height":"22","width":"100","itemId":"label5","y":"256","x":"96"},"children":[],"expanded":false,"type":"label"},{"configs":{"text":"打开","height":"22","width":"56","itemId":"open","y":"256","x":"216"},"events":{"click":"window.location.href = 'm?xwl=xip/pub/usertable/dbe';"},"children":[],"expanded":false,"type":"button"},{"configs":{"height":"40","width":"536","columnWidth":".5","itemId":"textEmail","y":"304","x":"32"},"children":[],"expanded":false,"type":"panel"},{"configs":{"text":"邮件测试：","height":"22","width":"74","itemId":"label41","y":"312","x":"96"},"children":[],"expanded":false,"type":"label"},{"configs":{"height":"22","width":"248","itemId":"email","y":"312","x":"216"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"测试","height":"22","width":"56","itemId":"btnTestEamil","y":"312","x":"488"},"events":{"click":"if(Ext.isEmpty(app.email.getValue())){\n  Wb.toast('请输入邮箱地址');\n}else{\n  Ext.Ajax.request({\n    url : '{#contextPath#}' +'/platformAction.do?method=testMail',\n    params:{'mail': app.email.getValue()},\n    method: 'POST',\n    success: function(response,options){\n      var resp = Ext.JSON.decode(response.responseText);\n      Wb.toast(resp.msg);\n    },\n    failure: function(response,options){\n      Ext.Msg.alert('错误','服务器没有响应');\n    }\n  });\n}"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}