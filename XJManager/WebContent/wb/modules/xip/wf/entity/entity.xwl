{"inframe":false,"title":"实体管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);\n//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/wf/entity/json/wf_entity\");","itemId":"module"},"events":{"initialize":"function getuuid() {\n var s = [];\n var hexDigits = \"0123456789abcdef\";\n for (var i = 0; i < 36; i++) {\n s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n }\n s[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n s[8] = s[13] = s[18] = s[23] = \"-\";\n\nvar uuid = s.join(\"\");\n return uuid;\n}"},"children":[{"configs":{"maximized":"false","title":"{#wf_entity_xzst#}","layout":"fit","width":"700","closeAction":"hide","buttonAlign":"center","dialog":"false","itemId":"entityWin","modal":"true","maximizable":"true"},"children":[{"configs":{"frame":"true","style":"border-width:0px","layout":"form","margin":"10 20 10 0","border":"false","itemId":"form1"},"children":[{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"e_appId","fieldLabel":"应用id","disabled":"true"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"e_entityId","fieldLabel":"实体ID","disabled":"true"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"130","allowBlank":"false","labelAlign":"right","itemId":"e_entityCode","fieldLabel":"<font color=red>*<\/font>{#wf_entity_e_entityCode#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"130","allowBlank":"false","labelAlign":"right","itemId":"e_entityName","fieldLabel":"<font color=red>*<\/font>{#wf_entity_e_entityName#}"},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"130","labelAlign":"right","itemId":"e_entityDesc","fieldLabel":"{#wf_entity_e_entityDesc#}"},"children":[],"expanded":false,"type":"textarea"},{"configs":{"labelWidth":"130","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"e_cbxFuncType","forceSelection":"true","fieldLabel":"{#wf_entity_e_cbxFuncType#}"},"events":{"select":"var _funcType = app.e_cbxFuncType.getValue() ;\nif(_funcType === null || _funcType === \"\"){\n   app.e_cbxFuncName.setValue();\n   app.e_cbxFuncName.disable();\n}else{\n    app.e_cbxFuncName.enable();\n}\napp.e_cbxFuncName.setValue();"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/entity/data/getFuncType"},"events":{"load":"Ext.define('funcModel', {  \n    extend: 'Ext.data.Model',  \n    fields: [  \n        {name: 'CODE'},  \n        {name: 'NAME'}\n     ]  \n});\nvar r = Ext.create('funcModel', {\n  'CODE':'', \n  'NAME':'{#wf_entity_pleaseSelect#}'\n});\n\nstore.insert(0,r);\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"labelWidth":"130","height":"120","labelAlign":"right","itemId":"e_cbxFuncName","fieldLabel":"{#wf_entity_e_cbxFuncName#}","disabled":"true"},"children":[],"expanded":false,"type":"textarea"},{"configs":{"labelWidth":"130","height":"120","labelAlign":"right","itemId":"authUserCls","fieldLabel":"{#wf_auth_cls#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":false,"type":"form"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#wf_entity_saveWin#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"var _entityId = app.e_entityId.getValue();\nvar _entityCode = app.e_entityCode.getValue() ;\nvar _entityName = app.e_entityName.getValue();\nvar _e_entityDesc = app.e_entityDesc.getValue();\nvar _e_cbxFuncType = app.e_cbxFuncType.getValue();\nvar _e_cbxFuncName = app.e_cbxFuncName.getValue();\nvar _authUserCls = app.authUserCls.getValue() ;\n\nif(_entityCode === null || _entityCode === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请录入业务实体编码!\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qlrywstbm#}\") ;\n  return false ;\n}\nif(_entityName === null || _entityName === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请录入业务实体名称!\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qlrywstmc#}\") ;\n  return false ;\n}\nvar json = {\n  'entityId'      : \"\",\n  'e_appId'       : app.cbx4App.getValue(),\n  'e_entityCode'  : _entityCode,\n  'e_entityName'  : _entityName,\n  'e_entityDesc'  : _e_entityDesc,\n  'e_cbxFuncType' : _e_cbxFuncType,\n  'e_cbxFuncName' : _e_cbxFuncName,\n  'e_authUserCls' : _authUserCls\n};\nif(_entityId === \"\" || _entityId === null){\n \n   json.entityId = getuuid(); \n  \n   Wb.request({\n           url: 'm?xwl=xip/wf/entity/data/insertEntity', \n           params: json,\n           success: function() {\n             app.entitygrid.store.load({params:{appid:app.cbx4App.getValue()}}); \n             app.entityWin.hide();\n//              Ext.Msg.alert(\"提示\",\"保存实体信息成功\");\n             Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_bcstxxcg#}\");\n          }\n       });\n}else{\n    json.entityId=_entityId;\n     Wb.request({\n           url: 'm?xwl=xip/wf/entity/data/updateEntity', \n           params: json,\n           success: function() {\n             app.entitygrid.store.load({params:{appid:app.cbx4App.getValue()}}); \n             app.entityWin.hide();\n//              Ext.Msg.alert(\"提示\",\"保存实体信息成功\");\n             Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_bcstxxcg#}\");\n           } \n   });\n}\n\n \n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_closeWin#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.entityWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":true,"type":"window"},{"configs":{"title":"{#wf_entity_xzstsx#}","height":"400","layout":"fit","width":"550","closeAction":"hide","buttonAlign":"center","dialog":"false","itemId":"attrWin","modal":"true"},"children":[{"configs":{"frame":"true","style":"border-width:0px","border":"false","itemId":"form2"},"children":[{"configs":{"labelWidth":"100","hidden":"true","width":"450","labelAlign":"right","itemId":"a_attr_id","fieldLabel":"属性id","disabled":"true"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","hidden":"true","width":"450","labelAlign":"right","itemId":"a_entity_id","fieldLabel":"实体ID","disabled":"true"},"children":[],"expanded":false,"type":"text"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","width":"450","labelAlign":"right","itemId":"a_attr_code","fieldLabel":"<font color=red>*<\/font>{#wf_entity_a_attr_code#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel11"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","width":"450","labelAlign":"right","itemId":"a_attr_name","fieldLabel":"<font color=red>*<\/font>{#wf_entity_a_attr_name#}"},"children":[],"expanded":true,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel12"},"children":[{"configs":{"labelWidth":"120","width":"450","value":"static","pickList":"[['static','{#wf_entity_static#}'],['dynamic','{#wf_entity_dynamic#}']]","labelAlign":"right","itemId":"a_attr_category","forceSelection":"true","fieldLabel":"{#wf_entity_a_attr_category#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel13"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","width":"450","pickList":"[['1','{#wf_entity_1#}'],['2','{#wf_entity_2#}'],['3','{#wf_entity_3#}']]","labelAlign":"right","itemId":"a_attr_dataType","forceSelection":"true","fieldLabel":"<font color=red>*<\/font>{#wf_entity_a_attr_dataType#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel14"},"children":[{"configs":{"labelWidth":"120","displayField":"NAME","width":"450","valueField":"CODE","labelAlign":"right","itemId":"a_attr_funcType","forceSelection":"true","fieldLabel":"{#wf_entity_a_attr_funcType#}"},"events":{"select":"var _funcType = app.a_attr_funcType.getValue() ;\napp.a_attr_funcName.setValue();"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/entity/data/getFuncType"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel15"},"children":[{"configs":{"labelWidth":"120","width":"450","labelAlign":"right","itemId":"a_attr_funcName","fieldLabel":"{#wf_entity_a_attr_funcName#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel16"},"children":[{"configs":{"labelWidth":"120","height":"80","width":"450","labelAlign":"right","itemId":"a_attr_desc","fieldLabel":"{#wf_entity_a_attr_desc#}"},"children":[],"expanded":true,"type":"textarea"}],"expanded":true,"type":"panel"},{"configs":{"hidden":"true","itemId":"attrOpType"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"form"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#wf_entity_saveWin#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"var _a_attr_id = app.a_attr_id.getValue();\nvar _a_entity_id = app.a_entity_id.getValue() ;\nvar _a_attr_code = app.a_attr_code.getValue();\nvar _a_attr_name = app.a_attr_name.getValue();\nvar _a_attr_category = app.a_attr_category.getValue();\nvar _a_attr_funcType = app.a_attr_funcType.getValue();\nvar _a_attr_dataType = app.a_attr_dataType.getValue();\nvar _a_attr_funcName = app.a_attr_funcName.getValue();\nvar _a_attr_desc = app.a_attr_desc.getValue();\n\nif(Wb.isEmpty(_a_attr_code)){\n  Wb.toast('{#wf_entity_qxzlrstsxbm#}') ;\n  return false ;\n}\nif(Wb.isEmpty(_a_attr_name)){\n  Wb.toast('{#wf_entity_qxzlrstsxmc#}') ;\n  return false ;\n}\nif(Wb.isEmpty(_a_attr_dataType)){\n  Wb.toast('{#wf_entity_data_type#}') ;\n  return false ;\n}\n\nvar json = {\n  attrId:\"\",\n  a_entity_id:_a_entity_id,\n  a_attr_code:_a_attr_code,\n  a_attr_name:_a_attr_name,\n  a_attr_category:_a_attr_category,\n  a_attr_funcType:_a_attr_funcType,\n  a_attr_dataType:_a_attr_dataType,\n  a_attr_funcName:_a_attr_funcName,\n  a_attr_desc:_a_attr_desc\n};\n\n// 执行保存处理\nvar opType = app.attrOpType.getValue() ;\nif(opType === \"add\"){\n  json.attrId = getuuid(); \n   Wb.request({\n           url: 'm?xwl=xip/wf/entity/data/insertEntityAttrs', \n           params: json,\n           success: function() {\n             app.attrygrid.store.load({params:{entityId1:_a_entity_id}});\n             app.attrWin.hide();\n//              Ext.Msg.alert(\"提示\",\"保存实体属性信息成功\");\n             Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_bcstsxxxcg#}\");\n          }\n       });\n  \n}else{\n  json.attrId=_a_attr_id;\n   Wb.request({\n           url: 'm?xwl=xip/wf/entity/data/updateEntityAttrs', \n           params: json,\n           success: function() {\n             app.attrygrid.store.load({params:{entityId1:_a_entity_id}});\n             app.attrWin.hide();\n//              Ext.Msg.alert(\"提示\",\"保存实体属性信息成功\");\n             Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_bcstsxxxcg#}\");\n           } \n   });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_addAndSave#}","itemId":"addAndSave"},"events":{"click":"var _a_attr_id = app.a_attr_id.getValue();\nvar _a_entity_id = app.a_entity_id.getValue() ;\nvar _a_attr_code = app.a_attr_code.getValue();\nvar _a_attr_name = app.a_attr_name.getValue();\nvar _a_attr_category = app.a_attr_category.getValue();\nvar _a_attr_funcType = app.a_attr_funcType.getValue();\nvar _a_attr_dataType = app.a_attr_dataType.getValue();\nvar _a_attr_funcName = app.a_attr_funcName.getValue();\nvar _a_attr_desc = app.a_attr_desc.getValue();\n\nif(Wb.isEmpty(_a_attr_code)){\n  Wb.toast('{#wf_entity_qxzlrstsxbm#}') ;\n  return false ;\n}\nif(Wb.isEmpty(_a_attr_name)){\n  Wb.toast('{#wf_entity_qxzlrstsxmc#}') ;\n  return false ;\n}\nif(Wb.isEmpty(_a_attr_dataType)){\n  Wb.toast('{#wf_entity_data_type#}') ;\n  return false ;\n}\n\nvar json = {\n  attrId:getuuid(),\n  a_entity_id:_a_entity_id,\n  a_attr_code:_a_attr_code,\n  a_attr_name:_a_attr_name,\n  a_attr_category:_a_attr_category,\n  a_attr_funcType:_a_attr_funcType,\n  a_attr_dataType:_a_attr_dataType,\n  a_attr_funcName:_a_attr_funcName,\n  a_attr_desc:_a_attr_desc\n};\nWb.request({\n  url: 'm?xwl=xip/wf/entity/data/insertEntityAttrs', \n  params: json,\n  success: function() {\n    app.attrygrid.store.load({params:{entityId1:_a_entity_id}});\n    app.a_attr_id.setValue() ;\n    app.a_attr_code.setValue();\n    app.a_attr_name.setValue();\n    app.a_attr_category.setValue('static');\n    app.a_attr_funcType.setValue();\n    app.a_attr_funcName.setValue();\n    app.a_attr_desc.setValue();\n    app.attrOpType.setValue('add');\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_closeWin#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.attrWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":true,"type":"window"},{"configs":{"title":"{#wf_entity_xzywzt#}","height":"240","layout":"fit","width":"550","closeAction":"hide","buttonAlign":"center","dialog":"false","itemId":"bizWin","modal":"true"},"children":[{"configs":{"frame":"true","style":"border-width:0px","border":"false","itemId":"form3"},"children":[{"configs":{"labelWidth":"80","hidden":"true","width":"450","labelAlign":"right","itemId":"B_ENUM_ID","fieldLabel":"状态ID","disabled":"true"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","hidden":"true","width":"450","labelAlign":"right","itemId":"B_ENTITY_ID","fieldLabel":"公司ID","disabled":"true"},"children":[],"expanded":false,"type":"text"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel1"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","width":"450","pickList":"[['A','{#wf_entity_A#}'],['R','{#wf_entity_R#}'],['C','{#wf_entity_C#}'],['D','{#wf_entity_D#}'],['E','{#wf_entity_E#}']]","labelAlign":"right","itemId":"B_STATUS_CATEGORY","forceSelection":"true","fieldLabel":"<font color=red>*<\/font>{#wf_entity_B_STATUS_CATEGORY#}","editable":"false"},"events":{"select":"app.B_STATUS_DESC.setValue();"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel11"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","width":"450","labelAlign":"right","itemId":"B_STATUS_DESC","fieldLabel":"<font color=red>*<\/font>{#wf_entity_B_STATUS_DESC#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:6px","layout":"column","border":"false","itemId":"panel12"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","width":"450","value":"Y","pickList":"[['Y','{#wf_entity_Y#}'],['N','{#wf_entity_N#}']]","labelAlign":"right","itemId":"B_ENABLE_FLAG","forceSelection":"true","fieldLabel":"{#wf_entity_B_ENABLE_FLAG#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"hidden":"true","itemId":"bizOpType"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"form"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#wf_entity_saveWin#}","itemId":"saveWin","iconCls":"save_icon"},"events":{"click":"var _emunid=app.B_ENUM_ID.getValue();\nvar _entity_id=app.B_ENTITY_ID.getValue();\nvar _category = app.B_STATUS_CATEGORY.getValue() ;\nvar _desc = app.B_STATUS_DESC.getValue();\nvar flag=app.B_ENABLE_FLAG.getValue();\n\nif(_category === null || _category === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请选择业务状态分类码!\");\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywztflm#}\") ;\n  return false ;\n}\n\nif(_desc === null || _desc === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请录入业务状态描述!\");\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qlrywztms#}\") ;\n  return false ;\n}\nvar json = {\n  \n  enumId:\"\",\n  B_ENTITY_ID:_entity_id,\n  B_STATUS_CATEGORY:_category,\n  B_STATUS_DESC:_desc,\n  B_ENABLE_FLAG:flag\n  \n\n};\nvar opType = app.bizOpType.getValue();\n\nif(opType === \"add\"){\n   json.enumId = getuuid(); \n   Wb.request({\n           url: 'm?xwl=xip/wf/entity/data/insertBizStatus', \n           params: json,\n           success: function() {\n             app.bizgrid.store.load({params:{entityId1:_entity_id}});\n             app.bizWin.hide();\n//              Ext.Msg.alert(\"提示\",\"保存业务状态信息成功\");\n             Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_bcywztxxcg#}\") ;\n          }\n       });\n}else{\n   json.enumId=_emunid;\n     Wb.request({\n       url: 'm?xwl=xip/wf/entity/data/updateBizStatus', \n       params: json,\n       success: function() {\n         app.bizgrid.store.load({params:{entityId1:_entity_id}});\n         app.bizWin.hide();\n//          Ext.Msg.alert(\"提示\",\"保存业务状态信息成功\");\n         Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_bcywztxxcg#}\") ;\n       } \n   });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_addAndSave#}","itemId":"addAndSaveBiz"},"events":{"click":"var _entity_id=app.B_ENTITY_ID.getValue();\nvar _category = app.B_STATUS_CATEGORY.getValue() ;\nvar _desc = app.B_STATUS_DESC.getValue();\nvar flag=app.B_ENABLE_FLAG.getValue();\n\nif(_category === null || _category === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请选择业务状态分类码!\");\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywztflm#}\") ;\n  return false ;\n}\n\nif(_desc === null || _desc === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请录入业务状态描述!\");\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qlrywztms#}\") ;\n  return false ;\n}\nvar json = {\n  enumId:getuuid(),\n  B_ENTITY_ID:_entity_id,\n  B_STATUS_CATEGORY:_category,\n  B_STATUS_DESC:_desc,\n  B_ENABLE_FLAG:flag\n\n\n};\nWb.request({\n  url: 'm?xwl=xip/wf/entity/data/insertBizStatus', \n  params: json,\n  success: function() {\n    app.bizgrid.store.load({params:{entityId1:_entity_id}});\n    // 初始化赋值\n    app.B_ENUM_ID.setValue();\n    app.B_STATUS_CATEGORY.setValue() ;\n    app.B_STATUS_DESC.setValue() ;\n    app.B_ENABLE_FLAG.setValue('Y');\n    app.bizOpType.setValue('add');\n    \n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_closeWin#}","itemId":"closeWin","iconCls":"cancel_icon"},"events":{"click":"app.bizWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"array"}],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","height":"250","layout":"fit","border":"false","itemId":"entityPanel"},"children":[{"configs":{"multiSelect":"false","selType":"rowmodel","itemId":"entitygrid","simpleSelect":"false","viewConfig":"{\n enableTextSelection:true\n}"},"events":{"itemclick":"\n\napp.attrygrid.store.load({params:{entityId1:record.data.ENTITY_ID}});\n\napp.bizgrid.store.load({params:{entityId1:record.data.ENTITY_ID}});\n\n","itemdblclick":"app.btnUpdateEntity.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"40","displayField":"APP_NAME","width":"300","valueField":"APP_ID","emptyText":"{#wf_entity_pleaseSelect#}","labelAlign":"right","itemId":"cbx4App","fieldLabel":"{#wf_entity_cbx4App#}"},"events":{"select":"var appid=app.cbx4App.getValue();\napp.entitygrid.store.load({params:{appid:appid}});\n// app.attrygrid.removeAll();\n //app.bizgrid.removeAll();\n"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xip/data/getApps"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"80","width":"250","labelAlign":"right","itemId":"text4EntityName","fieldLabel":"{#wf_entity_text4EntityName#}"},"events":{"specialkey":"app.btnQuery.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"btnQuery","iconCls":"seek_icon"},"events":{"click":"var _appId = app.cbx4App.getValue();\nvar enyityname=app.text4EntityName.getValue();\nif(_appId === null || _appId === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请选择应用!\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzyyxx#}\") ;\n  return false ;\n}\n\napp.entitygrid.store.load({params:{\nappid:_appId,\n text4EntityName: enyityname\n}});"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"->","itemId":"seqRight"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#wf_entity_btnAddEntity#}","itemId":"btnAddEntity","iconCls":"application_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._entityWin);\n// win.setTitle('新增实体');\nwin.setTitle('{#wf_entity_xzst#}');\nvar _appId = app.cbx4App.getValue();\nif(_appId === null || _appId === \"\"){\n//   Ext.Msg.alert(\"提示\",\"请选择应用信息!\");\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzyyxx#}\") ;\n  return false ;\n}else{\n  app.e_appId.setValue(_appId) ;\n  app.e_entityCode.enable();\n}\nwin.show();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_btnUpdateEntity#}","itemId":"btnUpdateEntity","iconCls":"table_edit_icon"},"events":{"click":"var rows = app.entitygrid.getSelectionModel().getSelection();\nif(rows.length === 0){\n//   Ext.Msg.alert(\"提示\",\"请选择业务实体信息!\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywstxx#}\") ;\n  return false ;\n}else{\n  var _appId = rows[0].data.APP_ID ;\n  var _entityId = rows[0].data.ENTITY_ID ;\n  var _entityCode = rows[0].data.ENTITY_CODE ;\n  var _entityName = rows[0].data.ENTITY_NAME ;\n  var _entityDesc = rows[0].data.ENTITY_DESC ;\n  var _funcType = rows[0].data.FUNC_TYPE ;\n  var _funcName = rows[0].data.FUNC_NAME ;\n  var _authUserCls = rows[0].data.AUTH_USER_CLS ;\n  \n  app.e_appId.setValue(_appId) ;\n  app.e_entityId.setValue(_entityId) ;\n  app.e_entityCode.setValue(_entityCode) ;\n  app.e_entityName.setValue(_entityName) ;\n  app.e_entityDesc.setValue(_entityDesc);\n  app.e_cbxFuncType.setValue(_funcType);\n  app.e_cbxFuncName.setValue(_funcName);\n  app.authUserCls.setValue(_authUserCls) ;\n  \n  app.e_entityCode.disable();\n//   app.entityWin.setTitle('修改实体');\n  app.entityWin.setTitle('{#wf_entity_xgst#}');\n  if(_funcType !== null && _funcType !== \"\"){\n    app.e_cbxFuncName.enable();\n  }\n  \n  app.entityWin.show();\n}\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_btnDelEntity#}","itemId":"btnDelEntity","iconCls":"application_delete_icon"},"events":{"click":"var rows = app.entitygrid.getSelectionModel().getSelection();\nvar appid =app.cbx4App.getValue();\nif(rows.length === 0){\n//   Ext.Msg.alert(\"提示\",\"请选择实体信息!\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywstxx#}\") ;\n  return false ;\n}else{\n  var _entityId = rows[0].data.ENTITY_ID;\n  var json = {entityId:_entityId};\n  \n  Ext.MessageBox.confirm('{#wf_entity_prompt#}','{#wf_entity_qdysccywstm#}',function(a){\n    if(a == 'yes'){\n      Wb.request({\n         url : 'm?xwl=xip/wf/entity/data/deleteEntity',\n         params : json,\n         success :function(response){\n           app.entitygrid.store.load({params:{appid:appid}});\n           app.attrygrid.store.load({params:{entityId:_entityId}});\n           app.bizgrid.store.load({params:{entityId:_entityId}});\n//            Ext.Msg.alert(\"提示\",\"删除实体信息成功!\")  ;\n           Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_scstxxcg#}\") ;\n         }\n      });\n    }else{\n      return ;\n    }\n  }) ;\n}"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xip/wf/entity/data/getEntity"},"children":[],"expanded":true,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#wf_entity_xh#}","width":"45","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_APP_ID#}","hidden":"true","dataIndex":"APP_ID","itemId":"APP_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENTITY_ID#}","hidden":"true","dataIndex":"ENTITY_ID","itemId":"ENTITY_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENTITY_CODE#}","width":"150","dataIndex":"ENTITY_CODE","titleAlign":"center","itemId":"ENTITY_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENTITY_NAME#}","width":"200","dataIndex":"ENTITY_NAME","titleAlign":"center","itemId":"ENTITY_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENTITY_DESC#}","width":"150","dataIndex":"ENTITY_DESC","titleAlign":"center","itemId":"ENTITY_DESC"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_FUNC_TYPE#}","width":"120","dataIndex":"FUNC_TYPE","titleAlign":"center","itemId":"FUNC_TYPE","renderer":"if(value === 'PROC'){\n  return '{#wf_entity_PROC#}' ;\n}else if(value === 'WEB'){\n  return '{#wf_entity_WEB#}' ;\n}else if(value === 'JAVA'){\n  return '{#wf_entity_JAVA#}' ;\n}else{\n  return value ;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_FUNC_NAME#}","menuDisabled":"false","width":"300","dataIndex":"FUNC_NAME","itemId":"FUNC_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_auth_cls#}","width":"300","dataIndex":"AUTH_USER_CLS","titleAlign":"center","itemId":"AUTH_USER_CLS"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"region":"center","activeTab":"attrPanel","border":"false","itemId":"tabPanel1"},"children":[{"configs":{"title":"{#wf_entity_stsxxx#}","layout":"fit","itemId":"attrPanel"},"children":[{"configs":{"multiSelect":"true","selType":"checkboxmodel","border":"false","itemId":"attrygrid","simpleSelect":"false","viewConfig":"{\n enableTextSelection:true\n}"},"events":{"itemdblclick":"app.btnUpdAttr.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/entity/data/getEntityAttrs"},"children":[],"expanded":true,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#wf_entity_btnAddEntity#}","itemId":"btnAddAttr","iconCls":"application_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._attrWin);\nvar rows =app.entitygrid.getSelection();\nif(rows.length === 0){\n//   Ext.Msg.alert(\"提示\",\"请选择业务实体信息!\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywstxx#}\") ;\n  return false ;\n}else{\n  var entityId = rows[0].data.ENTITY_ID;\n  app.a_entity_id.setValue(entityId) ;\n  \n  app.attrOpType.setValue('add');\n  \n  // 显示保存并继续按钮\n  //app.addAndSave.show();\n \n//  app. attrWin.setTitle('新增实体属性') ;\n app. attrWin.setTitle('{#wf_entity_xzstsx#}') ;\n  win.show();\n}\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_btnUpdateEntity#}","itemId":"btnUpdAttr","iconCls":"table_edit_icon"},"events":{"click":"var rows = app.attrygrid.getSelectionModel().getSelection();\nif(rows.length === 0){\n//   Ext.MessageBox.alert(\"提示\",\"请选择业务实体属性信息！\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywstsx#}\") ;\n  return false ;\n}else if(rows.length > 1){\n//   Ext.Msg.alert(\"提示\",\"请选择一条业务实体属性信息！\") ;\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzytywstsx#}\") ;\n  return false ;\n}else{\n\n  app.a_attr_id.setValue(rows[0].data.ATTR_ID) ;\n  app.a_entity_id.setValue(rows[0].data.ENTITY_ID);\n  app.a_attr_code.setValue(rows[0].data.ATTR_CODE);\n  app.a_attr_name.setValue(rows[0].data.ATTR_NAME);\n  app.a_attr_category.setValue(rows[0].data.ATTR_CATEGORY);\n  app.a_attr_dataType.setValue(rows[0].data.ATTR_DATA_TYPE) ;\n  app.a_attr_funcType.setValue(rows[0].data.ATTR_FUNC_TYPE);\n  app.a_attr_funcName.setValue(rows[0].data.ATTR_FUNC_NAME);\n  app.a_attr_desc.setValue(rows[0].data.ATTR_DESC);\n  \n  app.addAndSave.hide();\n  app.attrOpType.setValue('update');\n//   app.attrWin.setTitle('修改实体属性') ;\n  app.attrWin.setTitle('{#wf_entity_xgstsx#}') ;\n  app.attrWin.show();\n}\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_btnDelEntity#}","itemId":"btnDelAttr","iconCls":"application_delete_icon"},"events":{"click":"var rows = app.attrygrid.getSelection();\nvar dec=app.entitygrid.getSelection();\nvar eid =dec[0].data.ENTITY_ID;\nif(rows.length === 0){\n//   Ext.Msg.alert(\"提示\",\"请选择实体属性信息\");\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywstsx#}\") ;\n  return false ;\n}\nelse{\n   Ext.Msg.confirm('{#wf_entity_prompt#}','{#wf_entity_nqdysc#}',function(a){\n      if(a=='yes'){\n      var idList = \"\" ;\n      Ext.each(rows,function(r){\n        var attrId = \"'\" + r.get('ATTR_ID') + \"'\";\n        if(idList === \"\"){\n          idList = attrId ;\n        }else{\n          idList = idList+\",\"+attrId ;\n        }\n      });\n      var json = {'idsStr' : idList} ;\n        Wb.request({\n         url : 'm?xwl=xip/wf/entity/data/deleteEntityAttrs',\n         params : json,\n         success :function(response){\n           app.attrygrid.store.load({params:{entityId1:eid}});\n//             Ext.Msg.alert(\"提示\",\"删除实体属性信息成功!\")  ;\n            Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_scstsxcg#}\") ;\n           \n         }\n      });\n     \n    }else{\n      return false ;\n    }\n  });\n  \n      \n \n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"->","itemId":"seqRight"},"children":[],"expanded":false,"type":"item"},{"configs":{"labelWidth":"120","width":"250","labelAlign":"right","itemId":"text4AttrName","fieldLabel":"{#wf_entity_text4AttrName#}"},"events":{"specialkey":"app.btnQueryAttr.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"btnQueryAttr","iconCls":"seek_icon"},"events":{"click":"var rows = app.entitygrid.getSelectionModel().getSelection(); \nvar attrname=app.text4AttrName.getValue();\nif(rows.length > 0){\n  var _entityId = rows[0].data.ENTITY_ID ;\n  if(_entityId !== null && _entityId !== \"\"){\n    app.attrygrid.store.load({params:{entityId:_entityId,text4AttrName: attrname}});\n  }\n}"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#wf_entity_xh#}","width":"45","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber2"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENTITY_ID#}","hidden":"true","dataIndex":"ENTITY_ID","itemId":"ENTITY_ID_1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_ID#}","hidden":"true","dataIndex":"ATTR_ID","itemId":"ATTR_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_CODE#}","width":"200","dataIndex":"ATTR_CODE","itemId":"ATTR_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_NAME#}","width":"250","dataIndex":"ATTR_NAME","itemId":"ATTR_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_CATEGORY#}","width":"120","dataIndex":"ATTR_CATEGORY","itemId":"ATTR_CATEGORY","renderer":"if(value === 'static'){\n  return '{#wf_entity_static#}' ;\n}else if(value === 'dynamic'){\n  return '{#wf_entity_dynamic#}';\n}else{\n  return value ;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_DATA_TYPE#}","dataIndex":"ATTR_DATA_TYPE","itemId":"ATTR_DATA_TYPE","renderer":"if(value === '1'){\n  return '{#wf_entity_1#}' ;\n}else if(value === '2'){\n  return '{#wf_entity_2#}';\n}else if(value === '3'){\n  return '{#wf_entity_3#}';  \n}else{\n  return value ;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_FUNC_TYPE#}","dataIndex":"ATTR_FUNC_TYPE","itemId":"ATTR_FUNC_TYPE","renderer":"if(value === 'PROC'){\n  return '{#wf_entity_PROC#}' ;\n}else if(value === 'WEB'){\n  return '{#wf_entity_WEB#}' ;\n}else{\n  return value ;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_FUNC_NAME#}","width":"300","dataIndex":"ATTR_FUNC_NAME","itemId":"ATTR_FUNC_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ATTR_DESC#}","width":"200","dataIndex":"ATTR_DESC","itemId":"ATTR_DESC"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"},{"configs":{"title":"{#wf_entity_ywztxx#}","layout":"fit","itemId":"bizpanel"},"children":[{"configs":{"itemId":"bizgrid","viewConfig":"{\n enableTextSelection:true\n}"},"events":{"itemdblclick":"app.btnUpdBizStatus.fireEvent('click');"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xip/wf/entity/data/getBizStatus"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#wf_entity_btnAddEntity#}","itemId":"btnAddBizStatus","iconCls":"application_add_icon"},"events":{"click":"var win = new Ext.window.Window(app._bizWin);\nvar rows = app.entitygrid.getSelectionModel().getSelection();\nif(rows.length === 0){\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywstxx#}\") ;\t// 请选择业务实体信息\n  return false ;\n}else{\n  var entityId = rows[0].data.ENTITY_ID ;\n  app.B_ENTITY_ID.setValue(entityId) ;\n  \n  app.bizOpType.setValue('add') ;\n  app.bizWin.setTitle('{#wf_entity_xzywzt#}') ;  // 新增业务状态\n  win.show();\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_entity_btnUpdateEntity#}","itemId":"btnUpdBizStatus","iconCls":"table_edit_icon"},"events":{"click":"var rows = app.bizgrid.getSelectionModel().getSelection();\nif(rows.length === 0){\n  Ext.Msg.alert(\"{#wf_entity_prompt#}\",\"{#wf_entity_qxzywztxx#}\") ;\t// 请选择业务状态信息\n  return false ;\n}else{\n  var defaultStatus = rows[0].data.ATTRIBUTE1 ; // 默认状态\n  if(defaultStatus == \"S\"){\n    Wb.toast('系统默认业务状态不能修改!');\n    return false ;\n  }\n  \n  var _entityId = rows[0].data.ENTITY_ID ;\n  var _enumId = rows[0].data.ENUM_ID ;\n  var _catagory = rows[0].data.STATUS_CATEGORY ;\n  var _desc = rows[0].data.STATUS_DESC ;\n  var _enabled = rows[0].data.ENABLE_FLAG ;\n  \n  app.B_ENTITY_ID.setValue(_entityId) ;\n  app.B_ENUM_ID.setValue(_enumId) ;\n  app.B_STATUS_CATEGORY.setValue(_catagory) ;\n  app.B_STATUS_DESC.setValue(_desc) ;\n  app.B_ENABLE_FLAG.setValue(_enabled) ;\n  \n  app.addAndSaveBiz.hide();\n  app.bizOpType.setValue('update') ;\n  app.bizWin.setTitle('{#wf_entity_xgywzt#}') ; // 修改业务状态\n  app.bizWin.show();\n}\n\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#wf_entity_xh#}","width":"45","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"chartNumber3"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENTITY_ID#}","hidden":"true","width":"150","dataIndex":"ENTITY_ID","itemId":"ENTITY_ID_2"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENUM_ID#}","hidden":"true","dataIndex":"ENUM_ID","itemId":"ENUM_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_STATUS_CATEGORY#}","width":"120","dataIndex":"STATUS_CATEGORY","itemId":"STATUS_CATEGORY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_STATUS_DESC#}","width":"300","dataIndex":"STATUS_DESC","itemId":"STATUS_DESC"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_entity_ENABLE_FLAG#}","dataIndex":"ENABLE_FLAG","itemId":"ENABLE_FLAG","renderer":"if(value === 'Y'){ \n  return '{#wf_entity_Y#}' ;\n}else if(value === 'N'){\n  return '{#wf_entity_N#}' ;\n}else{\n  return value ;\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"系统默认","hidden":"true","dataIndex":"ATTRIBUTE1","itemId":"DEFAULT_STATUS"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"tab"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}