{"inframe":false,"title":"节点执行人配置","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xip/wf/executer/json/wf_executer\");\n\nvar ctxPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",ctxPath);\n\nrequest.setAttribute(\"delImageSrc\",request.getContextPath()+\"/xip/images/cut.gif\");\n\ncom.xzsoft.xip.platform.util.XipUtil.checkUserFunSec(request,response);","head":"<script>\n//已经选中的临时数组节点ID\n  var hasSelectActArray = new Array();\n  \n  //节点grid选择改变事件调用的方法\n  function actSelectionchange(model, selected, options){\n    var newSelectdArray = new Array();\n    if(app.authSelectActGrid.store.getCount()===0){\n      hasSelectActArray = new Array();\n    }\n    //添加新选中的记录\n    for(var i=0; i<selected.length; i++){\n      if(!Ext.Array.contains(hasSelectActArray,selected[i].get('ACT_ID'))){\n        app.authSelectActGrid.store.add(selected[i]);\n        hasSelectActArray.push(selected[i].get('ACT_ID'));\n      }\n      newSelectdArray.push(selected[i].get('ACT_ID'));\n    }\n\n    var removeArray = new Array();\n\n    //删除未被选中的记录\n    for(var i=0; i<app.authSelectActGrid.store.getCount(); i++){\n      var selectRecord = app.authSelectActGrid.store.getAt(i);\n      if(!Ext.Array.contains(newSelectdArray,selectRecord.get('ACT_ID'))){\n        if(app.authAllActGrid.store.find('ACT_ID',selectRecord.get('ACT_ID'))!=-1){\n          Ext.Array.remove(hasSelectActArray,selectRecord.get('ACT_ID'));\n          removeArray.push(app.authSelectActGrid.store.getAt(i));\n        }\n      }\n    }\n\n    app.authSelectActGrid.store.remove(removeArray);\n\n    sumSelectAct();\n  }\n  \n  //删除选中的节点\n  function delSelectedAct(){\n    var selRecords = app.authSelectActGrid.getSelectionModel().getSelection();\n    app.authSelectActGrid.store.remove(selRecords);\n\n    app.authAllActGrid.getSelectionModel().deselect(app.authAllActGrid.store.getAt(app.authAllActGrid.store.find('ACT_ID',selRecords[0].get('ACT_ID'))));\n    \n    Ext.Array.remove(hasSelectActArray,selRecords[0].get('ACT_ID'));\n\n    sumSelectAct();\n  }\n  \n  //删除全部选中的节点\n  function delAllSelectedAct(){\n//     Ext.Msg.confirm('提示','确定删除全部已选的节点?',function(btn){\n    Ext.Msg.confirm('{#wf_executer_prompt#}','{#wf_executer_qdscqbyxdjd#}',function(btn){\n      if(btn == 'yes'){\n        app.authSelectActGrid.store.removeAll();\n\n        app.authAllActGrid.getSelectionModel().deselectAll();\n        \n        hasSelectActArray = new Array();\n\n        sumSelectAct();\n      }\n    });\n  };\n  \n  //修改选中的节点信息\n  function sumSelectAct(){\n    var count = app.authSelectActGrid.store.getCount();\n//     document.getElementById(\"showSelectActWin\").innerHTML = \"已选节点(\"+count+\")\"; \n    document.getElementById(\"showSelectActWin\").innerHTML = \"{#wf_executer_yxjd#}(\"+count+\")\"; \n  }\n  \n  \n  \n  //已经选择的临时用户、岗位、部门\n  var hasSelectUdpArray = new Array();\n  \n  //用户、岗位、部门grid选择改变事件调用的方法\n  function udpGridSelectionchange(model, selected, options, type){\n    var newSelectdArray = new Array();\n    if(app.authSelectUpdGrid.store.getCount()===0){\n      hasSelectUdpArray = new Array();\n    }\n    //添加新选中的记录\n    for(var i=0; i<selected.length; i++){\n      if(!Ext.Array.contains(hasSelectUdpArray,selected[i].get('PRI_ID'))){\n        app.authSelectUpdGrid.store.add(selected[i]);\n        hasSelectUdpArray.push(selected[i].get('PRI_ID'));\n      }\n      newSelectdArray.push(selected[i].get('PRI_ID'));\n    }\n\n    var removeArray = new Array();\n\n    //删除未被选中的记录\n    for(var i=0; i<app.authSelectUpdGrid.store.getCount(); i++){\n      var selectRecord = app.authSelectUpdGrid.store.getAt(i);\n      if(selectRecord.get('PRI_TYPE') == type){\n        if(!Ext.Array.contains(newSelectdArray,selectRecord.get('PRI_ID'))){\n          if(type=='U'){\n            if(app.allUserGrid.store.find('PRI_ID',selectRecord.get('PRI_ID'))!=-1){\n              Ext.Array.remove(hasSelectUdpArray,selectRecord.get('PRI_ID'));\n              removeArray.push(app.authSelectUpdGrid.store.getAt(i));\n            }\n          }else if(type=='P'){\n            if(app.allPostGrid.store.find('PRI_ID',selectRecord.get('PRI_ID'))!=-1){\n              Ext.Array.remove(hasSelectUdpArray,selectRecord.get('PRI_ID'));\n              removeArray.push(app.authSelectUpdGrid.store.getAt(i));\n            }\n          }else{\n            if(app.allDeptGrid.store.find('PRI_ID',selectRecord.get('PRI_ID'))!=-1){\n              Ext.Array.remove(hasSelectUdpArray,selectRecord.get('PRI_ID'));\n              removeArray.push(app.authSelectUpdGrid.store.getAt(i));\n            }\n          }\n        }\n      }\n    }\n\n    app.authSelectUpdGrid.store.remove(removeArray);\n\n    sumSelectUdp();\n  }\n  \n  //删除选中的用户、岗位、部门\n  function delSelectedUdp(){\n    var selRecords = app.authSelectUpdGrid.getSelectionModel().getSelection();\n    if(selRecords[0].get('PRI_TYPE')=='U'){\n      var record = app.allUserGrid.store.find('PRI_ID',selRecords[0].get('PRI_ID'));\n      if(!Ext.isEmpty(record)){\n        app.allUserGrid.getSelectionModel().deselect(record);\n      }\n    }else if(selRecords[0].get('PRI_TYPE')=='P'){\n      var record = app.allPostGrid.store.find('PRI_ID',selRecords[0].get('PRI_ID'));\n      if(!Ext.isEmpty(record)){\n        app.allPostGrid.getSelectionModel().deselect(record);\n      }\n    }else{\n      var record = app.allDeptGrid.store.find('PRI_ID',selRecords[0].get('PRI_ID'));\n      if(!Ext.isEmpty(record)){\n        app.allDeptGrid.getSelectionModel().deselect(record);\n      }\n    }\n    app.authSelectUpdGrid.store.remove(selRecords);\n    \n     Ext.Array.remove(hasSelectUdpArray,selRecords[0].get('PRI_ID'));\n    \n    sumSelectUdp();\n  }\n  \n  //删除全部选中的用户、岗位、部门\n  function delAllSelectedUdp(){\n//     Ext.Msg.confirm('提示','确定删除全部已选的用户、部门、岗位?',function(btn){\n    Ext.Msg.confirm('{#wf_executer_prompt#}','{#wf_executer_qdscqbyxdyhbmgw#}',function(btn){\n      if(btn == 'yes'){\n        app.authSelectUpdGrid.store.removeAll();\n\n        app.allUserGrid.getSelectionModel().deselectAll();\n        app.allPostGrid.getSelectionModel().deselectAll();\n        app.allDeptGrid.getSelectionModel().deselectAll();\n        hasSelectUdpArray = new Array();\n\n        sumSelectUdp();\n      }\n    });\n  }\n  function clear(){\n    app.authSelectActGrid.store.removeAll();\n    app.authAllActGrid.getSelectionModel().deselectAll();\n    hasSelectActArray = new Array();\n    sumSelectAct();\n  }\n  function clearAll(){\n    app.authSelectUpdGrid.store.removeAll();\n    app.allUserGrid.getSelectionModel().deselectAll();\n    app.allPostGrid.getSelectionModel().deselectAll();\n    app.allDeptGrid.getSelectionModel().deselectAll();\n    hasSelectUdpArray = new Array();\n    sumSelectUdp();\n  }\n  \n  //修改选中的用户，岗位，部门信息\n  function sumSelectUdp(){\n    var countSelectUser = 0;\n    var countSelectPost = 0;\n    var countSelectDept = 0;\n    for(var i=0; i<app.authSelectUpdGrid.store.getCount(); i++){\n      var udpType = app.authSelectUpdGrid.store.getAt(i).get('PRI_TYPE');\n      if(udpType=='U'){\n        countSelectUser++;\n      }else if(udpType=='P'){\n        countSelectPost++;\n      }else{\n        countSelectDept++;\n      }\n    }\n//     document.getElementById(\"sumSelectUdp\").innerHTML = \"已选用户(\"+countSelectUser+\")已选岗位(\"+countSelectPost+\")已选部门(\"+countSelectDept+\")\";\n    document.getElementById(\"sumSelectUdp\").innerHTML = \"{#wf_executer_yxyh#}(\"+countSelectUser+\"){#wf_executer_yxgw#}(\"+countSelectPost+\"){#wf_executer_yxbm#}(\"+countSelectDept+\")\";\n  }\n  <\/script>","itemId":"module"},"events":{"finalize":"//添加选中项\nfunction addItems(items, type){\n  if(type=='act'){\n    var addArray = new Array();\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = app.authSelectActGrid.store.find('ACT_ID',item.get('ACT_ID'));\n      if(index==-1){\n        addArray.push(item);\n      }\n    }\n    for(var j=0; j<addArray.length; j++){\n      app.authSelectActGrid.store.add(addArray[j]);\n    }\n  }else if(type=='user'){\n    var addArray = new Array();\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = app.selectUserGrid_edit.store.find('PRI_ID',item.get('PRI_ID'));\n      if(index==-1){\n        addArray.push(item);\n      }\n    }\n    for(var j=0; j<addArray.length; j++){\n      app.selectUserGrid_edit.store.add(addArray[j]);\n    }\n  }else if(type=='post'){\n    var addArray = new Array();\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = selectPostStore.find('PRI_ID',item.get('PRI_ID'));\n      if(index==-1){\n        addArray.push(item);\n      }\n    }\n    for(var j=0; j<addArray.length; j++){\n      selectPostStore.add(addArray[j]);\n    }\n  }else if(type=='dept'){\n    var addArray = new Array();\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = selectDeptStore.find('PRI_ID',item.get('PRI_ID'));\n      if(index==-1){\n        addArray.push(item);\n      }\n    }\n    for(var j=0; j<addArray.length; j++){\n      selectDeptStore.add(addArray[j]);\n    }\n  }\n}\n\t\n//删除选中项\nfunction removeItems(items, type){\n  if(type=='act'){\n    for(var i=0; i<items.length; i++){\n      selectActStore_auth.remove(items[i]);\n    }\n  }else if(type=='user'){\n    for(var i=0; i<items.length; i++){\n      selectUserStore.remove(items[i]);\n    }\n  }else if(type=='post'){\n    for(var i=0; i<items.length; i++){\n      selectPostStore.remove(items[i]);\n    }\n  }else if(type=='dept'){\n    for(var i=0; i<items.length; i++){\n      selectDeptStore.remove(items[i]);\n    }\n  }\n  \n}\n\nvar addArray_edit = new Array();\nvar deleteArray_edit = new Array();\n\n//添加时对addArray和deleteArray的操作。\nfunction itemsAddWithArrayOperator(items){\n  for(var i=0; i<items.length; i++){\n    //addArray不包含则添加\n    var add_flag = true;\n    for(var j=0; j<addArray_edit.length; j++){\n      if(addArray_edit[j].get('PRI_ID')==items[i].get('PRI_ID')){\n        add_flag = false;\n        break;\n      }\n    }\n    if(add_flag==true){\n      addArray_edit.push(items[i]);\n    }\n    //deleteArray包含则删除\n    for(var k=0; k<deleteArray_edit.length; k++){\n      if(deleteArray_edit[k].get('PRI_ID')==items[i].get('PRI_ID')){\n        deleteArray_edit.splice(k,1);\n      }\n    }\n  }\n}\n\n//删除时对addArray和deleteArray的操作。\nfunction itemsRemoveWithArrayOperator(items){\n  for(var i=0; i<items.length; i++){\n    //addArray包含则删除\n    for(var j=0; j<addArray_edit.length; j++){\n      if(addArray_edit[j].get('PRI_ID')==items[i].get('PRI_ID')){\n        addArray_edit.splice(j,1);\n      }\n    }\n    //deleteArray不包含则添加\n    var del_flag = true;\n    for(var k=0; k<deleteArray_edit.length; k++){\n      if(deleteArray_edit[k].get('PRI_ID')==items[i].get('PRI_ID')){\n        del_flag = false;\n        break;\n      }\n    }\n    if(del_flag==true){\n      deleteArray_edit.push(items[i]);\n    }\n  }\n}\n\n//点击>>或者双击行时触发\nfunction addItems_edit(items, type){\n  var tempArray = new Array();\n  \n  if(type=='user'){\n    // 根据id判断，去除重复的item\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = app.selectUserGrid_edit.store.find('PRI_ID',item.get('PRI_ID'));\n      if(index==-1){\n        tempArray.push(item);\n      }\n    }\n    for(var j=0; j<tempArray.length; j++){\n      app.selectUserGrid_edit.store.add(tempArray[j]);\n    }\n  }else if(type=='post'){\n    // 根据id判断，去除重复的item\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = app.selectPostGrid_edit.store.find('PRI_ID',item.get('PRI_ID'));\n      if(index==-1){\n        tempArray.push(item);\n      }\n    }\n    for(var j=0; j<tempArray.length; j++){\n      app.selectPostGrid_edit.store.add(tempArray[j]);\n    }\n  }else if(type=='dept'){\n    // 根据id判断，去除重复的item\n    for (var i=items.length-1; i>=0; i--) {\n      var item = items[i];\n      //如果返回-1说明没有找到相匹配的record\n      var index = app.selectdeptGrid_edit.store.find('PRI_ID',item.get('PRI_ID'));\n      if(index==-1){\n        tempArray.push(item);\n      }\n    }\n    for(var j=0; j<tempArray.length; j++){\n       app.selectdeptGrid_edit.store.add(tempArray[j]);\n    }\n  }\n  \n  itemsAddWithArrayOperator(tempArray);\n}\n\n//点击<<或者双击行时触发\nfunction removeItems_edit(items, type){\n  if(type=='user'){\n    for(var i=0; i<items.length; i++){\n      app.selectUserGrid_edit.store.remove(items[i]);\n    }\n  }else if(type=='post'){\n    for(var i=0; i<items.length; i++){\n      app.selectPostGrid_edit.store.remove(items[i]);\n    }\n  }else if(type=='dept'){\n    for(var i=0; i<items.length; i++){\n      app.selectdeptGrid_edit.store.remove(items[i]);\n    }\n  }\n  \n  itemsRemoveWithArrayOperator(items);\n}","initialize":"var loadStoreA;\nvar loadStoreB;\nvar loadStoreC;\nvar loadStoreD;"},"children":[{"configs":{"itemId":"actInfoStore","url":"m?xwl=xip/wf/executer/DATA/getActById"},"events":{"load":"if(app.actInfoStore.getAt(0)) {\n  var record = app.actInfoStore.getAt(0);\n  //app.authActInfoForm.loadRecord(record);\n  app.ACT_ID_INFO.setValue(record.get('ACT_ID_INFO'));\n  app.APP_NAME_INFO.setValue(record.get('APP_NAME_INFO'));\n  app.PROCESS_NAME_INFO.setValue(record.get('PROCESS_NAME_INFO'));\n  app.ENTITY_NAME_INFO.setValue(record.get('ENTITY_NAME_INFO'));\n  app.ACT_NAME_INFO.setValue(record.get('ACT_NAME_INFO'));\n}"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"authWinBtn"},"children":[{"configs":{"text":"{#wf_executer_btn_all_auth#}","itemId":"btn_all_auth","iconCls":"insert_icon"},"events":{"click":"if(app.authSelectActGrid.store.getCount()===0){\n//   Ext.Msg.alert('提示','请选择进行授权的节点!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzjxsqdjd#}\") ;\n  return;\n}\n\nif(app.authSelectUpdGrid.store.getCount()===0){\n//   Ext.Msg.alert('提示','请选择用户,岗位,部门!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzyhgwbm#}\") ;\n  return;\n}\n\n// Ext.MessageBox.confirm('提示','确定对用户,岗位,部门进行授权?',function(item){\nExt.MessageBox.confirm(\"{#wf_executer_prompt#}\",'{#wf_executer_qddyhbmgwjxsq#}',function(item){\n  if(item==='yes'){ \n    var actArray = new Array();\n    app.authSelectActGrid.store.each(function(record){\n      actArray.push(record.data);\n    });\n\n    var priArray = new Array();\n    app.authSelectUpdGrid.store.each(function(record){\n      priArray.push(record.data);\n    });\n\n    var json = {\n      \"authorizeTopObject\" : actArray,\n      \"authorizeBottomObject\" : priArray\n    };\n\n    var jsonData = Ext.JSON.encode(json);\n//     var progressBar = Ext.Msg.wait(\"处理中，请稍候...\",\"提示\");\n    var progressBar = Ext.Msg.wait(\"{#wf_executer_clzqsh#}\",\"{#wf_executer_prompt#}\");\n    Ext.Ajax.request({\n      url: '{#contextPath#}' + '/actExecutorsAuthorizeAction.do?method=authorize',\n      method:'POST',\n      sync:'',\n      scope:this,\n      headers:{'Content-Type':'application/json'},\n      jsonData:json,\n      success: function(res, opts){\n        progressBar.hide();\n//         Ext.Msg.alert('','授权成功!');\n        Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_sqcg#}\") ;\n        //parent.Ext.getCmp('editAuthWin').close();\n      },\n      failure: function(res, opts){\n        progressBar.hide();\n        var respText = Ext.JSON.decode(res.responseText);\n        Ext.Msg.alert('',respText.msg);\n      }\n    });     \n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_btn_all_unauth#}","itemId":"btn_all_unauth","iconCls":"remove_icon"},"events":{"click":"if(app.authSelectActGrid.store.getCount()===0){\n//   Ext.Msg.alert('提示','请选择要取消授权的节点!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzyqxsqdjd#}\") ;\n  return;\n}\n\nif(app.authSelectUpdGrid.store.getCount()===0){\n//   Ext.Msg.alert('提示','请选择用户,岗位,部门!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzyhgwbm#}\") ;\n  return;\n}\n\n// Ext.MessageBox.confirm('提示','确定对用户,岗位,部门取消授权?',function(item){\nExt.MessageBox.confirm(\"{#wf_executer_prompt#}\",'{#wf_executer_qddyhgwbmqxsq#}',function(item){\n  if(item==='yes'){ \n    var actArray = [];\n    app.authSelectActGrid.store.each(function(record){\n      actArray.push(record.data);\n    });\n\n    var priArray = [];\n    app.authSelectUpdGrid.store.each(function(record){\n      priArray.push(record.data);\n    });\n\n    var json = {\n      \"authorizeTopObject\" : actArray,\n      \"authorizeBottomObject\" : priArray\n    };\n\n    var jsonData = Ext.JSON.encode(json);\n//     var progressBar = Ext.Msg.wait(\"处理中，请稍候...\",\"提示\");\n    var progressBar = Ext.Msg.wait(\"{#wf_executer_clzqsh#}\",\"{#wf_executer_prompt#}\");\n    Ext.Ajax.request({\n      url: '{#contextPath#}' + '/actExecutorsAuthorizeAction.do?method=cancel',\n      method:'POST',\n      sync:'',\n      scope:this,\n      headers:{'Content-Type':'application/json'},\n      jsonData:json,\n      success: function(res, opts){\n        progressBar.hide();\n//         Ext.Msg.alert('','取消授权成功!');\n        Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxsqcg#}\") ;\n        //parent.Ext.getCmp('editAuthWin').close();\n      },\n      failure: function(res, opts){\n        progressBar.hide();\n        var respText = Ext.JSON.decode(res.responseText);\n        Ext.Msg.alert('',respText.msg);\n      }\n    });     \n  }\n});\n\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_btn_cancel#}","itemId":"btn_cancel","iconCls":"cancel_icon"},"events":{"click":"app.authWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"array"},{"configs":{"itemId":"authEditWinBtn"},"children":[{"configs":{"text":"{#wf_executer_btn_edit_all_auth#}","itemId":"btn_edit_all_auth","iconCls":"backup_edit_icon"},"events":{"click":"if(addArray_edit.length==0 && deleteArray_edit.length==0){\n//   Ext.Msg.alert('提示','没有修改的授权信息!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_myxgdsqxx#}\") ;\n  return;\n}\n\n// Ext.MessageBox.confirm('提示','确定对用户,岗位,部门修改授权?',function(item){\nExt.MessageBox.confirm(\"{#wf_executer_prompt#}\",'{#wf_executer_qddyhgwbmxgsq#}',function(item){\n  if(item==='yes'){ \n    var tempAddArray = new Array();\n    var tempDeleteArray = new Array();\n\n    for(var i=0; i<addArray_edit.length; i++){\n      tempAddArray.push(addArray_edit[i].data);\n    }\n    for(var i=0; i<deleteArray_edit.length; i++){\n      tempDeleteArray.push(deleteArray_edit[i].data);\n    }\n\n    var json = {\n      \"authorizeTopObject\" : tempAddArray,\n      \"authorizeBottomObject\" : tempDeleteArray,\n      \"actId\":app.ACT_ID_INFO.getValue()\n    };\n\n    var jsonData = Ext.JSON.encode(json);\n//     var progressBar = Ext.Msg.wait(\"处理中，请稍候...\",\"提示\");\n    var progressBar = Ext.Msg.wait(\"{#wf_executer_clzqsh#}\",\"{#wf_executer_prompt#}\");\n    Ext.Ajax.request({\n      url: '{#contextPath#}' + '/actExecutorsAuthorizeAction.do?method=edit',\n      method:'POST',\n      sync:'',\n      scope:this,\n      headers:{'Content-Type':'application/json'},\n      jsonData:json,\n      success: function(res, opts){\n        progressBar.hide();\n//         Ext.Msg.alert('','修改成功!');\n        Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_xgcg#}\") ;\n        var actId = app.ACT_ID_INFO.getValue();\n        app.executorAuthGrid.store.getProxy().extraParams.actId = actId;\n        app.executorGrid.store.getProxy().extraParams.actId = actId;\n\n        app.executorAuthGrid.store.load();\n        app.executorGrid.store.load();\n        \n      },\n      failure: function(res, opts){\n        progressBar.hide();\n        var respText = Ext.JSON.decode(res.responseText);\n        Ext.Msg.alert('',respText.msg);\n      }\n    });\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_btn_cancel#}","itemId":"btn_edit_cancel","iconCls":"cancel_icon"},"events":{"click":"app.authEditWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"array"},{"configs":{"itemId":"wins"},"children":[{"configs":{"title":"{#wf_executer_yxjd#}","height":"450","width":"600","layout":"fit","closeAction":"hide","dialog":"false","itemId":"selectActsWin","modal":"true"},"children":[{"configs":{"pagingBar":"false","itemId":"authSelectActGrid"},"events":{"itemclick":"\n","selectionchange":"// if(!app.authAllActGrid.store.isLoading()){\n//   actSelectionchange(model, selected, options);\n// }"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_APP_NAME#}","hidden":"true","width":"180","dataIndex":"APP_NAME","itemId":"APP_NAME_authSelectActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ENTITY_NAME#}","hidden":"true","dataIndex":"ENTITY_NAME","itemId":"ENTITY_NAME_authSelectActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PROCESS_NAME#}","width":"150","dataIndex":"PROCESS_NAME","itemId":"PROCESS_NAME_authSelectActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_NAME#}","width":"150","dataIndex":"ACT_NAME","itemId":"ACT_NAME_authSelectActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CATEGORY_NAME#}","align":"center","width":"100","dataIndex":"ACT_CATEGORY_NAME","titleAlign":"center","itemId":"ACT_CATEGORY_NAME_authSelectActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CATEGORY_NAME#}","hidden":"true","dataIndex":"ACT_CATEGORY","itemId":"ACT_CATEGORY_authSelectActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_PROCESS_ID#}","hidden":"true","dataIndex":"PROCESS_ID","itemId":"PROCESS_ID_authSelectActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_ID#}","hidden":"true","dataIndex":"ACT_ID","itemId":"ACT_ID_authSelectActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CODE#}","hidden":"true","dataIndex":"ACT_CODE","itemId":"ACT_CODE_authSelectActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_DEL_COL_authSelectActGrid#}","width":"60","itemId":"DEL_COL_authSelectActGrid","renderer":"var str = \"<a href=\\\"javascript:delSelectedAct();\\\"> {#wf_executer_DEL_COL_authSelectActGrid#} <\/a>\";\nreturn str;"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getActs"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"title":"{#wf_executer_yxyhbmgw#}","height":"450","layout":"fit","width":"500","closeAction":"hide","dialog":"false","itemId":"selectUdpsWin","modal":"true"},"children":[{"configs":{"pagingBar":"false","itemId":"authSelectUpdGrid"},"events":{"itemclick":"\n","selectionchange":"// if(!app.authAllActGrid.store.isLoading()){\n//   actSelectionchange(model, selected, options);\n// }"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_NAME#}","width":"180","dataIndex":"PRI_NAME","itemId":"PRI_NAME_authSelectUpdGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","width":"100","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_authSelectUpdGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_authSelectUpdGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"id","hidden":"true","width":"150","dataIndex":"ACT_NAME","itemId":"PRI_ID_authSelectUpdGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_DEL_COL_authSelectActGrid#}","width":"60","itemId":"DEL_COL_authSelectUpdGrid","renderer":"var str = \"<a href=\\\"javascript:delSelectedUdp();\\\"> {#wf_executer_DEL_COL_authSelectActGrid#} <\/a>\";\nreturn str;"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getUdps"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"maximized":"true","title":"{#wf_executer_xzsq#}","height":"260","width":"380","layout":"border","closeAction":"hide","buttons":"app.authWinBtn","buttonAlign":"center","dialog":"false","itemId":"authWin"},"events":{"close":"clear();\nclearAll();"},"children":[{"configs":{"region":"west","frame":"false","style":"border-width:0px","width":"'48%'","layout":"border","border":"false","itemId":"authActPanel"},"children":[{"configs":{"region":"north","height":"70","style":"border-width:0px","layout":"fit","border":"false","itemId":"queryPanel_auth"},"children":[{"configs":{"region":"north","frame":"true","style":"border-width:0px;","border":"false","itemId":"queryForm_auth"},"children":[{"configs":{"height":"30","style":"border-width:0px;","layout":"column","columnWidth":"1","border":"false","itemId":"tr1"},"children":[{"configs":{"frame":"true","style":"border-width:0px","layout":"form","columnWidth":".4","border":"false","itemId":"td1"},"children":[{"configs":{"labelWidth":"80","displayField":"APP_NAME","width":"180","valueField":"APP_ID","labelAlign":"right","itemId":"appCombox_auth","fieldLabel":"{#wf_executer_appCombox#}"},"events":{"select":"app.entityCombox_auth.clearValue();\napp.entityCombox_auth.store.getProxy().extraParams.appId = app.appCombox_auth.getValue();\napp.entityCombox_auth.store.load();\napp.quertBtn_auth.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/data/getApps"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","layout":"form","columnWidth":".4","border":"false","itemId":"td2"},"children":[{"configs":{"labelWidth":"80","displayField":"NAME","width":"180","valueField":"ID","labelAlign":"right","itemId":"entityCombox_auth","fieldLabel":"{#wf_executer_entityCombox#}"},"events":{"select":"app.authAllActGrid.store.load();"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getEntitys_QueryForm"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","layout":"form","columnWidth":".2","border":"false","itemId":"td3"},"children":[{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"quertBtn_auth","iconCls":"seek_icon","x":"5"},"events":{"click":"app.authAllActGrid.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","style":"border-width:0px;","layout":"column","columnWidth":"1","border":"false","itemId":"tr2"},"children":[{"configs":{"frame":"true","style":"border-width:0px","layout":"form","columnWidth":".4","border":"false","itemId":"td1"},"children":[{"configs":{"labelWidth":"80","width":"200","labelAlign":"right","itemId":"processName_auth","fieldLabel":"{#wf_executer_PROCESS_NAME#}"},"events":{"specialkey":"app.authAllActGrid.store.load();"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","layout":"form","columnWidth":".4","border":"false","itemId":"td12"},"children":[{"configs":{"labelWidth":"80","width":"200","labelAlign":"right","itemId":"actName_auth","fieldLabel":"{#wf_executer_ACT_NAME#}"},"events":{"specialkey":"app.authAllActGrid.store.load();"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","layout":"form","columnWidth":".2","border":"false","itemId":"td11"},"children":[{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"resetBtn_auth","iconCls":"refresh_icon","x":"5"},"events":{"click":"Wb.reset(app.queryForm_auth);\napp.authAllActGrid.store.load();\napp.entityCombox_auth.store.getProxy().extraParams.appId = app.appCombox_auth.getValue();\napp.entityCombox_auth.store.load();\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"}],"expanded":false,"type":"panel"},{"configs":{"region":"center","style":"border-width:0px","layout":"fit","border":"false","itemId":"authAllActPanel"},"children":[{"configs":{"title":"{#wf_executer_qbjd#}","multiSelect":"true","selType":"checkboxmodel","itemId":"authAllActGrid","simpleSelect":"true"},"events":{"itemclick":"\n","selectionchange":"if(!loadStoreA){\n  actSelectionchange(selModel, selected, options);\n}"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_APP_NAME#}","hidden":"true","width":"180","dataIndex":"APP_NAME","itemId":"APP_NAME_authAllActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ENTITY_NAME#}","hidden":"true","dataIndex":"ENTITY_NAME","itemId":"ENTITY_NAME_authAllActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PROCESS_NAME#}","width":"150","dataIndex":"PROCESS_NAME","itemId":"PROCESS_NAME_authAllActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_NAME#}","width":"150","dataIndex":"ACT_NAME","itemId":"ACT_NAME_authAllActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CATEGORY_NAME#}","align":"center","width":"100","dataIndex":"ACT_CATEGORY_NAME","titleAlign":"center","itemId":"ACT_CATEGORY_NAME_authAllActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CATEGORY_NAME#}","hidden":"true","dataIndex":"ACT_CATEGORY","itemId":"ACT_CATEGORY_authAllActGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_PROCESS_ID#}","hidden":"true","dataIndex":"PROCESS_ID","itemId":"PROCESS_ID_authAllActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_ID#}","hidden":"true","dataIndex":"ACT_ID","itemId":"ACT_ID_authAllActGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CODE#}","hidden":"true","dataIndex":"ACT_CODE","itemId":"ACT_CODE_authAllActGrid"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getActs_auth"},"events":{"load":"var tempArray = new Array();\nfor(var i=0; i<hasSelectActArray.length; i++){\n  var index = app.authAllActGrid.store.find('ACT_ID',hasSelectActArray[i]);\n  \n  if(index != -1){\n    tempArray.push(app.authAllActGrid.store.getAt(index));\n  }\n}\n\napp.authAllActGrid.getSelectionModel().select(tempArray);\nloadStoreA = false;","beforeload":"loadStoreA = true;\nvar whereSql = '';\nif(!Ext.isEmpty(app.appCombox_auth.getValue())){\n  whereSql = whereSql+' and a.app_id = \\''+app.appCombox_auth.getValue()+'\\'';\n}\nif(!Ext.isEmpty(app.entityCombox_auth.getValue())){\n  whereSql = whereSql+' and e.entity_id = \\''+app.entityCombox_auth.getValue()+'\\'';\n}\n\nif(whereSql !== ''){\n  store.getProxy().extraParams.whereSql= whereSql;\n}else{\n  store.getProxy().extraParams.whereSql= ' and 1=1'; \n}\nstore.getProxy().extraParams.processName_auth = app.processName_auth.getValue();\nstore.getProxy().extraParams.actName_auth = app.actName_auth.getValue();\n"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"region":"south","height":"30","style":"border-width:0px","layout":"border","border":"false","itemId":"showActSelectInfoPanel"},"children":[{"configs":{"region":"center","frame":"true","style":"border-width:0px","width":"'45%'","border":"false","itemId":"centerPanel"},"children":[{"configs":{"html":"<!DOCTYPE html>\n<html>\n<head>\n<\/head>\n<body>\n<a href=\"javascript:void(0)\"  onclick = \"app.selectActsWin.show()\"  style=\"text-decoration:none;color:black;font-weight:bold;\" id=\"showSelectActWin\" >{#wf_executer_yxjd#}(0)<\/a>\n  <\/body>\n<\/html>\n\t","itemId":"actInfoLabel"},"children":[],"expanded":false,"type":"label"}],"expanded":false,"type":"panel"},{"configs":{"region":"west","frame":"true","style":"border-width:0px","width":"'40%'","border":"false","itemId":"westPanel"},"children":[],"expanded":false,"type":"panel"},{"configs":{"region":"east","frame":"true","style":"border-width:0px","width":"25","border":"false","itemId":"eastPanel"},"children":[{"configs":{"html":"<!DOCTYPE html>\n<html>\n<head>\n<\/head>\n<body>\n<a href=\"javascript:void(0)\" onclick = \"javascript:delAllSelectedAct();\" title=\"{#wf_executer_scqbyxjd#}\" style=\"text-decoration:none;color:black;font-weight:bold;\" id=\"delSelectActs\" ><image src=\"{#delImageSrc#}\"><\/image><\/a>\n<\/body>\n<\/html>\n\t","itemId":"deleteAllAtcs"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"region":"center","frame":"false","style":"border-width:0px","layout":"border","border":"false","itemId":"splitPanel"},"children":[],"expanded":true,"type":"panel"},{"configs":{"region":"east","height":"'45%'","frame":"false","style":"border-width:0px","width":"'48%'","layout":"border","border":"false","itemId":"authUdpPanel"},"children":[{"configs":{"region":"center","style":"border-width:0px","border":"false","itemId":"authTabPanel"},"children":[{"configs":{"title":"{#wf_executer_EMP_NAME#}","frame":"true","style":"border-width:0px","layout":"border","border":"false","itemId":"userPanel"},"children":[{"configs":{"region":"north","frame":"true","height":"100","style":"border-width:0px","border":"false","itemId":"allUserQueryForm"},"children":[{"configs":{"frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"org_tr"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"ORG_NAME","width":"400","valueField":"ORG_ID","labelAlign":"right","itemId":"orgCombox_user_auth","fieldLabel":"{#wf_executer_ORG_NAME#}","editable":"false"},"events":{"select":"Wb.reset(app.deptCombox_user_auth);\napp.btn_user_query.fireEvent('click');\napp.deptCombox_user_auth.store.load();"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getOrgs_query"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"dept_tr"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"DEPT_NAME","width":"400","valueField":"DEPT_ID","labelAlign":"right","itemId":"deptCombox_user_auth","fieldLabel":"{#wf_executer_DEPT_NAME#}","editable":"false"},"events":{"select":"app.btn_user_query.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getDepts_query"},"events":{"beforeload":"store.getProxy().extraParams.org_id = app.orgCombox_user_auth.getValue();\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:5px;","layout":"column","border":"false","itemId":"tr"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"queryUserName","fieldLabel":"{#wf_executer_EMP_NAME_NAME#}"},"events":{"specialkey":"app.btn_user_query.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"btn_user_query","iconCls":"seek_icon","x":"20"},"events":{"click":"app.allUserGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"btn_user_reset","iconCls":"refresh_icon","x":"30"},"events":{"click":"Wb.reset(app.allUserQueryForm);\napp.allUserGrid.store.load();\napp.deptCombox_user_auth.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","border":"false","itemId":"allUserGrid","simpleSelect":"true"},"events":{"selectionchange":"if(!loadStoreB){\n  udpGridSelectionchange(selModel, selected, options, 'U');\n}"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_allUserGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EMP_NAME_NAME_01#}","width":"150","dataIndex":"PRI_NAME","itemId":"PRI_NAME_allUserGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_USER_NAME#}","dataIndex":"EMP_NAME","itemId":"EMP_NAME_allUserGrid","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_allUserGrid"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getUsers"},"events":{"load":"var tempArray = new Array();\nfor(var i=0; i<hasSelectUdpArray.length; i++){\n  \n  var index = app.allUserGrid.store.find('PRI_ID',hasSelectUdpArray[i]);\n  \n  if(index != -1){\n    tempArray.push(app.allUserGrid.store.getAt(index));\n  }\n}\napp.allUserGrid.getSelectionModel().select(tempArray);\nloadStoreB = false;","beforeload":"loadStoreB = true;\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_user_auth.getValue())){\n  whereSql +=' AND a.ORG_ID =\\''+app.orgCombox_user_auth.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.deptCombox_user_auth.getValue())){\n  whereSql +=' AND a.DEPT_ID =\\''+app.deptCombox_user_auth.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryUserName.getValue())){\n  whereSql +=' AND (p.USER_NAME like \\'%'+app.queryUserName.getValue().toUpperCase()+'%\\' or e.EMP_NAME like \\'%'+ app.queryUserName.getValue().toUpperCase +'%\\' )';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#wf_executer_POST_NAME#}","frame":"true","style":"border-width:0px","layout":"border","border":"false","itemId":"postPanel"},"children":[{"configs":{"region":"north","frame":"true","height":"100","style":"border-width:0px","border":"false","itemId":"allPostQueryForm"},"children":[{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr_org"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"ORG_NAME","width":"400","valueField":"ORG_ID","labelAlign":"right","itemId":"orgCombox_post_auth","fieldLabel":"{#wf_executer_ORG_NAME#}","editable":"false"},"events":{"select":"Wb.reset(app.deptCombox_post_auth);\napp.btn_post_query.fireEvent('click');\napp.deptCombox_post_auth.store.load();"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getOrgs_query"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr_dept"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"DEPT_NAME","width":"400","valueField":"DEPT_ID","labelAlign":"right","itemId":"deptCombox_post_auth","fieldLabel":"{#wf_executer_DEPT_NAME#}"},"events":{"select":"app.btn_post_query.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getDepts_query"},"events":{"beforeload":"store.getProxy().extraParams.org_id = app.orgCombox_post_auth.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"queryPostName","fieldLabel":"{#wf_executer_POST_NAME#}"},"events":{"specialkey":"app.btn_post_query.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"btn_post_query","iconCls":"seek_icon","x":"20"},"events":{"click":"app.allPostGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"btn_post_reset","iconCls":"refresh_icon","x":"30"},"events":{"click":"Wb.reset(app.allPostQueryForm);\napp.btn_post_query.fireEvent('click');\napp.deptCombox_post_auth.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"false","selType":"checkboxmodel","border":"false","itemId":"allPostGrid","simpleSelect":"true"},"events":{"selectionchange":"if(!loadStoreC){\n  udpGridSelectionchange(selModel, selected, options, 'P');\n}\n"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_NAME_allPostGrid#}","width":"120","dataIndex":"PRI_NAME","itemId":"PRI_NAME_allPostGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_DEPT_NAME_allPostGrid#}","width":"120","dataIndex":"DEPT_NAME","itemId":"DEPT_NAME_allPostGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ORG_NAME_allPostGrid#}","width":"120","dataIndex":"ORG_NAME","itemId":"ORG_NAME_allPostGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_allPostGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_allPostGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_allPostGrid"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getPosts"},"events":{"load":"var tempArray = new Array();\n\nfor(var i=0; i<hasSelectUdpArray.length; i++){\n  \n  var index = app.allPostGrid.store.find('PRI_ID',hasSelectUdpArray[i]);\n  \n  if(index != -1){\n    tempArray.push(app.allPostGrid.store.getAt(index));\n  }\n  \n}\n\napp.allPostGrid.getSelectionModel().select(tempArray);\nloadStoreC = false ;","beforeload":"loadStoreC = true ;\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_post_auth.getValue())){\n  whereSql +=' AND p.ORG_ID =\\''+app.orgCombox_post_auth.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.deptCombox_post_auth.getValue())){\n  whereSql +=' AND p.DEPT_ID =\\''+app.deptCombox_post_auth.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryPostName.getValue())){\n  whereSql +=' AND p.POST_NAME like \\'%'+app.queryPostName.getValue()+'%\\'';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#wf_executer_DEPT_NAME#}","frame":"true","style":"border-width:0px","layout":"border","border":"false","itemId":"deptPanel"},"children":[{"configs":{"region":"north","frame":"true","height":"70","style":"border-width:0px","border":"false","itemId":"allDeptQueryForm"},"children":[{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"ORG_NAME","width":"400","valueField":"ORG_ID","labelAlign":"right","itemId":"orgCombox_dept_auth","fieldLabel":"{#wf_executer_ORG_NAME#}","editable":"false"},"events":{"select":"app.btn_dept_query.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getOrgs_query"},"events":{"beforeload":"store.getProxy().extraParams.org_name = app.orgCombox_dept_auth.getRawValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"queryDeptName","fieldLabel":"{#wf_executer_DEPT_NAME#}"},"events":{"specialkey":"app.btn_dept_query.fireEvent('click');\n"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"btn_dept_query","iconCls":"seek_icon","x":"20"},"events":{"click":"app.allDeptGrid.store.load();\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"btn_dept_reset","iconCls":"refresh_icon","x":"30"},"events":{"click":"Wb.reset(app.allDeptQueryForm);\napp.btn_dept_query.fireEvent('click');\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"false","selType":"checkboxmodel","border":"false","itemId":"allDeptGrid","simpleSelect":"true"},"events":{"selectionchange":"if(!loadStoreD){\n  udpGridSelectionchange(selModel, selected, options, 'D');\n}"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_DEPT_NAME_allPostGrid#}","width":"150","dataIndex":"PRI_NAME","itemId":"PRI_NAME_allDeptGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ORG_NAME_allPostGrid#}","width":"120","dataIndex":"ORG_NAME","itemId":"ORG_NAME_allDeptGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_allDeptGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_allDeptGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_allDeptGrid"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getDepts"},"events":{"load":"var tempArray = new Array();\n\nfor(var i=0; i<hasSelectUdpArray.length; i++){\n  \n  var index = app.allDeptGrid.store.find('PRI_ID',hasSelectUdpArray[i]);\n  \n  if(index != -1){\n    tempArray.push(app.allDeptGrid.store.getAt(index));\n  }\n  \n}\n\napp.allDeptGrid.getSelectionModel().select(tempArray);\nloadStoreD = false;","beforeload":"loadStoreD = true;\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_dept_auth.getValue())){\n  whereSql +=' AND p.ORG_ID =\\''+app.orgCombox_dept_auth.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryDeptName.getValue())){\n  whereSql +=' AND p.DEPT_NAME like \\'%'+app.queryDeptName.getValue()+'%\\'';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"}],"expanded":false,"type":"tab"},{"configs":{"region":"south","height":"30","frame":"false","style":"border-width:0px","layout":"border","border":"false","itemId":"showUdpSelectInfoPanel"},"children":[{"configs":{"region":"west","frame":"true","style":"border-width:0px","width":"'35%'","border":"false","itemId":"westPanel"},"children":[],"expanded":false,"type":"panel"},{"configs":{"region":"center","frame":"true","style":"border-width:0px","width":"'50%'","border":"false","itemId":"centerPanel"},"children":[{"configs":{"html":"\n<!DOCTYPE html>\n<html>\n<head>\n<\/head>\n<body>\n<a href=\"javascript:void(0)\"  onclick = \"app.selectUdpsWin.show()\"  style=\"text-decoration:none;color:black;font-weight:bold;\" id=\"sumSelectUdp\" >{#wf_executer_yxyh#}(0){#wf_executer_yxgw#}(0){#wf_executer_yxbm#}(0)<\/a>\n  <\/body>\n<\/html>\n\t","itemId":"updInfLabel"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"region":"east","frame":"true","style":"border-width:0px","width":"25","border":"false","itemId":"eastPanel"},"children":[{"configs":{"html":"<!DOCTYPE html>\n<html>\n<head>\n<\/head>\n<body>\n<a href=\"javascript:void(0)\"  onclick = \"delAllSelectedUdp();\" title=\"{#wf_executer_scqbyxyhgwbm#}\" style=\"text-decoration:none;color:black;font-weight:bold;\" id=\"fun\" ><image src=\"{#delImageSrc#}\"><\/image><\/a>\n  <\/body>\n<\/html>\n\t","itemId":"deleteAllUdp"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":false,"type":"window"},{"configs":{"maximized":"true","title":"{#wf_executer_bjsq#}","layout":"border","closeAction":"hide","buttons":"app.authEditWinBtn","buttonAlign":"center","dialog":"false","itemId":"authEditWin"},"children":[{"configs":{"region":"north","height":"100","frame":"true","style":"border-width:0px","layout":"fit","border":"false","itemId":"authActInfoPanel_edit"},"children":[{"configs":{"frame":"true","style":"border-width:0px","layout":"fit","border":"false","itemId":"authActInfoForm"},"children":[{"configs":{"title":"{#wf_executer_authActInfoFieldSet#}","layout":"column","itemId":"authActInfoFieldSet"},"children":[{"configs":{"frame":"true","style":"border-width:0px","width":"300","layout":"form","border":"false","itemId":"panel1"},"children":[{"configs":{"hidden":"true","itemId":"ACT_ID_INFO"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","readOnly":"true","labelAlign":"right","itemId":"APP_NAME_INFO","fieldLabel":"{#wf_executer_APP_NAME#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","readOnly":"true","labelAlign":"right","itemId":"PROCESS_NAME_INFO","fieldLabel":"{#wf_executer_PROCESS_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px","width":"300","layout":"form","border":"false","itemId":"panel2"},"children":[{"configs":{"labelWidth":"100","readOnly":"true","labelAlign":"right","itemId":"ENTITY_NAME_INFO","fieldLabel":"{#wf_executer_ENTITY_NAME#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","readOnly":"true","labelAlign":"right","itemId":"ACT_NAME_INFO","fieldLabel":"{#wf_executer_ACT_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"fieldset"}],"expanded":true,"type":"form"}],"expanded":false,"type":"panel"},{"configs":{"region":"center","itemId":"authTabPanel_edit"},"children":[{"configs":{"title":"{#wf_executer_EMP_NAME#}","style":"border-width:0px","layout":"border","itemId":"userPanel_edit"},"children":[{"configs":{"region":"west","frame":"true","width":"'47%'","layout":"border","border":"false","itemId":"allUserPanel_edit"},"children":[{"configs":{"region":"north","frame":"true","height":"100","style":"border-width:0px","border":"false","itemId":"allUserQueryForm_edit"},"children":[{"configs":{"frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"org_tr"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"ORG_NAME","width":"400","valueField":"ORG_ID","labelAlign":"right","itemId":"orgCombox_user_edit","fieldLabel":"{#wf_executer_ORG_NAME#}","editable":"false"},"events":{"select":"Wb.reset(app.deptCombox_user_edit);\napp.btn_user_query_edit.fireEvent('click');\napp.deptCombox_user_edit.store.load();"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getOrgs_query"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"dept_tr"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"DEPT_NAME","width":"400","valueField":"DEPT_ID","labelAlign":"right","itemId":"deptCombox_user_edit","fieldLabel":"{#wf_executer_DEPT_NAME#}","editable":"false"},"events":{"select":"app.btn_user_query_edit.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getDepts_query"},"events":{"beforeload":"store.getProxy().extraParams.org_id = app.orgCombox_user_edit.getValue();\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"true","style":"border-width:0px;padding-top:5px;","layout":"column","border":"false","itemId":"tr"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"queryUserName_edit","fieldLabel":"{#wf_executer_EMP_NAME_NAME#}"},"events":{"specialkey":"app.btn_user_query_edit.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"btn_user_query_edit","iconCls":"seek_icon","x":"20"},"events":{"click":"app.allUserGrid_edit.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"btn_user_reset_edit","iconCls":"refresh_icon","x":"30"},"events":{"click":"Wb.reset(app.allUserQueryForm_edit);\napp.allUserGrid_edit.store.load();\napp.deptCombox_user_edit.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","title":"{#wf_executer_qbyh#}","multiSelect":"true","selType":"checkboxmodel","border":"false","itemId":"allUserGrid_edit","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_allUserGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EMP_NAME_NAME_01#}","width":"200","dataIndex":"PRI_NAME","itemId":"PRI_NAME_allUserGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_USER_NAME#}","dataIndex":"EMP_NAME","itemId":"EMP_NAME_allUserGrid_edit","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_allUserGrid_edit"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getUsers_edit"},"events":{"load":"// var arr = [];\n// for(var i=0;i< app.selectGrid.store.getCount();i++){\n//   var uid = app.selectGrid.store.getAt(i).get('ID');\n//   for(var j=0;j< app.userGrid.store.getCount();j++){\n//     if(uid === app.userGrid.store.getAt(j).get('USER_ID')){\n//        arr.push(app.userGrid.store.getAt(j));\n//        break;\n//     }  \n//   }\n// }\n// app.userGrid.getSelectionModel().select(arr);\n// loadStaU = false;\nvar tempArray = new Array();\n\n/*for(var i=0; i<selectUdpStore_auth.getCount(); i++){\n  var record = selectUdpStore_auth.getAt();\n  \n  if(record.get('PRI_TYPE') == 'U'){\n    var index = userStore.find('PRI_ID',record.get('PRI_ID'));\n    if(index != -1){\n      tempArray.push(userStore.getAt(index));\n    }\n  }\n}*/\n\n// for(var i=0; i<hasSelectUdpArray.length; i++){\n  \n//   var index = userStore.find('PRI_ID',hasSelectUdpArray[i]);\n  \n//   if(index != -1){\n//     tempArray.push(userStore.getAt(index));\n//   }\n  \n// }\n\n// allUserGrid.getSelectionModel().select(tempArray);","beforeload":"//loadStaU = true;\n\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_user_edit.getValue())){\n  whereSql +=' AND a.ORG_ID =\\''+app.orgCombox_user_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.deptCombox_user_edit.getValue())){\n  whereSql +=' AND a.DEPT_ID =\\''+app.deptCombox_user_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryUserName_edit.getValue())){\n  whereSql +=' AND (p.USER_NAME like \\'%'+app.queryUserName_edit.getValue().toUpperCase()+'%\\' or e.EMP_NAME like \\'%'+ app.queryUserName_edit.getValue().toUpperCase() +'%\\' )';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"region":"center","frame":"true","style":"border-width:0px","width":"'6%'","layout":"border","border":"false","itemId":"centerBtnPanel"},"children":[{"configs":{"region":"north","frame":"true","height":"'30%'","style":"border-width:0px","border":"false","itemId":"northPanel"},"children":[],"expanded":false,"type":"panel"},{"configs":{"region":"center","frame":"true","height":"'30%'","style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"centerPanel"},"children":[{"configs":{"text":">>","width":"'100%'","itemId":"btn_user_select_edit"},"events":{"click":"var items = app.allUserGrid_edit.getSelectionModel().getSelection();\n\nif(items.length===0){\n//   Ext.Msg.alert('提示','请选择用户!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzyh#}\") ;\n  return;\n}\n\naddItems_edit(items, 'user');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"south","height":"'30%'","frame":"true","style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"southPanel"},"children":[{"configs":{"text":"<<","width":"'100%'","itemId":"btn_user_unselect_edit"},"events":{"click":"var items = app.selectUserGrid_edit.getSelectionModel().getSelection();\n\nif(items.length===0){\n//   Ext.Msg.alert('提示','请选择用户!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzyh#}\") ;\n  return;\n}\n\nremoveItems_edit(items, 'user');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"region":"east","frame":"true","width":"'47%'","layout":"fit","border":"false","itemId":"selectUserPanel_edit"},"children":[{"configs":{"region":"center","title":"{#wf_executer_yxysqyh#}","pagingBar":"false","multiSelect":"true","selType":"checkboxmodel","border":"false","itemId":"selectUserGrid_edit","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_selectUserGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EMP_NAME_NAME#}","width":"200","dataIndex":"PRI_NAME","itemId":"PRI_NAME_selectUserGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_USER_NAME#}","dataIndex":"EMP_NAME","itemId":"EMP_NAME_selectUserGrid_edit","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_selectUserGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_selectUserGrid_edit"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getAuthUsers"},"events":{"load":"// var arr = [];\n// for(var i=0;i< app.selectGrid.store.getCount();i++){\n//   var uid = app.selectGrid.store.getAt(i).get('ID');\n//   for(var j=0;j< app.userGrid.store.getCount();j++){\n//     if(uid === app.userGrid.store.getAt(j).get('USER_ID')){\n//        arr.push(app.userGrid.store.getAt(j));\n//        break;\n//     }  \n//   }\n// }\n// app.userGrid.getSelectionModel().select(arr);\n// loadStaU = false;\nvar tempArray = new Array();\n\n/*for(var i=0; i<selectUdpStore_auth.getCount(); i++){\n  var record = selectUdpStore_auth.getAt();\n  \n  if(record.get('PRI_TYPE') == 'U'){\n    var index = userStore.find('PRI_ID',record.get('PRI_ID'));\n    if(index != -1){\n      tempArray.push(userStore.getAt(index));\n    }\n  }\n}*/\n\n// for(var i=0; i<hasSelectUdpArray.length; i++){\n  \n//   var index = userStore.find('PRI_ID',hasSelectUdpArray[i]);\n  \n//   if(index != -1){\n//     tempArray.push(userStore.getAt(index));\n//   }\n  \n// }\n\n// allUserGrid.getSelectionModel().select(tempArray);","beforeload":"//loadStaU = true;\n\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_user_edit.getValue())){\n  whereSql +=' AND a.ORG_ID =\\''+app.orgCombox_user_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.deptCombox_user_edit.getValue())){\n  whereSql +=' AND a.DEPT_ID =\\''+app.deptCombox_user_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryUserName_edit.getValue())){\n  whereSql +=' AND (p.USER_NAME like \\'%'+app.queryUserName_edit.getValue().toUpperCase()+'%\\' or e.EMP_NAME like \\'%'+ app.queryUserName_edit.getValue().toUpperCase() +'%\\' )';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#wf_executer_POST_NAME#}","style":"border-width:0px","layout":"border","itemId":"postPanel_edit"},"children":[{"configs":{"region":"west","frame":"true","width":"'47%'","layout":"border","border":"false","itemId":"allPostPanel_edit"},"children":[{"configs":{"region":"north","frame":"true","height":"100","style":"border-width:0px","border":"false","itemId":"allPostQueryForm_edit"},"children":[{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr_org"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"ORG_NAME","width":"400","valueField":"ORG_ID","labelAlign":"right","itemId":"orgCombox_post_edit","fieldLabel":"{#wf_executer_ORG_NAME#}","editable":"false"},"events":{"select":"Wb.reset(app.deptCombox_post_edit);\napp.btn_post_query_edit.fireEvent('click');\napp.deptCombox_post_edit.store.load();"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getOrgs_query"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr_dept"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"DEPT_NAME","width":"400","valueField":"DEPT_ID","labelAlign":"right","itemId":"deptCombox_post_edit","fieldLabel":"{#wf_executer_DEPT_NAME#}"},"events":{"select":"app.btn_post_query_edit.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getDepts_query"},"events":{"beforeload":"store.getProxy().extraParams.org_id = app.orgCombox_post_edit.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"queryPostName_edit","fieldLabel":"{#wf_executer_POST_NAME#}"},"events":{"specialkey":"app.btn_post_query_edit.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"btn_post_query_edit","iconCls":"seek_icon","x":"20"},"events":{"click":"app.allPostGrid_edit.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"btn_post_reset_edit","iconCls":"refresh_icon","x":"30"},"events":{"click":"Wb.reset(app.allPostQueryForm_edit);\napp.btn_post_query_edit.fireEvent('click');\napp.deptCombox_post_edit.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","title":"{#wf_executer_qbgw#}","multiSelect":"false","selType":"checkboxmodel","border":"false","itemId":"allPostGrid_edit","simpleSelect":"true"},"events":{"tagEvents":"select:function(record, index, eOpts){\n  var row = app.postGrid.getSelection();\n  var sm = app.postGrid.getSelectionModel();\n  var records = sm.getSelection();\n  var len = app.selectGrid.store.getModifiedRecords().length;\n  var record = app.selectGrid.store.getModifiedRecords();\n  //获取当前页中已勾选的ID，拼接成字符串放到一个隐藏的文本框中\n  var arrid = '';\n  for(var v= 0;v< row.length;v++){\n    var idNu = records[v].get('POST_ID');\n    arrid = arrid+','+idNu;\n  }\n  app.USER_ID_11.setValue(arrid.substring(1,arrid.length));\n  //给SelectedUserWin中的STORE添加数据\n  if(row.length === 1){\n    var bl;\n    for(var i=0;i<len;i++){\n    var user_id = record[i].data.ID;\n    if(records[0].get('POST_ID')=== user_id){\n        bl=1;\n        break;\n      }\n      else{\n        bl=0;\n      }\n    }\n    if(bl!==1){\n        var json = {\n                    ID: records[0].get('POST_ID'),\n                    NAME: records[0].get('POST_NAME'),\n                    TYPE: 'P',\n                    ORG_ID: app.orgComboBox11.getValue(),\n                    DEPT_ID: app.deptComboBox1.getValue()\n                   };\n        app.selectGrid.store.add(json);\n\n    }\n\n  }else{\n\n    var bl;\n    for(var i=0;i<len;i++){\n      var user_id = app.selectGrid.store.getAt(i).get('ID');\n      if(records[row.length-1].get('POST_ID')=== user_id){\n        bl=1;\n        break;\n      }\n      else{\n        bl=0;\n      }\n    }\n    if(bl!==1){\n       var json={\n                 ID: records[row.length-1].get('POST_ID'),\n                 NAME: records[row.length-1].get('POST_NAME'),\n                 TYPE: 'P',\n                 ORG_ID: app.orgComboBox11.getValue(),\n                 DEPT_ID: app.deptComboBox1.getValue()\n                };\n       app.selectGrid.store.add(json);\n    }\n  }\n  app.FLAG.setValue(row.length);\n  app.userCount();;\n}","selectionchange":"var flag = app.FLAG.getValue();\nvar row = app.postGrid.getSelection();\nvar sm = app.postGrid.getSelectionModel();\nvar records = sm.getSelection();\nif(flag=== null||flag=== ''){\n  \n}\nelse{\n  if(row.length < flag && loadStaP===false){\n    //获取当前页中已勾选的ID(取消勾选时)\n    var abl;\n    var arrayid = app.USER_ID_11.getValue().split(',');\n    for(var i=0 ;i< arrayid.length ;i++){\n        var aid = arrayid[i];\n        for(var v=0 ;v< row.length ;v++){\n          var idN = records[v].get('POST_ID');\n          if(aid === idN){\n            abl=1;\n            break;\n          }else{\n            abl=0;\n          }\n        }\n        if(abl!==1){\n          //在弹出的WIN中删掉ID为该ID的数据\n               for(var k=0;k< app.selectGrid.store.getCount();k++){\n                  var  user_id3 = app.selectGrid.store.getAt(k).get('ID');\n                  if(aid === user_id3){\n                    app.selectGrid.store.removeAt(k);\n                  }\n              }\n        }\n    }\n   \n   }\n  \n}\napp.userCount();"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_NAME_allPostGrid#}","width":"120","dataIndex":"PRI_NAME","itemId":"PRI_NAME_allPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_DEPT_NAME_allPostGrid#}","width":"120","dataIndex":"DEPT_NAME","itemId":"DEPT_NAME_allPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ORG_NAME_allPostGrid#}","dataIndex":"ORG_NAME","itemId":"ORG_NAME_allPostGrid_edit","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_allPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_allPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_allPostGrid_edit"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getPosts_edit"},"events":{"load":"// var tempArray = new Array();\n\n// /*for(var i=0; i<selectUdpStore_auth.getCount(); i++){\n//   var record = selectUdpStore_auth.getAt();\n  \n//   if(record.get('PRI_TYPE') == 'P'){\n//     var index = postStore.find('PRI_ID',record.get('PRI_ID'));\n//     if(index != -1){\n//       tempArray.push(postStore.getAt(index));\n//     }\n//   }\n// }*/\n\n// for(var i=0; i<hasSelectUdpArray.length; i++){\n  \n//   var index = postStore.find('PRI_ID',hasSelectUdpArray[i]);\n  \n//   if(index != -1){\n//     tempArray.push(postStore.getAt(index));\n//   }\n  \n// }\n\n// allPostGrid.getSelectionModel().select(tempArray);","beforeload":"//loadStaP = true ;\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_post_edit.getValue())){\n  whereSql +=' AND p.ORG_ID =\\''+app.orgCombox_post_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.deptCombox_post_edit.getValue())){\n  whereSql +=' AND p.DEPT_ID =\\''+app.deptCombox_post_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryPostName_edit.getValue())){\n  whereSql +=' AND p.POST_NAME like \\'%'+app.queryPostName_edit.getValue()+'%\\'';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","frame":"true","style":"border-width:0px","width":"'6%'","layout":"border","border":"false","itemId":"centerBtnPanel"},"children":[{"configs":{"region":"north","frame":"true","height":"'30%'","style":"border-width:0px","border":"false","itemId":"northPanel"},"children":[],"expanded":false,"type":"panel"},{"configs":{"region":"center","frame":"true","height":"'30%'","style":"border-width:0px","layout":"form","border":"false","itemId":"centerPanel"},"children":[{"configs":{"text":">>","width":"'100%'","itemId":"btn_user_select_edit"},"events":{"click":"var items = app.allPostGrid_edit.getSelectionModel().getSelection();\n\nif(items.length===0){\n//   Ext.Msg.alert('提示','请选择岗位!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzgw#}\") ;\n  return;\n}\n\naddItems_edit(items, 'post');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"south","height":"'30%'","frame":"true","style":"border-width:0px","layout":"form","border":"false","itemId":"southPanel"},"children":[{"configs":{"text":"<<","width":"'100%'","itemId":"btn_user_unselect_edit"},"events":{"click":"var items = app.selectPostGrid_edit.getSelectionModel().getSelection();\n\nif(items.length===0){\n//   Ext.Msg.alert('提示','请选择岗位!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzgw#}\") ;\n  return;\n}\n\nremoveItems_edit(items, 'post');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"region":"east","frame":"true","width":"'47%'","layout":"fit","border":"false","itemId":"selectPostPanel_edit"},"children":[{"configs":{"region":"center","title":"{#wf_executer_yxysqgw#}","pagingBar":"false","multiSelect":"true","selType":"checkboxmodel","border":"false","itemId":"selectPostGrid_edit","simpleSelect":"true"},"children":[{"configs":{"pageSize":"25","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getAuthPosts"},"events":{"load":"// var arr = [];\n// for(var i=0;i< app.selectGrid.store.getCount();i++){\n//   var uid = app.selectGrid.store.getAt(i).get('ID');\n//   for(var j=0;j< app.userGrid.store.getCount();j++){\n//     if(uid === app.userGrid.store.getAt(j).get('USER_ID')){\n//        arr.push(app.userGrid.store.getAt(j));\n//        break;\n//     }  \n//   }\n// }\n// app.userGrid.getSelectionModel().select(arr);\n// loadStaU = false;\nvar tempArray = new Array();\n\n/*for(var i=0; i<selectUdpStore_auth.getCount(); i++){\n  var record = selectUdpStore_auth.getAt();\n  \n  if(record.get('PRI_TYPE') == 'U'){\n    var index = userStore.find('PRI_ID',record.get('PRI_ID'));\n    if(index != -1){\n      tempArray.push(userStore.getAt(index));\n    }\n  }\n}*/\n\n// for(var i=0; i<hasSelectUdpArray.length; i++){\n  \n//   var index = userStore.find('PRI_ID',hasSelectUdpArray[i]);\n  \n//   if(index != -1){\n//     tempArray.push(userStore.getAt(index));\n//   }\n  \n// }\n\n// allUserGrid.getSelectionModel().select(tempArray);","beforeload":"//loadStaU = true;\n\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_user_edit.getValue())){\n  whereSql +=' AND a.ORG_ID =\\''+app.orgCombox_user_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.deptCombox_user_edit.getValue())){\n  whereSql +=' AND a.DEPT_ID =\\''+app.deptCombox_user_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryUserName_edit.getValue())){\n  whereSql +=' AND (p.USER_NAME like \\'%'+app.queryUserName_edit.getValue().toUpperCase()+'%\\' or e.EMP_NAME like \\'%'+ app.queryUserName_edit.getValue().toUpperCase() +'%\\' )';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_NAME_allPostGrid#}","width":"120","dataIndex":"PRI_NAME","itemId":"PRI_NAME_selectPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_DEPT_NAME_allPostGrid#}","width":"120","dataIndex":"DEPT_NAME","itemId":"DEPT_NAME_selectPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ORG_NAME_allPostGrid#}","dataIndex":"ORG_NAME","itemId":"ORG_NAME_selectPostGrid_edit","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_selectPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_selectPostGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_selectPostGrid_edit"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#wf_executer_DEPT_NAME#}","style":"border-width:0px","layout":"border","itemId":"deptPanel_edit"},"children":[{"configs":{"region":"west","frame":"true","width":"'47%'","layout":"border","border":"false","itemId":"allDeptPanel_edit"},"children":[{"configs":{"region":"north","frame":"true","height":"70","style":"border-width:0px","border":"false","itemId":"allDeptQueryForm_edit"},"children":[{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"labelWidth":"80","queryMode":"local","displayField":"ORG_NAME","width":"400","valueField":"ORG_ID","labelAlign":"right","itemId":"orgCombox_dept_edit","fieldLabel":"{#wf_executer_ORG_NAME#}","editable":"false"},"events":{"select":"app.btn_dept_query_edit.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getOrgs_query"},"events":{"beforeload":"store.getProxy().extraParams.org_name = app.orgCombox_dept_edit.getRawValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","frame":"true","style":"border-width:0px;padding-top:5px","layout":"column","border":"false","itemId":"tr"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"queryDeptName_edit","fieldLabel":"{#wf_executer_DEPT_NAME#}"},"events":{"specialkey":"app.btn_dept_query_edit.fireEvent('click');\n"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"btn_dept_query_edit","iconCls":"seek_icon","x":"20"},"events":{"click":"app.allDeptGrid_edit.store.load();\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"btn_dept_reset_edit","iconCls":"refresh_icon","x":"30"},"events":{"click":"Wb.reset(app.allDeptQueryForm_edit);\napp.btn_dept_query_edit.fireEvent('click');\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","title":"{#wf_executer_qbbm#}","multiSelect":"false","selType":"checkboxmodel","border":"false","itemId":"allDeptGrid_edit","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_DEPT_NAME_allPostGrid#}","width":"200","dataIndex":"PRI_NAME","itemId":"PRI_NAME_allDeptGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ORG_NAME_allPostGrid#}","dataIndex":"ORG_NAME","itemId":"ORG_NAME_allDeptGrid_edit","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_allDeptGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_allDeptGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"id","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_allDeptGrid_edit"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getDepts_edit"},"events":{"load":"// var tempArray = new Array();\n\n// /*for(var i=0; i<selectUdpStore_auth.getCount(); i++){\n//   var record = selectUdpStore_auth.getAt();\n  \n//   if(record.get('PRI_TYPE') == 'D'){\n//     var index = deptStore.find('PRI_ID',record.get('PRI_ID'));\n//     if(index != -1){\n//       tempArray.push(deptStore.getAt(index));\n//     }\n//   }\n// }*/\n\n// for(var i=0; i<hasSelectUdpArray.length; i++){\n  \n//   var index = deptStore.find('PRI_ID',hasSelectUdpArray[i]);\n  \n//   if(index != -1){\n//     tempArray.push(deptStore.getAt(index));\n//   }\n  \n// }\n\n// allDeptGrid.getSelectionModel().select(tempArray);","beforeload":"//loadStaD = true;\nvar whereSql = '';\n\nif(!Ext.isEmpty(app.orgCombox_dept_edit.getValue())){\n  whereSql +=' AND p.ORG_ID =\\''+app.orgCombox_dept_edit.getValue()+'\\'';\n}\n\nif(!Ext.isEmpty(app.queryDeptName_edit.getValue())){\n  whereSql +=' AND p.DEPT_NAME like \\'%'+app.queryDeptName_edit.getValue()+'%\\'';\n}\n\nstore.getProxy().extraParams.otherWhereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","frame":"true","style":"border-width:0px","width":"'6%'","layout":"border","border":"false","itemId":"centerBtnPanel"},"children":[{"configs":{"region":"north","frame":"true","height":"'30%'","style":"border-width:0px","border":"false","itemId":"northPanel"},"children":[],"expanded":false,"type":"panel"},{"configs":{"region":"center","frame":"true","height":"'30%'","style":"border-width:0px","layout":"form","border":"false","itemId":"centerPanel"},"children":[{"configs":{"text":">>","width":"'100%'","itemId":"btn_user_select_edit"},"events":{"click":"var items = app.allDeptGrid_edit.getSelectionModel().getSelection();\n\nif(items.length===0){\n//   Ext.Msg.alert('提示','请选择部门!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzbm#}\") ;\n  return;\n}\n\naddItems_edit(items, 'dept');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"south","height":"'30%'","frame":"true","style":"border-width:0px","layout":"form","border":"false","itemId":"southPanel"},"children":[{"configs":{"text":"<<","width":"'100%'","itemId":"btn_user_unselect_edit"},"events":{"click":"var items = app.selectdeptGrid_edit.getSelectionModel().getSelection();\n\nif(items.length===0){\n//   Ext.Msg.alert('提示','请选择部门!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzbm#}\") ;\n  return;\n}\n\nremoveItems_edit(items, 'dept');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"region":"east","frame":"true","width":"'47%'","layout":"fit","border":"false","itemId":"selectDeptPanel_edit"},"children":[{"configs":{"region":"center","title":"{#wf_executer_yxysqbm#}","pagingBar":"false","multiSelect":"true","selType":"checkboxmodel","border":"false","itemId":"selectdeptGrid_edit","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"PRI_ID","itemId":"PRI_ID_selectDeptGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EMP_NAME_NAME#}","width":"200","dataIndex":"PRI_NAME","itemId":"PRI_NAME_selectDeptGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_USER_NAME#}","dataIndex":"EMP_NAME","itemId":"EMP_NAME_selectDeptGrid_edit","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE","itemId":"PRI_TYPE_selectDeptGrid_edit"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PRI_TYPE_NAME#}","hidden":"true","dataIndex":"PRI_TYPE_NAME","itemId":"PRI_TYPE_NAME_selectDeptGrid_edit"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"25","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getAuthDepts"},"events":{"load":"// var arr = [];\n// for(var i=0;i< app.selectGrid.store.getCount();i++){\n//   var uid = app.selectGrid.store.getAt(i).get('ID');\n//   for(var j=0;j< app.userGrid.store.getCount();j++){\n//     if(uid === app.userGrid.store.getAt(j).get('USER_ID')){\n//        arr.push(app.userGrid.store.getAt(j));\n//        break;\n//     }  \n//   }\n// }\n// app.userGrid.getSelectionModel().select(arr);\n// loadStaU = false;\nvar tempArray = new Array();\n\n/*for(var i=0; i<selectUdpStore_auth.getCount(); i++){\n  var record = selectUdpStore_auth.getAt();\n  \n  if(record.get('PRI_TYPE') == 'U'){\n    var index = userStore.find('PRI_ID',record.get('PRI_ID'));\n    if(index != -1){\n      tempArray.push(userStore.getAt(index));\n    }\n  }\n}*/\n\n// for(var i=0; i<hasSelectUdpArray.length; i++){\n  \n//   var index = userStore.find('PRI_ID',hasSelectUdpArray[i]);\n  \n//   if(index != -1){\n//     tempArray.push(userStore.getAt(index));\n//   }\n  \n// }\n\n// allUserGrid.getSelectionModel().select(tempArray);"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"tab"}],"expanded":false,"type":"window"}],"expanded":false,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","frame":"true","height":"80","style":"border-width:0px","layout":"fit","border":"false","itemId":"queryForm"},"children":[{"configs":{"title":"{#wf_executer_cxtj#}","style":"padding-top:8px","layout":"column","itemId":"queryfieldSet"},"children":[{"configs":{"labelWidth":"80","displayField":"APP_NAME","width":"200","valueField":"APP_ID","labelAlign":"right","itemId":"appCombox","fieldLabel":"{#wf_executer_appCombox#}"},"events":{"select":"app.entityCombox.clearValue();\napp.entityCombox.store.getProxy().extraParams.appId = app.appCombox.getValue();\napp.queryBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/data/getApps"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"labelWidth":"80","displayField":"NAME","width":"200","valueField":"ID","labelAlign":"right","itemId":"entityCombox","fieldLabel":"{#wf_executer_entityCombox#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getEntitys_QueryForm"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"100","width":"200","labelAlign":"right","itemId":"processName","fieldLabel":"{#wf_executer_processName#}"},"events":{"specialkey":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","width":"200","labelAlign":"right","itemId":"actName","fieldLabel":"{#wf_executer_actName#}"},"events":{"specialkey":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#wf_executer_queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"5"},"events":{"click":"app.actGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#wf_executer_resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"10"},"events":{"click":"Wb.reset(app.queryForm);\napp.actGrid.store.load();\napp.entityCombox.store.getProxy().extraParams.appId = app.appCombox.getValue();\napp.entityCombox.store.load();\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"false","selType":"checkboxmodel","itemId":"actGrid","simpleSelect":"false"},"events":{"itemclick":"var actId = record.data.ACT_ID ;\napp.executorAuthGrid.store.getProxy().extraParams.actId = actId;\napp.executorGrid.store.getProxy().extraParams.actId = actId;\n\napp.executorAuthGrid.store.load();\napp.executorGrid.store.load();\n","itemdblclick":"app.editAuth.fireEvent('click');"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_APP_NAME#}","width":"180","dataIndex":"APP_NAME","itemId":"APP_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ENTITY_NAME#}","width":"150","dataIndex":"ENTITY_NAME","itemId":"ENTITY_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_PROCESS_NAME#}","width":"150","dataIndex":"PROCESS_NAME","itemId":"PROCESS_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_NAME#}","width":"150","dataIndex":"ACT_NAME","itemId":"ACT_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CATEGORY_NAME#}","align":"center","width":"100","dataIndex":"ACT_CATEGORY_NAME","titleAlign":"center","itemId":"ACT_CATEGORY_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CATEGORY_NAME#}","hidden":"true","dataIndex":"ACT_CATEGORY","itemId":"ACT_CATEGORY_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_PROCESS_ID#}","hidden":"true","dataIndex":"PROCESS_ID","itemId":"PROCESS_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_ID#}","hidden":"true","dataIndex":"ACT_ID","itemId":"ACT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_ACT_CODE#}","hidden":"true","dataIndex":"ACT_CODE","itemId":"ACT_CODE_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getActs"},"events":{"beforeload":"var whereSql = '';\nif(!Ext.isEmpty(app.appCombox.getValue())){\n  whereSql = whereSql+' and a.app_id = \\''+app.appCombox.getValue()+'\\'';\n}\nif(!Ext.isEmpty(app.entityCombox.getValue())){\n  whereSql = whereSql+' and e.entity_id = \\''+app.entityCombox.getValue()+'\\'';\n}\n\nif(whereSql !== ''){\n  store.getProxy().extraParams.whereSql= whereSql;\n}else{\n  store.getProxy().extraParams.whereSql= ' and 1=1'; \n}\nstore.getProxy().extraParams.processName = app.processName.getValue();\nstore.getProxy().extraParams.actName = app.actName.getValue();\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#wf_executer_addAuth#}","itemId":"addAuth","iconCls":"record_add_icon"},"events":{"click":"var win = Ext.window.Window(app._authWin);\nwin.show();\napp.authAllActGrid.store.load();\n// app.allUserGrid.store.load();\n// app.allPostGrid.store.load();\n// app.allDeptGrid.store.load();\n//app.authSelectActGrid.store.load();\napp.authSelectUpdGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#wf_executer_editAuth#}","itemId":"editAuth","iconCls":"record_edit_icon"},"events":{"click":"var rows = app.actGrid.getSelectionModel().getSelection();\n\nif(rows.length===0){\n//   Ext.Msg.alert('提示','请选择操作的记录!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzczdjl#}\") ;\n  return false;\n}else if(rows.length > 1){\n//   Ext.Msg.alert('提示','请选择一条操作的记录!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzytczdjl#}\") ;\n  return false; \n}\napp.authEditWin.show();\n\nvar actId = rows[0].data.ACT_ID;\n    \napp.selectUserGrid_edit.store.getProxy().extraParams.actId = actId;\napp.selectdeptGrid_edit.store.getProxy().extraParams.actId = actId;\napp.selectPostGrid_edit.store.getProxy().extraParams.actId = actId;\n\napp.allUserGrid_edit.store.load();\napp.allPostGrid_edit.store.load();\napp.allDeptGrid_edit.store.load();\n\n\napp.selectUserGrid_edit.store.load();\napp.selectdeptGrid_edit.store.load();\napp.selectPostGrid_edit.store.load();\n\napp.actInfoStore.load({params:{actId:actId}});\n\naddArray_edit = new Array();\ndeleteArray_edit = new Array();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item3"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":false,"type":"grid"},{"configs":{"region":"south","height":"280","split":"true","border":"false","itemId":"executorTabPanel"},"children":[{"configs":{"title":"{#wf_executer_executorAuthPanel#}","style":"border-width:0px","layout":"fit","itemId":"executorAuthPanel"},"children":[{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"executorAuthGrid","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EXECUTOR_TYPE_VIEW#}","dataIndex":"EXECUTOR_TYPE_VIEW","itemId":"EXECUTOR_TYPE_VIEW_executorAuthGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EXECUTOR_VALUE_VIEW#}","dataIndex":"EXECUTOR_VALUE_VIEW","itemId":"EXECUTOR_VALUE_VIEW_executorAuthGrid","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EXECUTOR_TYPE#}","hidden":"true","dataIndex":"EXECUTOR_TYPE","itemId":"EXECUTOR_TYPE_executorAuthGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_EXECUTOR_VALUE#}","hidden":"true","dataIndex":"EXECUTOR_VALUE","itemId":"EXECUTOR_VALUE_executorAuthGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"VALUE_ID","hidden":"true","dataIndex":"VALUE_ID","itemId":"VALUE_ID_executorAuthGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"ACT_ID","hidden":"true","dataIndex":"ACT_ID","itemId":"ACT_ID_executorAuthGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_PROPERTY_CODE#}","hidden":"true","dataIndex":"PROPERTY_CODE","itemId":"PROPERTY_CODE_executorAuthGrid"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getExecutorAuths"},"events":{"beforeload":"// store.getProxy().extraParams.proxyUser = app.proxyUser.getValue();\n// store.getProxy().extraParams.user = app.user.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#wf_executer_delAuth#}","itemId":"delAuth","iconCls":"delete_icon"},"events":{"click":"var rows = app.executorAuthGrid.getSelectionModel().getSelection();\n\nif(rows.length===0){\n//   Ext.Msg.alert('提示','请选择删除的记录!');\n  Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_qxzscdjl#}\") ;\n  return false ;\n}else{\n  Ext.Msg.confirm('{#wf_executer_prompt#}','{#wf_executer_nqdyscsxdjlm#}',function(a){\n    if(a=='yes'){\n      \n      var ids = \"\";\n      Ext.each(rows,function(item){\n        var id = \"'\"+item.data.VALUE_ID+\"'\";\n        if(ids === \"\"){\n            ids = id ;\n          }else{\n            ids = ids+\",\"+id;\n          }\n\n      });  \n      \n      Wb.request({\n        url:'m?xwl=xip/wf/executer/DATA/deleteAuth',\n        params:{ids:ids},\n        success:function(){\n//           Ext.Msg.alert('提示','删除成功!');\n          Ext.Msg.alert(\"{#wf_executer_prompt#}\",\"{#wf_executer_sccg#}\") ;\n          app.executorAuthGrid.store.load();\n          app.executorGrid.store.load();\n        }\n      });\n      \n    }else{\n      return false ;\n    }\n  });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"},{"configs":{"title":"{#wf_executer_executorPanel#}","style":"border-width:0px","layout":"fit","itemId":"executorPanel"},"children":[{"configs":{"region":"center","selType":"checkboxmodel","itemId":"executorGrid"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"XUHAO"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EMP_CODE#}","width":"100","dataIndex":"EMP_CODE","itemId":"EMP_CODE_executorGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_EMP_NAME#}","width":"100","dataIndex":"EMP_NAME","itemId":"EMP_NAME_executorGrid"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#wf_executer_AUTH_TYPE#}","align":"center","width":"120","dataIndex":"AUTH_TYPE","itemId":"AUTH_TYPE_executorGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_POST_NAME#}","width":"220","dataIndex":"POST_NAME","itemId":"POST_NAME_executorGrid"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wf_executer_DEPT_NAME#}","width":"220","dataIndex":"DEPT_NAME","itemId":"DEPT_NAME_executorGrid"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"store","url":"m?xwl=xip/wf/executer/DATA/getExecutors"},"events":{"beforeload":"// store.getProxy().extraParams.proxyUser = app.proxyUser.getValue();\n// store.getProxy().extraParams.user = app.user.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"tab"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}